<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-development/workspace-admin-scripts-commands" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Workspace Admin Scripts &amp; Commands | duplistatus</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://wsj-br.github.io/duplistatus/img/duplistatus_banner.png"><meta data-rh="true" name="twitter:image" content="https://wsj-br.github.io/duplistatus/img/duplistatus_banner.png"><meta data-rh="true" property="og:url" content="https://wsj-br.github.io/duplistatus/development/workspace-admin-scripts-commands"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Workspace Admin Scripts &amp; Commands | duplistatus"><meta data-rh="true" name="description" content="Clean Database"><meta data-rh="true" property="og:description" content="Clean Database"><link data-rh="true" rel="icon" href="/duplistatus/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://wsj-br.github.io/duplistatus/development/workspace-admin-scripts-commands"><link data-rh="true" rel="alternate" href="https://wsj-br.github.io/duplistatus/development/workspace-admin-scripts-commands" hreflang="en"><link data-rh="true" rel="alternate" href="https://wsj-br.github.io/duplistatus/development/workspace-admin-scripts-commands" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Workspace Admin Scripts & Commands","item":"https://wsj-br.github.io/duplistatus/development/workspace-admin-scripts-commands"}]}</script><link rel="stylesheet" href="/duplistatus/assets/css/styles.7b868a2b.css">
<script src="/duplistatus/assets/js/runtime~main.4d0c35df.js" defer="defer"></script>
<script src="/duplistatus/assets/js/main.3bfffe40.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"dark"),document.documentElement.setAttribute("data-theme-choice",t||"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/duplistatus/img/duplistatus_logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_OYbU" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/duplistatus/"><div class="navbar__logo"><img src="/duplistatus/img/duplistatus_logo.svg" alt="duplistatus Logo" class="themedComponent_xIh0 themedComponent--light_t05d"><img src="/duplistatus/img/duplistatus_logo.svg" alt="duplistatus Logo" class="themedComponent_xIh0 themedComponent--dark_YM6j"></div><b class="navbar__title text--truncate">duplistatus</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/duplistatus/intro">Documentation</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/wsj-br/duplistatus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_LCPc"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_CViu colorModeToggle_WFZw"><button class="clean-btn toggleButton_HJw9 toggleButtonDisabled_G5ig" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_U0wL lightToggleIcon_LQaQ"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_U0wL darkToggleIcon_LKqg"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_U0wL systemToggleIcon_nbNJ"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_recj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_N67M"><div class="docsWrapper_PuxI"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_on2Q" type="button"></button><div class="docRoot_lHuw"><aside class="theme-doc-sidebar-container docSidebarContainer_VxnS"><div class="sidebarViewport_aDCr"><div class="sidebar_Vmdt"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_fSE9"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/duplistatus/intro"><span title="Welcome to duplistatus" class="linkLabel_njBU">Welcome to duplistatus</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_MNmv menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/duplistatus/installation"><span title="Installation" class="categoryLinkLabel_f7eW">Installation</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_MNmv menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/duplistatus/user-guide/overview"><span title="User Guide" class="categoryLinkLabel_f7eW">User Guide</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_MNmv menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/duplistatus/migration/version_upgrade"><span title="Migration" class="categoryLinkLabel_f7eW">Migration</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_MNmv menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/duplistatus/api-reference/overview"><span title="API Reference" class="categoryLinkLabel_f7eW">API Reference</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_MNmv menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/duplistatus/development/setup"><span title="Development" class="categoryLinkLabel_f7eW">Development</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/duplistatus/development/setup"><span title="Development Setup" class="linkLabel_njBU">Development Setup</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/duplistatus/development/devel"><span title="Most used commands" class="linkLabel_njBU">Most used commands</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/duplistatus/development/database"><span title="Database Schema" class="linkLabel_njBU">Database Schema</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/duplistatus/development/documentation-tools"><span title="Documentation Tools" class="linkLabel_njBU">Documentation Tools</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/duplistatus/development/podman-testing"><span title="Podman Testing" class="linkLabel_njBU">Podman Testing</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/duplistatus/development/release-management"><span title="Release Management" class="linkLabel_njBU">Release Management</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/duplistatus/development/test-scripts"><span title="Test Scripts" class="linkLabel_njBU">Test Scripts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/duplistatus/development/workspace-admin-scripts-commands"><span title="Workspace Admin Scripts &amp; Commands" class="linkLabel_njBU">Workspace Admin Scripts &amp; Commands</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/duplistatus/development/cron-service"><span title="Cron Service" class="linkLabel_njBU">Cron Service</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/duplistatus/development/development-guidelines"><span title="Development Reference" class="linkLabel_njBU">Development Reference</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/duplistatus/development/how-i-build-with-ai"><span title="How I Build this Application using AI tools" class="linkLabel_njBU">How I Build this Application using AI tools</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_MNmv menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/duplistatus/release-notes/0.9.x"><span title="Release Notes" class="categoryLinkLabel_f7eW">Release Notes</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_EADY"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_MVe6"><div class="docItemContainer_lT0f"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_eJ6y" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/duplistatus/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_Q4JU"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Development</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Workspace Admin Scripts &amp; Commands</span></li></ul></nav><div class="tocCollapsible_yqPd theme-doc-toc-mobile tocMobile_N6xl"><button type="button" class="clean-btn tocCollapsibleButton_ZkL2">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Workspace Admin Scripts &amp; Commands</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_ZOMh" id="clean-database">Clean Database<a href="#clean-database" class="hash-link" aria-label="Direct link to Clean Database" title="Direct link to Clean Database" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">./scripts/clean-db.sh</span><br></span></code></pre></div></div>
<p>Cleans the database by removing all data while preserving the database schema and structure.</p>
<div class="markdown-alert markdown-alert-caution">
<p class="markdown-alert-title"><span class="octicon octicon-caution" style="--oct-icon:url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; class=&#x27;octicon octicon-stop mr-2&#x27; viewBox=&#x27;0 0 16 16&#x27; version=&#x27;1.1&#x27; width=&#x27;16&#x27; height=&#x27;16&#x27; aria-hidden=&#x27;true&#x27;%3E%3Cpath d=&#x27;M4.47.22A.749.749 0 0 1 5 0h6c.199 0 .389.079.53.22l4.25 4.25c.141.14.22.331.22.53v6a.749.749 0 0 1-.22.53l-4.25 4.25A.749.749 0 0 1 11 16H5a.749.749 0 0 1-.53-.22L.22 11.53A.749.749 0 0 1 0 11V5c0-.199.079-.389.22-.53Zm.84 1.28L1.5 5.31v5.38l3.81 3.81h5.38l3.81-3.81V5.31L10.69 1.5ZM8 4a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z&#x27;%3E%3C/path%3E%3C/svg%3E&quot;)"></span>Caution</p>
<p>Use with caution as this will delete all existing data.</p>
</div>
<h2 class="anchor anchorTargetStickyNavbar_ZOMh" id="clean-build-artefacts-and-dependencies">Clean build artefacts and dependencies<a href="#clean-build-artefacts-and-dependencies" class="hash-link" aria-label="Direct link to Clean build artefacts and dependencies" title="Direct link to Clean build artefacts and dependencies" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">scripts/clean-workspace.sh</span><br></span></code></pre></div></div>
<p>Removes all build artefacts, node_modules directory, and other generated files to ensure a clean state. This is useful when you need to perform a fresh installation or resolve dependency issues. The command will delete:</p>
<ul>
<li class=""><code>node_modules/</code> directory</li>
<li class=""><code>.next/</code> build directory</li>
<li class=""><code>dist/</code> directory</li>
<li class="">All Docker build cache and perform a Docker system prune</li>
<li class="">pnpm store cache</li>
<li class="">Unused Docker system resources (images, networks, volumes)</li>
<li class="">Any other build cache files</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_ZOMh" id="clean-docker-compose-and-docker-environment">Clean Docker Compose and Docker environment<a href="#clean-docker-compose-and-docker-environment" class="hash-link" aria-label="Direct link to Clean Docker Compose and Docker environment" title="Direct link to Clean Docker Compose and Docker environment" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">scripts/clean-docker.sh</span><br></span></code></pre></div></div>
<p>Perform a complete Docker cleanup, which is useful for:</p>
<ul>
<li class="">Freeing up disk space</li>
<li class="">Removing old/unused Docker artefacts</li>
<li class="">Cleaning up after development or testing sessions</li>
<li class="">Maintaining a clean Docker environment</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_ZOMh" id="update-the-packages-to-the-latest-version">Update the packages to the latest version<a href="#update-the-packages-to-the-latest-version" class="hash-link" aria-label="Direct link to Update the packages to the latest version" title="Direct link to Update the packages to the latest version" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">ncu </span><span class="token parameter variable" style="color:rgb(214, 222, 235)">--upgrade</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">pnpm</span><span class="token plain"> update</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_ZOMh" id="check-for-unused-packages">Check for unused packages<a href="#check-for-unused-packages" class="hash-link" aria-label="Direct link to Check for unused packages" title="Direct link to Check for unused packages" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token function" style="color:rgb(130, 170, 255)">pnpm</span><span class="token plain"> depcheck</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_ZOMh" id="update-version-information">Update version information<a href="#update-version-information" class="hash-link" aria-label="Direct link to Update version information" title="Direct link to Update version information" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">./scripts/update-version.sh</span><br></span></code></pre></div></div>
<p>This script automatically updates the <code>.env</code> file with the current version from <code>package.json</code>. It:</p>
<ul>
<li class="">Extracts the version from <code>package.json</code></li>
<li class="">Creates or updates the <code>.env</code> file with the <code>VERSION</code> variable</li>
<li class="">Only updates if the version has changed</li>
<li class="">Provides feedback on the operation</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_ZOMh" id="pre-checks-script">Pre-checks script<a href="#pre-checks-script" class="hash-link" aria-label="Direct link to Pre-checks script" title="Direct link to Pre-checks script" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">./scripts/pre-checks.sh</span><br></span></code></pre></div></div>
<p>This script runs pre-checks before starting the development server, building, or starting the production server. It:</p>
<ul>
<li class="">Ensures the <code>.duplistatus.key</code> file exists (via <code>ensure-key-file.sh</code>)</li>
<li class="">Updates the version information (via <code>update-version.sh</code>)</li>
</ul>
<p>This script is automatically called by <code>pnpm dev</code>, <code>pnpm build</code>, and <code>pnpm start-local</code>.</p>
<h2 class="anchor anchorTargetStickyNavbar_ZOMh" id="ensure-key-file-exists">Ensure key file exists<a href="#ensure-key-file-exists" class="hash-link" aria-label="Direct link to Ensure key file exists" title="Direct link to Ensure key file exists" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">./scripts/ensure-key-file.sh</span><br></span></code></pre></div></div>
<p>This script ensures the <code>.duplistatus.key</code> file exists in the <code>data</code> directory. It:</p>
<ul>
<li class="">Creates the <code>data</code> directory if it doesn&#x27;t exist</li>
<li class="">Generates a new 32-byte random key file if missing</li>
<li class="">Sets file permissions to 0400 (read-only for owner)</li>
<li class="">Fixes permissions if they are incorrect</li>
</ul>
<p>The key file is used for cryptographic operations in the application.</p>
<h2 class="anchor anchorTargetStickyNavbar_ZOMh" id="admin-account-recovery">Admin account recovery<a href="#admin-account-recovery" class="hash-link" aria-label="Direct link to Admin account recovery" title="Direct link to Admin account recovery" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">tsx scripts/admin-recovery.ts </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token plain">username</span><span class="token operator" style="color:rgb(127, 219, 202)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token plain">new-password</span><span class="token operator" style="color:rgb(127, 219, 202)">&gt;</span><br></span></code></pre></div></div>
<p>This script allows recovery of admin accounts if locked out or password forgotten. It:</p>
<ul>
<li class="">Resets the password for the specified user</li>
<li class="">Unlocks the account if it was locked</li>
<li class="">Resets failed login attempts counter</li>
<li class="">Clears the &quot;must change password&quot; flag</li>
<li class="">Validates password meets security requirements</li>
<li class="">Logs the action to the audit log</li>
</ul>
<p><strong>Example:</strong></p>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">tsx scripts/admin-recovery.ts admin NewPassword123</span><br></span></code></pre></div></div>
<div class="markdown-alert markdown-alert-caution">
<p class="markdown-alert-title"><span class="octicon octicon-caution" style="--oct-icon:url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; class=&#x27;octicon octicon-stop mr-2&#x27; viewBox=&#x27;0 0 16 16&#x27; version=&#x27;1.1&#x27; width=&#x27;16&#x27; height=&#x27;16&#x27; aria-hidden=&#x27;true&#x27;%3E%3Cpath d=&#x27;M4.47.22A.749.749 0 0 1 5 0h6c.199 0 .389.079.53.22l4.25 4.25c.141.14.22.331.22.53v6a.749.749 0 0 1-.22.53l-4.25 4.25A.749.749 0 0 1 11 16H5a.749.749 0 0 1-.53-.22L.22 11.53A.749.749 0 0 1 0 11V5c0-.199.079-.389.22-.53Zm.84 1.28L1.5 5.31v5.38l3.81 3.81h5.38l3.81-3.81V5.31L10.69 1.5ZM8 4a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z&#x27;%3E%3C/path%3E%3C/svg%3E&quot;)"></span>Caution</p>
<p>This script directly modifies the database. Use only when necessary for account recovery.</p>
</div>
<h2 class="anchor anchorTargetStickyNavbar_ZOMh" id="docker-build-script">Docker build script<a href="#docker-build-script" class="hash-link" aria-label="Direct link to Docker build script" title="Direct link to Docker build script" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">./scripts/docker-build.sh</span><br></span></code></pre></div></div>
<p>Builds a Docker image with the version from <code>.env</code> or <code>package.json</code>. The script:</p>
<ul>
<li class="">Extracts the version from <code>.env</code> file (or falls back to <code>package.json</code>)</li>
<li class="">Builds the Docker image with the version as a build argument</li>
<li class="">Tags the image as <code>duplistatus:$VERSION</code></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_ZOMh" id="docker-compose-with-version">Docker Compose with version<a href="#docker-compose-with-version" class="hash-link" aria-label="Direct link to Docker Compose with version" title="Direct link to Docker Compose with version" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">./scripts/docker-compose-with-version.sh </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">docker-compose-args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br></span></code></pre></div></div>
<p>Runs docker-compose with the version automatically set from <code>.env</code> or <code>package.json</code>. This script:</p>
<ul>
<li class="">Exports the version as an environment variable</li>
<li class="">Passes all arguments to docker-compose</li>
<li class="">Ensures version consistency across Docker operations</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_ZOMh" id="copy-images">Copy images<a href="#copy-images" class="hash-link" aria-label="Direct link to Copy images" title="Direct link to Copy images" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">./scripts/copy-images.sh</span><br></span></code></pre></div></div>
<p>Copies image files from <code>website/static/img</code> to their appropriate locations in the application:</p>
<ul>
<li class="">Copies <code>favicon.ico</code> to <code>src/app/</code></li>
<li class="">Copies <code>duplistatus_logo.png</code> to <code>public/images/</code></li>
<li class="">Copies <code>duplistatus_banner.png</code> to <code>public/images/</code></li>
</ul>
<p>Useful for keeping application images synchronized with documentation images.</p>
<h2 class="anchor anchorTargetStickyNavbar_ZOMh" id="viewing-the-configurations-in-the-database">Viewing the configurations in the database<a href="#viewing-the-configurations-in-the-database" class="hash-link" aria-label="Direct link to Viewing the configurations in the database" title="Direct link to Viewing the configurations in the database" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">sqlite3 data/backups.db </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;SELECT key, value FROM configurations;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">awk</span><span class="token plain"> -F</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;|&#x27;</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token string" style="color:rgb(173, 219, 103)">  {print &quot;\n&quot; $1 &quot;: &quot;; </span><br></span><span class="token-line" style="color:#d6deeb"><span class="token string" style="color:rgb(173, 219, 103)">   if(index($2,&quot;{&quot;)&gt;0) {print $2 |&quot;jq -C .&quot;; close(&quot;jq -C .&quot;)} </span><br></span><span class="token-line" style="color:#d6deeb"><span class="token string" style="color:rgb(173, 219, 103)">   else {print $2;}}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">less</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(214, 222, 235)">-R</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">sqlite3 /var/lib/docker/volumes/duplistatus_data/_data/backups.db </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;SELECT key, value FROM configurations;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">awk</span><span class="token plain"> -F</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;|&#x27;</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token string" style="color:rgb(173, 219, 103)">  {print &quot;\n&quot; $1 &quot;: &quot;; </span><br></span><span class="token-line" style="color:#d6deeb"><span class="token string" style="color:rgb(173, 219, 103)">   if(index($2,&quot;{&quot;)&gt;0) {print $2 |&quot;jq -C .&quot;; close(&quot;jq -C .&quot;)} </span><br></span><span class="token-line" style="color:#d6deeb"><span class="token string" style="color:rgb(173, 219, 103)">   else {print $2;}}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">less</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(214, 222, 235)">-R</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_ZOMh" id="sql-scripts-for-debugging-and-maintenance">SQL Scripts for Debugging and Maintenance<a href="#sql-scripts-for-debugging-and-maintenance" class="hash-link" aria-label="Direct link to SQL Scripts for Debugging and Maintenance" title="Direct link to SQL Scripts for Debugging and Maintenance" translate="no">​</a></h2>
<p>The project includes SQL scripts for database maintenance:</p>
<h3 class="anchor anchorTargetStickyNavbar_ZOMh" id="delete-backup-settings">Delete Backup Settings<a href="#delete-backup-settings" class="hash-link" aria-label="Direct link to Delete Backup Settings" title="Direct link to Delete Backup Settings" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">sqlite3 data/backups.db </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token plain"> scripts/delete-backup-settings.sql</span><br></span></code></pre></div></div>
<p>This script removes all backup settings from the configurations table. Use with caution as this will reset all backup notification configurations.</p>
<h3 class="anchor anchorTargetStickyNavbar_ZOMh" id="delete-last-backup">Delete Last Backup<a href="#delete-last-backup" class="hash-link" aria-label="Direct link to Delete Last Backup" title="Direct link to Delete Last Backup" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Bfha theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_c81e"><pre tabindex="0" class="prism-code language-bash codeBlock_Vf9a thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_ASk3"><span class="token-line" style="color:#d6deeb"><span class="token plain">sqlite3 data/backups.db </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;</span><span class="token plain"> scripts/delete-last-backup.sql</span><br></span></code></pre></div></div>
<p>This script removes the most recent backup record for each server. By default, it deletes the last backup for ALL servers. The script includes commented examples for targeting specific servers by name. Useful for testing and debugging purposes.</p>
<p><strong>Note</strong>: The script has been updated to work with the current database schema (uses <code>servers</code> table and <code>server_id</code> column).</p>
<div class="markdown-alert markdown-alert-caution">
<p class="markdown-alert-title"><span class="octicon octicon-caution" style="--oct-icon:url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; class=&#x27;octicon octicon-stop mr-2&#x27; viewBox=&#x27;0 0 16 16&#x27; version=&#x27;1.1&#x27; width=&#x27;16&#x27; height=&#x27;16&#x27; aria-hidden=&#x27;true&#x27;%3E%3Cpath d=&#x27;M4.47.22A.749.749 0 0 1 5 0h6c.199 0 .389.079.53.22l4.25 4.25c.141.14.22.331.22.53v6a.749.749 0 0 1-.22.53l-4.25 4.25A.749.749 0 0 1 11 16H5a.749.749 0 0 1-.53-.22L.22 11.53A.749.749 0 0 1 0 11V5c0-.199.079-.389.22-.53Zm.84 1.28L1.5 5.31v5.38l3.81 3.81h5.38l3.81-3.81V5.31L10.69 1.5ZM8 4a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z&#x27;%3E%3C/path%3E%3C/svg%3E&quot;)"></span>Caution</p>
<p>These SQL scripts directly modify the database. Always backup your database before running these scripts.</p>
</div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/duplistatus/development/test-scripts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Test Scripts</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/duplistatus/development/cron-service"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cron Service</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Qzs_ thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#clean-database" class="table-of-contents__link toc-highlight">Clean Database</a></li><li><a href="#clean-build-artefacts-and-dependencies" class="table-of-contents__link toc-highlight">Clean build artefacts and dependencies</a></li><li><a href="#clean-docker-compose-and-docker-environment" class="table-of-contents__link toc-highlight">Clean Docker Compose and Docker environment</a></li><li><a href="#update-the-packages-to-the-latest-version" class="table-of-contents__link toc-highlight">Update the packages to the latest version</a></li><li><a href="#check-for-unused-packages" class="table-of-contents__link toc-highlight">Check for unused packages</a></li><li><a href="#update-version-information" class="table-of-contents__link toc-highlight">Update version information</a></li><li><a href="#pre-checks-script" class="table-of-contents__link toc-highlight">Pre-checks script</a></li><li><a href="#ensure-key-file-exists" class="table-of-contents__link toc-highlight">Ensure key file exists</a></li><li><a href="#admin-account-recovery" class="table-of-contents__link toc-highlight">Admin account recovery</a></li><li><a href="#docker-build-script" class="table-of-contents__link toc-highlight">Docker build script</a></li><li><a href="#docker-compose-with-version" class="table-of-contents__link toc-highlight">Docker Compose with version</a></li><li><a href="#copy-images" class="table-of-contents__link toc-highlight">Copy images</a></li><li><a href="#viewing-the-configurations-in-the-database" class="table-of-contents__link toc-highlight">Viewing the configurations in the database</a></li><li><a href="#sql-scripts-for-debugging-and-maintenance" class="table-of-contents__link toc-highlight">SQL Scripts for Debugging and Maintenance</a><ul><li><a href="#delete-backup-settings" class="table-of-contents__link toc-highlight">Delete Backup Settings</a></li><li><a href="#delete-last-backup" class="table-of-contents__link toc-highlight">Delete Last Backup</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/duplistatus/installation">Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/duplistatus/user-guide/overview">User Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/duplistatus/migration/version_upgrade">Migration</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Development</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/duplistatus/development/setup">Development Setup</a></li><li class="footer__item"><a class="footer__link-item" href="/duplistatus/api-reference/overview">API Reference</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/wsj-br/duplistatus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_LCPc"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://hub.docker.com/r/wsjbr/duplistatus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docker Hub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_LCPc"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © Waldemar Scudeller Jr.</div></div></div></footer></div>
</body>
</html>