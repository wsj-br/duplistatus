"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[6081],{98291(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"development/podman-testing","title":"Tests Podman","description":"podman-testing}","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/development/podman-testing.md","sourceDirName":"development","slug":"/development/podman-testing","permalink":"/duplistatus/fr/development/podman-testing","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"translation_last_updated":"2026-03-01T00:45:04.408Z","source_file_mtime":"2026-02-16T00:30:39.430Z","source_file_hash":"841b30d8ee97e362","translation_language":"fr","source_file_path":"development/podman-testing.md"},"sidebar":"mainSidebar","previous":{"title":"Workflow de Maintenance des Traductions","permalink":"/duplistatus/fr/development/translation-workflow"},"next":{"title":"Gestion des versions","permalink":"/duplistatus/fr/development/release-management"}}');var r=s(36259),t=s(73230);const l={translation_last_updated:"2026-03-01T00:45:04.408Z",source_file_mtime:"2026-02-16T00:30:39.430Z",source_file_hash:"841b30d8ee97e362",translation_language:"fr",source_file_path:"development/podman-testing.md"},d="Tests Podman {#podman-testing}",o={},c=[{value:"Configuration initiale et gestion",id:"initial-setup-and-management",level:2},{value:"Configuration DNS",id:"dns-configuration",level:2},{value:"Surveillance et Contr\xf4les de Sant\xe9",id:"monitoring-and-health-checks",level:2},{value:"Commandes de d\xe9bogage",id:"debugging-commands",level:2},{value:"Flux de travail d&#39;utilisation",id:"usage-workflow",level:2},{value:"Serveur de d\xe9veloppement",id:"development-server",level:3},{value:"Serveur Podman",id:"podman-server",level:3},{value:"Important",id:"important-notes",level:2},{value:"Mise en r\xe9seau des pods Podman",id:"podman-pod-networking",level:3},{value:"Mode sans root vs mode root",id:"rootless-vs-root-mode",level:3},{value:"Configuration de l&#39;environnement",id:"environment-configuration",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"podman-testing",children:"Tests Podman"})}),"\n",(0,r.jsxs)(n.p,{children:["Copiez et ex\xe9cutez les scripts situ\xe9s \xe0 ",(0,r.jsx)(n.code,{children:"scripts/podman_testing"})," sur le Serveur de test Podman."]}),"\n",(0,r.jsx)(n.h2,{id:"initial-setup-and-management",children:"Configuration initiale et gestion"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"copy.docker.duplistatus.local"})," : Copie l'image Docker du d\xe9mon Docker local vers Podman (pour les tests locaux)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"copy.docker.duplistatus.remote"})," : Copie l'image Docker d'un serveur de d\xe9veloppement distant vers Podman (n\xe9cessite un acc\xe8s SSH).","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Cr\xe9ez l'image sur le serveur de d\xe9veloppement en utilisant : ",(0,r.jsx)(n.code,{children:"docker build . -t wsj-br/duplistatus:devel"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"start.duplistatus"})," : D\xe9marre le conteneur en mode rootless."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pod.testing"})," : Teste le conteneur \xe0 l'int\xe9rieur d'un pod Podman (avec les privil\xe8ges root)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"stop.duplistatus"})," : Arr\xeate le pod et supprime le conteneur."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"clean.duplistatus"})," : Arr\xeate les conteneurs, supprime les pods et nettoie les anciennes images."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"dns-configuration",children:"Configuration DNS"}),"\n",(0,r.jsx)(n.p,{children:"Les scripts d\xe9tectent et configurent automatiquement les param\xe8tres DNS \xe0 partir du syst\xe8me h\xf4te :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"D\xe9tection Automatique"})," : Utilise ",(0,r.jsx)(n.code,{children:"resolvectl status"})," (systemd-resolved) pour extraire les serveurs DNS et les domaines de recherche"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Support de Secours"})," : Bascule vers l'analyse de ",(0,r.jsx)(n.code,{children:"/etc/resolv.conf"})," sur les syst\xe8mes non-systemd"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Filtrage Intelligent"})," : Filtre automatiquement les adresses localhost et les serveurs de noms IPv6"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fonctionne avec"})," :","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tailscale MagicDNS (100.100.100.100)"}),"\n",(0,r.jsx)(n.li,{children:"Serveurs DNS d'entreprise"}),"\n",(0,r.jsx)(n.li,{children:"Configurations r\xe9seau standard"}),"\n",(0,r.jsx)(n.li,{children:"Configurations DNS Personnalis\xe9es"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Aucune configuration DNS manuelle n'est n\xe9cessaire - les scripts la g\xe8rent automatiquement !"}),"\n",(0,r.jsx)(n.h2,{id:"monitoring-and-health-checks",children:"Surveillance et Contr\xf4les de Sant\xe9"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"check.duplistatus"}),": V\xe9rifie les journaux, la connectivit\xe9 et la sant\xe9 de l'application."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"debugging-commands",children:"Commandes de d\xe9bogage"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"logs.duplistatus"})," : Affiche les journaux du pod."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"exec.shell.duplistatus"})," : Ouvre un shell dans le conteneur."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"restart.duplistatus"})," : Arr\xeate le pod, supprime le conteneur, copie l'image, cr\xe9e le conteneur et d\xe9marre le pod."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"usage-workflow",children:"Flux de travail d'utilisation"}),"\n",(0,r.jsx)(n.h3,{id:"development-server",children:"Serveur de d\xe9veloppement"}),"\n",(0,r.jsx)(n.p,{children:"Cr\xe9er l'image Docker sur le serveur de d\xe9veloppement :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker build . -t wsj-br/duplistatus:devel\n"})}),"\n",(0,r.jsx)(n.h3,{id:"podman-server",children:"Serveur Podman"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Transf\xe9rer l'image Docker :","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Utilisez ",(0,r.jsx)(n.code,{children:"./copy.docker.duplistatus.local"})," si Docker et Podman sont sur la m\xeame machine"]}),"\n",(0,r.jsxs)(n.li,{children:["Utilisez ",(0,r.jsx)(n.code,{children:"./copy.docker.duplistatus.remote"})," si vous copiez \xe0 partir d'un serveur de d\xe9veloppement distant (n\xe9cessite un fichier ",(0,r.jsx)(n.code,{children:".env"})," avec ",(0,r.jsx)(n.code,{children:"REMOTE_USER"})," et ",(0,r.jsx)(n.code,{children:"REMOTE_HOST"}),")"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["D\xe9marrez le conteneur avec ",(0,r.jsx)(n.code,{children:"./start.duplistatus"})," (autonome, sans privil\xe8ges root)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Ou utilisez ",(0,r.jsx)(n.code,{children:"./pod.testing"})," pour tester en mode pod (avec root)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Surveillez avec ",(0,r.jsx)(n.code,{children:"./check.duplistatus"})," et ",(0,r.jsx)(n.code,{children:"./logs.duplistatus"})]}),"\n",(0,r.jsxs)(n.li,{children:["Arr\xeatez avec ",(0,r.jsx)(n.code,{children:"./stop.duplistatus"})," quand vous avez termin\xe9"]}),"\n",(0,r.jsxs)(n.li,{children:["Utilisez ",(0,r.jsx)(n.code,{children:"./restart.duplistatus"})," pour un cycle de red\xe9marrage complet (arr\xeat, copie de l'image, d\xe9marrage)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Note"})," : Ce script r\xe9f\xe9rence actuellement ",(0,r.jsx)(n.code,{children:"copy.docker.duplistatus"})," qui devrait \xeatre remplac\xe9 par la variante ",(0,r.jsx)(n.code,{children:".local"})," ou ",(0,r.jsx)(n.code,{children:".remote"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Utilisez ",(0,r.jsx)(n.code,{children:"./clean.duplistatus"})," pour supprimer les conteneurs, les pods et les anciennes images"]}),"\n"]}),"\n",(0,r.jsx)(n.h1,{id:"testing-the-application",children:"Test de l'application"}),"\n",(0,r.jsxs)(n.p,{children:["Si vous ex\xe9cutez le serveur Podman sur la m\xeame machine, utilisez ",(0,r.jsx)(n.code,{children:"http://localhost:9666"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Si vous \xeates sur un autre serveur, obtenez l'URL avec :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"echo \"http://$(hostname -I | awk '{print $1}'):9666\"\n"})}),"\n",(0,r.jsx)(n.h2,{id:"important-notes",children:"Important"}),"\n",(0,r.jsx)(n.h3,{id:"podman-pod-networking",children:"Mise en r\xe9seau des pods Podman"}),"\n",(0,r.jsx)(n.p,{children:"Quand l'application s'ex\xe9cute dans des pods Podman, elle n\xe9cessite :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Une configuration DNS explicite (g\xe9r\xe9e automatiquement par le script ",(0,r.jsx)(n.code,{children:"pod.testing"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Une liaison de port \xe0 toutes les interfaces (",(0,r.jsx)(n.code,{children:"0.0.0.0:9666"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Les scripts g\xe8rent ces exigences automatiquement - aucune configuration manuelle n\xe9cessaire."}),"\n",(0,r.jsx)(n.h3,{id:"rootless-vs-root-mode",children:"Mode sans root vs mode root"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mode autonome"})," (",(0,r.jsx)(n.code,{children:"start.duplistatus"}),") : S'ex\xe9cute sans privil\xe8ges avec ",(0,r.jsx)(n.code,{children:"--userns=keep-id"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mode pod"})," (",(0,r.jsx)(n.code,{children:"pod.testing"}),") : S'ex\xe9cute en tant que root \xe0 l'int\xe9rieur du pod \xe0 des fins de test"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Les deux modes fonctionnent correctement avec la d\xe9tection DNS automatique."}),"\n",(0,r.jsx)(n.h2,{id:"environment-configuration",children:"Configuration de l'environnement"}),"\n",(0,r.jsxs)(n.p,{children:["Les deux ",(0,r.jsx)(n.code,{children:"copy.docker.duplistatus.local"})," et ",(0,r.jsx)(n.code,{children:"copy.docker.duplistatus.remote"})," n\xe9cessitent un fichier ",(0,r.jsx)(n.code,{children:".env"})," dans le r\xe9pertoire ",(0,r.jsx)(n.code,{children:"scripts/podman_testing"})," :"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Pour la copie locale"})," (",(0,r.jsx)(n.code,{children:"copy.docker.duplistatus.local"}),") :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"IMAGE=wsj-br/duplistatus:devel\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Pour la copie \xe0 distance"})," (",(0,r.jsx)(n.code,{children:"copy.docker.duplistatus.remote"}),") :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"IMAGE=wsj-br/duplistatus:devel\nREMOTE_USER=your_username\nREMOTE_HOST=your_hostname\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Le script ",(0,r.jsx)(n.code,{children:"start.duplistatus"})," n\xe9cessite un fichier ",(0,r.jsx)(n.code,{children:".env"})," contenant au minimum la variable ",(0,r.jsx)(n.code,{children:"IMAGE"})," :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"IMAGE=wsj-br/duplistatus:devel\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note"})," : Le message d'erreur du script mentionne ",(0,r.jsx)(n.code,{children:"REMOTE_USER"})," et ",(0,r.jsx)(n.code,{children:"REMOTE_HOST"}),", mais ceux-ci ne sont pas r\xe9ellement utilis\xe9s par ",(0,r.jsx)(n.code,{children:"start.duplistatus"}),"\u2014seul ",(0,r.jsx)(n.code,{children:"IMAGE"})," est requis."]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},73230(e,n,s){s.d(n,{R:()=>l,x:()=>d});var i=s(71299);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);