"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[6971],{86410(e,s,d){d.r(s),d.d(s,{assets:()=>c,contentTitle:()=>t,default:()=>o,frontMatter:()=>l,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"development/database","title":"Sch\xe9ma de base de donn\xe9es","description":"database-schema}","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/development/database.md","sourceDirName":"development","slug":"/development/database","permalink":"/duplistatus/fr/development/database","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"translation_last_updated":"2026-02-16T00:13:26.901Z","source_file_mtime":"2026-02-06T21:19:17.347Z","source_file_hash":"21d21cb01acea43b","translation_language":"fr","source_file_path":"development/database.md"},"sidebar":"mainSidebar","previous":{"title":"Commandes les plus utilis\xe9es","permalink":"/duplistatus/fr/development/devel"},"next":{"title":"Outils de Documentation","permalink":"/duplistatus/fr/development/documentation-tools"}}');var i=d(36259),r=d(73230);const l={translation_last_updated:"2026-02-16T00:13:26.901Z",source_file_mtime:"2026-02-06T21:19:17.347Z",source_file_hash:"21d21cb01acea43b",translation_language:"fr",source_file_path:"development/database.md"},t="Sch\xe9ma de base de donn\xe9es {#database-schema}",c={},a=[{value:"Emplacement de la base de donn\xe9es",id:"database-location",level:2},{value:"Syst\xe8me de Migration de Base de Donn\xe9es",id:"database-migration-system",level:2},{value:"Historique des versions de migration",id:"migration-version-history",level:3},{value:"Processus de Migration",id:"migration-process",level:3},{value:"Tableaux",id:"tables",level:2},{value:"Tableau des serveurs",id:"servers-table",level:3},{value:"Champs",id:"fields",level:4},{value:"Tableau des sauvegardes",id:"backups-table",level:3},{value:"Champs cl\xe9s",id:"key-fields",level:4},{value:"Tableaux de Messages (Stockage JSON)",id:"message-arrays-json-storage",level:4},{value:"Champs d&#39;op\xe9ration de fichier",id:"file-operation-fields",level:4},{value:"Champs de Taille des fichiers",id:"file-size-fields",level:4},{value:"Champs de Statut d&#39;Op\xe9ration",id:"operation-status-fields",level:4},{value:"Champs de Statistiques Backend",id:"backend-statistics-fields",level:4},{value:"Tableau des configurations",id:"configurations-table",level:3},{value:"Champs",id:"fields",level:4},{value:"Cl\xe9s de Configuration Communes",id:"common-configuration-keys",level:4},{value:"Tableau des versions de base de donn\xe9es",id:"database-version-table",level:3},{value:"Champs",id:"fields",level:4},{value:"Tableau Utilisateurs",id:"users-table",level:3},{value:"Champs",id:"fields",level:4},{value:"Tableau Sessions",id:"sessions-table",level:3},{value:"Champs",id:"fields",level:4},{value:"Journal d&#39;Audit",id:"audit-log-table",level:3},{value:"Champs",id:"fields",level:4},{value:"Gestion des sessions",id:"session-management",level:2},{value:"Stockage de session sauvegard\xe9 par base de donn\xe9es",id:"database-backed-session-storage",level:3},{value:"Points de terminaison de l&#39;API de session",id:"session-api-endpoints",level:3},{value:"Index",id:"indexes",level:2},{value:"Relations",id:"relationships",level:2},{value:"Types de donn\xe9es",id:"data-types",level:2},{value:"Valeurs de Statut de Sauvegarde",id:"backup-status-values",level:2},{value:"Requ\xeates courantes",id:"common-queries",level:2},{value:"Obtenir la derni\xe8re sauvegarde pour un serveur",id:"get-latest-backup-for-a-server",level:3},{value:"Obtenir toutes les sauvegardes pour un serveur",id:"get-all-backups-for-a-server",level:3},{value:"Obtenir le r\xe9sum\xe9 du serveur",id:"get-server-summary",level:3},{value:"Obtenir le R\xe9sum\xe9 G\xe9n\xe9ral",id:"get-overall-summary",level:3},{value:"Nettoyage de la base de donn\xe9es",id:"database-cleanup",level:3},{value:"Mappage JSON vers base de donn\xe9es",id:"json-to-database-mapping",level:2},{value:"Mappage du corps de la requ\xeate API aux colonnes de la base de donn\xe9es",id:"api-request-body-to-database-columns-mapping",level:3}];function h(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"database-schema",children:"Sch\xe9ma de base de donn\xe9es"})}),"\n",(0,i.jsx)(s.p,{children:"Ce document d\xe9crit le sch\xe9ma de base de donn\xe9es SQLite utilis\xe9 par duplistatus pour stocker les donn\xe9es des op\xe9rations de sauvegarde."}),"\n",(0,i.jsx)(s.h2,{id:"database-location",children:"Emplacement de la base de donn\xe9es"}),"\n",(0,i.jsx)(s.p,{children:"La base de donn\xe9es est stock\xe9e dans le r\xe9pertoire des donn\xe9es d'application :"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Emplacement par d\xe9faut"})," : ",(0,i.jsx)(s.code,{children:"/app/data/backups.db"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Volume Docker"})," : ",(0,i.jsx)(s.code,{children:"duplistatus_data:/app/data"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Nom du fichier"})," : ",(0,i.jsx)(s.code,{children:"backups.db"})]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"database-migration-system",children:"Syst\xe8me de Migration de Base de Donn\xe9es"}),"\n",(0,i.jsx)(s.p,{children:"duplistatus utilise un syst\xe8me de migration automatis\xe9 pour g\xe9rer les modifications du sch\xe9ma de base de donn\xe9es entre les versions."}),"\n",(0,i.jsx)(s.h3,{id:"migration-version-history",children:"Historique des versions de migration"}),"\n",(0,i.jsx)(s.p,{children:"Les versions de migration historiques suivantes ont amen\xe9 la base de donn\xe9es \xe0 son \xe9tat actuel :"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Schema v1.0"})," (Application v0.6.x et ant\xe9rieures) : Sch\xe9ma de base de donn\xe9es initial avec tables machines et sauvegardes"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Schema v2.0"})," (Application v0.7.x) : Ajout de colonnes manquantes et table configurations"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Schema v3.0"})," (Application v0.7.x) : Renommage de la table machines en serveurs, ajout de la colonne server_url"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Schema v3.1"})," (Application v0.8.x) : Am\xe9lioration des champs de donn\xe9es de sauvegarde, ajout de la colonne server_password"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Schema v4.0"})," (Application v0.9.x / v1.0.x) : Ajout du contr\xf4le d'acc\xe8s utilisateur (tables utilisateurs, sessions, audit_log)"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["La version actuelle de l'application (v1.3.x) utilise ",(0,i.jsx)(s.strong,{children:"Schema v4.0"})," comme derni\xe8re version du sch\xe9ma de base de donn\xe9es."]}),"\n",(0,i.jsx)(s.h3,{id:"migration-process",children:"Processus de Migration"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Sauvegarde Automatique"})," : Cr\xe9e une sauvegarde avant la migration"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Mise \xe0 Jour du Sch\xe9ma"})," : Met \xe0 jour la structure de la base de donn\xe9es"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Migration des Donn\xe9es"})," : Pr\xe9serve les donn\xe9es existantes"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"V\xe9rification"})," : Confirme la migration r\xe9ussie"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"tables",children:"Tableaux"}),"\n",(0,i.jsx)(s.h3,{id:"servers-table",children:"Tableau des serveurs"}),"\n",(0,i.jsx)(s.p,{children:"Stocke les informations sur les serveurs Duplicati en cours de surveillance."}),"\n",(0,i.jsx)(s.h4,{id:"fields",children:"Champs"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Champ"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"id"})}),(0,i.jsx)(s.td,{children:"TEXT PRIMARY KEY"}),(0,i.jsx)(s.td,{children:"Identifiant unique du serveur"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"name"})}),(0,i.jsx)(s.td,{children:"TEXT NOT NULL"}),(0,i.jsx)(s.td,{children:"Nom du serveur depuis Duplicati"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"server_url"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"URL du serveur Duplicati"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"alias"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Nom convivial d\xe9fini par l'utilisateur"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"note"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Notes/Description d\xe9finies par l'utilisateur"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"server_password"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Mot de passe du serveur pour l'authentification"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"created_at"})}),(0,i.jsx)(s.td,{children:"DATETIME"}),(0,i.jsx)(s.td,{children:"Horodatage de cr\xe9ation du serveur"})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"backups-table",children:"Tableau des sauvegardes"}),"\n",(0,i.jsx)(s.p,{children:"Stocke les donn\xe9es d'op\xe9ration de sauvegarde re\xe7ues des serveurs Duplicati."}),"\n",(0,i.jsx)(s.h4,{id:"key-fields",children:"Champs cl\xe9s"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Champ"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"id"})}),(0,i.jsx)(s.td,{children:"TEXT PRIMARY KEY"}),(0,i.jsx)(s.td,{children:"Identifiant unique de sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"server_id"})}),(0,i.jsx)(s.td,{children:"TEXT NOT NULL"}),(0,i.jsx)(s.td,{children:"R\xe9f\xe9rence \xe0 la table serveurs"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"backup_name"})}),(0,i.jsx)(s.td,{children:"TEXT NOT NULL"}),(0,i.jsx)(s.td,{children:"Nom du travail de sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"backup_id"})}),(0,i.jsx)(s.td,{children:"TEXT NOT NULL"}),(0,i.jsx)(s.td,{children:"ID de sauvegarde de Duplicati"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"date"})}),(0,i.jsx)(s.td,{children:"DATETIME NOT NULL"}),(0,i.jsx)(s.td,{children:"Heure d'ex\xe9cution de la sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"status"})}),(0,i.jsx)(s.td,{children:"TEXT NOT NULL"}),(0,i.jsx)(s.td,{children:"Statut de la sauvegarde (Succ\xe8s, Avertissement, Erreur, Fatal)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"duration_seconds"})}),(0,i.jsx)(s.td,{children:"INTEGER NOT NULL"}),(0,i.jsx)(s.td,{children:"Dur\xe9e en secondes"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"size"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Taille des fichiers source"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"uploaded_size"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Taille des donn\xe9es t\xe9l\xe9vers\xe9es"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"examined_files"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Nombre de fichiers examin\xe9s"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"warnings"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Nombre d'avertissements"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"errors"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Nombre d'erreurs"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"created_at"})}),(0,i.jsx)(s.td,{children:"DATETIME"}),(0,i.jsx)(s.td,{children:"Horodatage de cr\xe9ation de l'enregistrement"})]})]})]}),"\n",(0,i.jsx)(s.h4,{id:"message-arrays-json-storage",children:"Tableaux de Messages (Stockage JSON)"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Champ"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"messages_array"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Tableau JSON de messages de journal"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"warnings_array"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Tableau JSON de messages d'avertissement"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"errors_array"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Tableau JSON de messages d'erreur"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"available_backups"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Tableau JSON de versions de sauvegarde disponibles"})]})]})]}),"\n",(0,i.jsx)(s.h4,{id:"file-operation-fields",children:"Champs d'op\xe9ration de fichier"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Champ"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"examined_files"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Fichiers examin\xe9s lors de la sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"opened_files"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Fichiers ouverts pour la sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"added_files"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Nouveaux fichiers ajout\xe9s \xe0 la sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"modified_files"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Fichiers modifi\xe9s dans la sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"deleted_files"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Fichiers supprim\xe9s de la sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"deleted_folders"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Dossiers supprim\xe9s de la sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"added_folders"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Dossiers ajout\xe9s \xe0 la sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"modified_folders"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Dossiers modifi\xe9s dans la sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"not_processed_files"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Fichiers non trait\xe9s"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"too_large_files"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Fichiers trop volumineux pour \xeatre trait\xe9s"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"files_with_error"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Fichiers avec erreurs"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"added_symlinks"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Liens symboliques ajout\xe9s"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"modified_symlinks"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Liens symboliques modifi\xe9s"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"deleted_symlinks"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Liens symboliques supprim\xe9s"})]})]})]}),"\n",(0,i.jsx)(s.h4,{id:"file-size-fields",children:"Champs de Taille des fichiers"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Field"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"size_of_examined_files"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Taille des fichiers examin\xe9s lors de la sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"size_of_opened_files"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Taille des fichiers ouverts pour la sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"size_of_added_files"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Taille des nouveaux fichiers ajout\xe9s \xe0 la sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"size_of_modified_files"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Taille des fichiers modifi\xe9s dans la sauvegarde"})]})]})]}),"\n",(0,i.jsx)(s.h4,{id:"operation-status-fields",children:"Champs de Statut d'Op\xe9ration"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Champ"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"parsed_result"})}),(0,i.jsx)(s.td,{children:"TEXT NOT NULL"}),(0,i.jsx)(s.td,{children:"R\xe9sultat de l'op\xe9ration analys\xe9"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"main_operation"})}),(0,i.jsx)(s.td,{children:"TEXT NOT NULL"}),(0,i.jsx)(s.td,{children:"Type d'op\xe9ration principal"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"interrupted"})}),(0,i.jsx)(s.td,{children:"BOOLEAN"}),(0,i.jsx)(s.td,{children:"Indique si la sauvegarde a \xe9t\xe9 interrompue"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"partial_backup"})}),(0,i.jsx)(s.td,{children:"BOOLEAN"}),(0,i.jsx)(s.td,{children:"Indique si la sauvegarde a \xe9t\xe9 partielle"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"dryrun"})}),(0,i.jsx)(s.td,{children:"BOOLEAN"}),(0,i.jsx)(s.td,{children:"Indique si la sauvegarde a \xe9t\xe9 un essai \xe0 blanc"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"version"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Version de Duplicati utilis\xe9e"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"begin_time"})}),(0,i.jsx)(s.td,{children:"DATETIME NOT NULL"}),(0,i.jsx)(s.td,{children:"Heure de d\xe9but de la sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"end_time"})}),(0,i.jsx)(s.td,{children:"DATETIME NOT NULL"}),(0,i.jsx)(s.td,{children:"Heure de fin de la sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"warnings_actual_length"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Nombre r\xe9el d'avertissements"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"errors_actual_length"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Nombre r\xe9el d'erreurs"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"messages_actual_length"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Nombre r\xe9el de messages"})]})]})]}),"\n",(0,i.jsx)(s.h4,{id:"backend-statistics-fields",children:"Champs de Statistiques Backend"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Champ"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"bytes_downloaded"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Octets t\xe9l\xe9charg\xe9s de la destination"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"known_file_size"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Taille des fichiers connue sur la destination"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"last_backup_date"})}),(0,i.jsx)(s.td,{children:"DATETIME"}),(0,i.jsx)(s.td,{children:"Date de la derni\xe8re sauvegarde sur la destination"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"backup_list_count"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Nombre de versions de sauvegarde"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"reported_quota_error"})}),(0,i.jsx)(s.td,{children:"BOOLEAN"}),(0,i.jsx)(s.td,{children:"Erreur de quota signal\xe9e"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"reported_quota_warning"})}),(0,i.jsx)(s.td,{children:"BOOLEAN"}),(0,i.jsx)(s.td,{children:"Avertissement de quota signal\xe9"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"backend_main_operation"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Op\xe9ration principale du backend"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"backend_parsed_result"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"R\xe9sultat analys\xe9 du backend"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"backend_interrupted"})}),(0,i.jsx)(s.td,{children:"BOOLEAN"}),(0,i.jsx)(s.td,{children:"Op\xe9ration du backend interrompue"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"backend_version"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Version du backend"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"backend_begin_time"})}),(0,i.jsx)(s.td,{children:"DATETIME"}),(0,i.jsx)(s.td,{children:"Heure de d\xe9but de l'op\xe9ration du backend"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"backend_duration"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Dur\xe9e de l'op\xe9ration du backend"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"backend_warnings_actual_length"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Nombre d'avertissements du backend"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"backend_errors_actual_length"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Nombre d'erreurs du backend"})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"configurations-table",children:"Tableau des configurations"}),"\n",(0,i.jsx)(s.p,{children:"Stocke les param\xe8tres de configuration de l'application."}),"\n",(0,i.jsx)(s.h4,{id:"fields",children:"Champs"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Champ"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"key"})}),(0,i.jsx)(s.td,{children:"TEXT PRIMARY KEY NOT NULL"}),(0,i.jsx)(s.td,{children:"Cl\xe9 de configuration"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"value"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Valeur de configuration (JSON)"})]})]})]}),"\n",(0,i.jsx)(s.h4,{id:"common-configuration-keys",children:"Cl\xe9s de Configuration Communes"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"email_config"}),": Param\xe8tres de notification par e-mail"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"ntfy_config"}),": Param\xe8tres de notification NTFY"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"overdue_tolerance"}),": Param\xe8tres de tol\xe9rance de sauvegarde en retard"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"notification_templates"}),": Mod\xe8les de message de notification"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"audit_retention_days"}),": P\xe9riode de r\xe9tention du journal d'audit (par d\xe9faut : 90 jours)"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"database-version-table",children:"Tableau des versions de base de donn\xe9es"}),"\n",(0,i.jsx)(s.p,{children:"Suit la version du sch\xe9ma de base de donn\xe9es \xe0 des fins de migration."}),"\n",(0,i.jsx)(s.h4,{id:"fields",children:"Champs"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Champ"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"version"})}),(0,i.jsx)(s.td,{children:"TEXT PRIMARY KEY"}),(0,i.jsx)(s.td,{children:"Version de la base de donn\xe9es"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"applied_at"})}),(0,i.jsx)(s.td,{children:"DATETIME"}),(0,i.jsx)(s.td,{children:"Quand la migration a \xe9t\xe9 appliqu\xe9e"})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"users-table",children:"Tableau Utilisateurs"}),"\n",(0,i.jsx)(s.p,{children:"Stocke les informations de compte utilisateur pour l'authentification et le contr\xf4le d'acc\xe8s."}),"\n",(0,i.jsx)(s.h4,{id:"fields",children:"Champs"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Champ"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"id"})}),(0,i.jsx)(s.td,{children:"TEXT PRIMARY KEY"}),(0,i.jsx)(s.td,{children:"Identifiant utilisateur unique"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"username"})}),(0,i.jsx)(s.td,{children:"TEXT UNIQUE NOT NULL"}),(0,i.jsx)(s.td,{children:"Nom d'utilisateur pour la connexion"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"password_hash"})}),(0,i.jsx)(s.td,{children:"TEXT NOT NULL"}),(0,i.jsx)(s.td,{children:"Mot de passe hach\xe9 avec Bcrypt"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"is_admin"})}),(0,i.jsx)(s.td,{children:"BOOLEAN NOT NULL"}),(0,i.jsx)(s.td,{children:"Si l'utilisateur a les privil\xe8ges admin"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"must_change_password"})}),(0,i.jsx)(s.td,{children:"BOOLEAN"}),(0,i.jsx)(s.td,{children:"Si le changement de mot de passe est requis"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"created_at"})}),(0,i.jsx)(s.td,{children:"DATETIME"}),(0,i.jsx)(s.td,{children:"Horodatage de cr\xe9ation du compte"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"updated_at"})}),(0,i.jsx)(s.td,{children:"DATETIME"}),(0,i.jsx)(s.td,{children:"Horodatage de derni\xe8re mise \xe0 jour"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"last_login_at"})}),(0,i.jsx)(s.td,{children:"DATETIME"}),(0,i.jsx)(s.td,{children:"Horodatage de derni\xe8re connexion r\xe9ussie"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"last_login_ip"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Adresse IP de la derni\xe8re connexion"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"failed_login_attempts"})}),(0,i.jsx)(s.td,{children:"INTEGER"}),(0,i.jsx)(s.td,{children:"Nombre de tentatives de connexion \xe9chou\xe9es"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"locked_until"})}),(0,i.jsx)(s.td,{children:"DATETIME"}),(0,i.jsx)(s.td,{children:"Expiration du verrouillage du compte (si verrouill\xe9)"})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"sessions-table",children:"Tableau Sessions"}),"\n",(0,i.jsx)(s.p,{children:"Stocke les donn\xe9es de session utilisateur pour l'authentification et la s\xe9curit\xe9."}),"\n",(0,i.jsx)(s.h4,{id:"fields",children:"Champs"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Champ"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"id"})}),(0,i.jsx)(s.td,{children:"TEXT PRIMARY KEY"}),(0,i.jsx)(s.td,{children:"Identifiant de session"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"user_id"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"R\xe9f\xe9rence \xe0 la table utilisateurs (nullable pour les sessions non authentifi\xe9es)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"created_at"})}),(0,i.jsx)(s.td,{children:"DATETIME"}),(0,i.jsx)(s.td,{children:"Horodatage de cr\xe9ation de session"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"last_accessed"})}),(0,i.jsx)(s.td,{children:"DATETIME"}),(0,i.jsx)(s.td,{children:"Horodatage du Derni\xe8re acc\xe8s"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"expires_at"})}),(0,i.jsx)(s.td,{children:"DATETIME NOT NULL"}),(0,i.jsx)(s.td,{children:"Horodatage d'expiration de session"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"ip_address"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Adresse IP d'origine de la session"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"user_agent"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Cha\xeene Agent utilisateur"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"csrf_token"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Jeton CSRF pour la session"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"csrf_expires_at"})}),(0,i.jsx)(s.td,{children:"DATETIME"}),(0,i.jsx)(s.td,{children:"Expiration du jeton CSRF"})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"audit-log-table",children:"Journal d'Audit"}),"\n",(0,i.jsx)(s.p,{children:"Stocke la piste d'audit des actions des utilisateurs et des \xe9v\xe9nements syst\xe8me."}),"\n",(0,i.jsx)(s.h4,{id:"fields",children:"Champs"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Champ"}),(0,i.jsx)(s.th,{children:"Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"id"})}),(0,i.jsx)(s.td,{children:"INTEGER PRIMARY KEY AUTOINCREMENT"}),(0,i.jsx)(s.td,{children:"Identifiant unique de l'entr\xe9e du journal d'audit"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"timestamp"})}),(0,i.jsx)(s.td,{children:"DATETIME"}),(0,i.jsx)(s.td,{children:"Horodatage de l'\xe9v\xe9nement"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"user_id"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"R\xe9f\xe9rence \xe0 la table Utilisateurs (nullable)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"username"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Nom d'utilisateur au moment de l'action"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"action"})}),(0,i.jsx)(s.td,{children:"TEXT NOT NULL"}),(0,i.jsx)(s.td,{children:"Action effectu\xe9e"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"category"})}),(0,i.jsx)(s.td,{children:"TEXT NOT NULL"}),(0,i.jsx)(s.td,{children:"Cat\xe9gorie de l'action (par ex. \xab authentication \xbb, \xab Param\xe8tres \xbb, \xab sauvegarde \xbb)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"target_type"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Type de cible (par ex. \xab Serveur \xbb, \xab sauvegarde \xbb, \xab Utilisateur \xbb)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"target_id"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Identifiant de la cible"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"details"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"D\xe9tails suppl\xe9mentaires (JSON)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"ip_address"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Adresse IP du demandeur"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"user_agent"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Cha\xeene Agent utilisateur"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"status"})}),(0,i.jsx)(s.td,{children:"TEXT NOT NULL"}),(0,i.jsx)(s.td,{children:"Statut de l'action (\xab Succ\xe8s \xbb, \xab \xc9chec \xbb, \xab Erreur \xbb)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"error_message"})}),(0,i.jsx)(s.td,{children:"TEXT"}),(0,i.jsx)(s.td,{children:"Message d'erreur si l'action a \xe9chou\xe9"})]})]})]}),"\n",(0,i.jsx)(s.h2,{id:"session-management",children:"Gestion des sessions"}),"\n",(0,i.jsx)(s.h3,{id:"database-backed-session-storage",children:"Stockage de session sauvegard\xe9 par base de donn\xe9es"}),"\n",(0,i.jsx)(s.p,{children:"Les sessions sont stock\xe9es dans la base de donn\xe9es avec secours en m\xe9moire :"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Stockage Principal"})," : Table de sessions sauvegard\xe9e en base de donn\xe9es"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Secours"})," : Stockage en m\xe9moire (support h\xe9rit\xe9 ou cas d'erreur)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"ID de Session"})," : Cha\xeene al\xe9atoire cryptographiquement s\xe9curis\xe9e"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Expiration"})," : D\xe9lai d\xe9pass\xe9 de session configurable"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Protection CSRF"})," : Protection contre les attaques par falsification de requ\xeate intersite"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Nettoyage Automatique"})," : Les sessions expir\xe9es sont automatiquement supprim\xe9es"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"session-api-endpoints",children:"Points de terminaison de l'API de session"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"POST /api/session"})," : Cr\xe9er une nouvelle session"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"GET /api/session"})," : Valider une session existante"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"DELETE /api/session"})," : D\xe9truire la session"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"GET /api/csrf"})," : Obtenir le jeton CSRF"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"indexes",children:"Index"}),"\n",(0,i.jsx)(s.p,{children:"La base de donn\xe9es comprend plusieurs index pour des performances de requ\xeate optimales :"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Cl\xe9s primaires"})," : Tous les tableaux ont des index de cl\xe9 primaire"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Cl\xe9s \xe9trang\xe8res"})," : R\xe9f\xe9rences de Serveur dans la table sauvegardes, r\xe9f\xe9rences d'Utilisateur dans sessions et audit_log"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Optimisation des requ\xeates"})," : Index sur les champs fr\xe9quemment interrog\xe9s"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Index de Date"})," : Index sur les champs de date pour les requ\xeates bas\xe9es sur le temps"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Index d'Utilisateur"})," : Index de nom d'utilisateur pour les recherches rapides d'utilisateurs"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Index de Session"})," : Index d'expiration et user_id pour la gestion des sessions"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Index d'audit"})," : Index d'horodatage, user_id, action, cat\xe9gorie et statut pour les requ\xeates d'audit"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"relationships",children:"Relations"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Serveurs \u2192 Sauvegardes"})," : Relation un-\xe0-plusieurs"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Utilisateurs \u2192 Sessions"})," : Relation un-\xe0-plusieurs (les sessions peuvent exister sans utilisateurs)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Utilisateurs \u2192 Journal d'Audit"})," : Relation un-\xe0-plusieurs (les entr\xe9es d'audit peuvent exister sans utilisateurs)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Sauvegardes \u2192 Messages"})," : Tableaux JSON int\xe9gr\xe9s"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Configurations"})," : Stockage cl\xe9-valeur"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"data-types",children:"Types de donn\xe9es"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"TEXT"})," : Donn\xe9es de cha\xeene de caract\xe8res, tableaux JSON"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"INTEGER"})," : Donn\xe9es num\xe9riques, nombre de fichiers, tailles"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"REAL"})," : Nombres \xe0 virgule flottante, dur\xe9es"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"DATETIME"})," : Donn\xe9es d'horodatage"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"BOOLEAN"})," : Valeurs vrai/faux"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"backup-status-values",children:"Valeurs de Statut de Sauvegarde"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Succ\xe8s"})," : Sauvegarde termin\xe9e avec succ\xe8s"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Avertissement"})," : Sauvegarde termin\xe9e avec avertissements"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Erreur"})," : Sauvegarde termin\xe9e avec erreurs"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Fatal"})," : Sauvegarde \xe9chou\xe9e fatalement"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"common-queries",children:"Requ\xeates courantes"}),"\n",(0,i.jsx)(s.h3,{id:"get-latest-backup-for-a-server",children:"Obtenir la derni\xe8re sauvegarde pour un serveur"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"SELECT * FROM backups \nWHERE server_id = ? \nORDER BY date DESC \nLIMIT 1;\n"})}),"\n",(0,i.jsx)(s.h3,{id:"get-all-backups-for-a-server",children:"Obtenir toutes les sauvegardes pour un serveur"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"SELECT * FROM backups \nWHERE server_id = ? \nORDER BY date DESC;\n"})}),"\n",(0,i.jsx)(s.h3,{id:"get-server-summary",children:"Obtenir le r\xe9sum\xe9 du serveur"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"SELECT \n  s.name,\n  s.alias,\n  COUNT(b.id) as backup_count,\n  MAX(b.date) as last_backup,\n  b.status as last_status\nFROM servers s\nLEFT JOIN backups b ON s.id = b.server_id\nGROUP BY s.id;\n"})}),"\n",(0,i.jsx)(s.h3,{id:"get-overall-summary",children:"Obtenir le R\xe9sum\xe9 G\xe9n\xe9ral"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"SELECT \n  COUNT(DISTINCT s.id) as total_servers,\n  COUNT(b.id) as total_backups_runs,\n  COUNT(DISTINCT s.id || ':' || b.backup_name) as total_backups,\n  COALESCE(SUM(b.uploaded_size), 0) as total_uploaded_size,\n  (\n    SELECT COALESCE(SUM(b2.known_file_size), 0)\n    FROM backups b2\n    INNER JOIN (\n      SELECT server_id, MAX(date) as max_date\n      FROM backups\n      GROUP BY server_id\n    ) latest ON b2.server_id = latest.server_id AND b2.date = latest.max_date\n  ) as total_storage_used,\n  (\n    SELECT COALESCE(SUM(b2.size_of_examined_files), 0)\n    FROM backups b2\n    INNER JOIN (\n      SELECT server_id, MAX(date) as max_date\n      FROM backups\n      GROUP BY server_id\n    ) latest ON b2.server_id = latest.server_id AND b2.date = latest.max_date\n  ) as total_backuped_size\nFROM servers s\nLEFT JOIN backups b ON b.server_id = s.id;\n"})}),"\n",(0,i.jsx)(s.h3,{id:"database-cleanup",children:"Nettoyage de la base de donn\xe9es"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"-- Delete old backups (older than 30 days)\nDELETE FROM backups \nWHERE date < datetime('now', '-30 days');\n\n-- Delete servers with no backups\nDELETE FROM servers \nWHERE id NOT IN (SELECT DISTINCT server_id FROM backups);\n"})}),"\n",(0,i.jsx)(s.h2,{id:"json-to-database-mapping",children:"Mappage JSON vers base de donn\xe9es"}),"\n",(0,i.jsx)(s.h3,{id:"api-request-body-to-database-columns-mapping",children:"Mappage du corps de la requ\xeate API aux colonnes de la base de donn\xe9es"}),"\n",(0,i.jsx)(s.p,{children:"Quand Duplicati envoie les donn\xe9es de sauvegarde via HTTP POST, la structure JSON est mapp\xe9e aux colonnes de la base de donn\xe9es :"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "Data": {\n    "ExaminedFiles": 15399,           // \u2192 examined_files\n    "OpenedFiles": 1861,              // \u2192 opened_files\n    "AddedFiles": 1861,               // \u2192 added_files\n    "SizeOfExaminedFiles": 11086692615, // \u2192 size_of_examined_files\n    "SizeOfOpenedFiles": 13450481,    // \u2192 size_of_opened_files\n    "SizeOfAddedFiles": 13450481,     // \u2192 size_of_added_files\n    "SizeOfModifiedFiles": 0,         // \u2192 size_of_modified_files\n    "ParsedResult": "Success",        // \u2192 status\n    "BeginTime": "2025-04-21T23:45:46.9712217Z", // \u2192 begin_time and date\n    "Duration": "00:00:51.3856057",   // \u2192 duration_seconds (calculated)\n    "WarningsActualLength": 0,        // \u2192 warnings_actual_length\n    "ErrorsActualLength": 0           // \u2192 errors_actual_length\n  },\n  "Extra": {\n    "machine-id": "66f5ffc7ff474a73a3c9cba4ac7bfb65", // \u2192 server_id\n    "machine-name": "WSJ-SER5",       // \u2192 server name\n    "backup-name": "WSJ-SER5 Local files", // \u2192 backup_name\n    "backup-id": "DB-2"               // \u2192 backup_id\n  }\n}\n'})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Note"})," : Le champ ",(0,i.jsx)(s.code,{children:"size"})," dans la table des sauvegardes stocke ",(0,i.jsx)(s.code,{children:"SizeOfExaminedFiles"})," et ",(0,i.jsx)(s.code,{children:"uploaded_size"})," stocke la taille r\xe9elle t\xe9l\xe9vers\xe9e/transf\xe9r\xe9e \xe0 partir de l'op\xe9ration de sauvegarde."]})]})}function o(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},73230(e,s,d){d.d(s,{R:()=>l,x:()=>t});var n=d(71299);const i={},r=n.createContext(i);function l(e){const s=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);