"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[1640],{31069(e,d,s){s.r(d),s.d(d,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"development/database","title":"Esquema de Banco de Dados","description":"database-schema}","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/development/database.md","sourceDirName":"development","slug":"/development/database","permalink":"/duplistatus/pt-BR/development/database","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"translation_last_updated":"2026-02-16T00:13:39.738Z","source_file_mtime":"2026-02-06T21:19:17.347Z","source_file_hash":"21d21cb01acea43b","translation_language":"pt-BR","source_file_path":"development/database.md"},"sidebar":"mainSidebar","previous":{"title":"Comandos mais utilizados","permalink":"/duplistatus/pt-BR/development/devel"},"next":{"title":"Ferramentas de Documenta\xe7\xe3o","permalink":"/duplistatus/pt-BR/development/documentation-tools"}}');var r=s(36259),n=s(73230);const a={translation_last_updated:"2026-02-16T00:13:39.738Z",source_file_mtime:"2026-02-06T21:19:17.347Z",source_file_hash:"21d21cb01acea43b",translation_language:"pt-BR",source_file_path:"development/database.md"},l="Esquema de Banco de Dados {#database-schema}",c={},o=[{value:"Localiza\xe7\xe3o do Banco de Dados",id:"database-location",level:2},{value:"Sistema de Migra\xe7\xe3o de Banco de Dados",id:"database-migration-system",level:2},{value:"Hist\xf3rico de Vers\xf5es de Migra\xe7\xe3o",id:"migration-version-history",level:3},{value:"Processo de Migra\xe7\xe3o",id:"migration-process",level:3},{value:"Tabelas",id:"tables",level:2},{value:"Tabela de Servidores",id:"servers-table",level:3},{value:"Campos",id:"fields",level:4},{value:"Tabela de Backups",id:"backups-table",level:3},{value:"Campos-Chave",id:"key-fields",level:4},{value:"Matrizes de Mensagens (Armazenamento JSON)",id:"message-arrays-json-storage",level:4},{value:"Campos de Opera\xe7\xe3o de Arquivo",id:"file-operation-fields",level:4},{value:"Campos de Tamanho dos arquivos",id:"file-size-fields",level:4},{value:"Campos de Status da Opera\xe7\xe3o",id:"operation-status-fields",level:4},{value:"Campos de Estat\xedsticas do Backend",id:"backend-statistics-fields",level:4},{value:"Tabela de Configura\xe7\xf5es",id:"configurations-table",level:3},{value:"Campos",id:"fields",level:4},{value:"Chaves de Configura\xe7\xe3o Comuns",id:"common-configuration-keys",level:4},{value:"Tabela de Vers\xe3o do Banco de Dados",id:"database-version-table",level:3},{value:"Campos",id:"fields",level:4},{value:"Tabela de Usu\xe1rios",id:"users-table",level:3},{value:"Campos",id:"fields",level:4},{value:"Tabela de Sess\xf5es",id:"sessions-table",level:3},{value:"Campos",id:"fields",level:4},{value:"Log de Auditoria",id:"audit-log-table",level:3},{value:"Campos",id:"fields",level:4},{value:"Gerenciamento de Sess\xe3o",id:"session-management",level:2},{value:"Armazenamento de Sess\xe3o com Suporte a Banco de Dados",id:"database-backed-session-storage",level:3},{value:"Endpoints da API de Sess\xe3o",id:"session-api-endpoints",level:3},{value:"\xcdndices",id:"indexes",level:2},{value:"Relacionamentos",id:"relationships",level:2},{value:"Tipos de Dados",id:"data-types",level:2},{value:"Valores de Status de Backup",id:"backup-status-values",level:2},{value:"Consultas Comuns",id:"common-queries",level:2},{value:"Obter \xdaltimo Backup para um Servidor",id:"get-latest-backup-for-a-server",level:3},{value:"Obter Todos os Backups de um Servidor",id:"get-all-backups-for-a-server",level:3},{value:"Obter Resumo do Servidor",id:"get-server-summary",level:3},{value:"Obter Resumo Geral",id:"get-overall-summary",level:3},{value:"Limpeza de Banco de Dados",id:"database-cleanup",level:3},{value:"Mapeamento de JSON para Banco de Dados",id:"json-to-database-mapping",level:2},{value:"Mapeamento do Corpo da Requisi\xe7\xe3o da API para Colunas do Banco de Dados",id:"api-request-body-to-database-columns-mapping",level:3}];function t(e){const d={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.header,{children:(0,r.jsx)(d.h1,{id:"database-schema",children:"Esquema de Banco de Dados"})}),"\n",(0,r.jsx)(d.p,{children:"Este documento descreve o esquema de banco de dados SQLite utilizado pelo duplistatus para armazenar dados de opera\xe7\xf5es de backup."}),"\n",(0,r.jsx)(d.h2,{id:"database-location",children:"Localiza\xe7\xe3o do Banco de Dados"}),"\n",(0,r.jsx)(d.p,{children:"O banco de dados \xe9 armazenado no diret\xf3rio de dados da aplica\xe7\xe3o:"}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Localiza\xe7\xe3o Padr\xe3o"}),": ",(0,r.jsx)(d.code,{children:"/app/data/backups.db"})]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Volume Docker"}),": ",(0,r.jsx)(d.code,{children:"duplistatus_data:/app/data"})]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Nome do Arquivo"}),": ",(0,r.jsx)(d.code,{children:"backups.db"})]}),"\n"]}),"\n",(0,r.jsx)(d.h2,{id:"database-migration-system",children:"Sistema de Migra\xe7\xe3o de Banco de Dados"}),"\n",(0,r.jsx)(d.p,{children:"duplistatus usa um sistema de migra\xe7\xe3o automatizado para lidar com altera\xe7\xf5es de esquema de banco de dados entre vers\xf5es."}),"\n",(0,r.jsx)(d.h3,{id:"migration-version-history",children:"Hist\xf3rico de Vers\xf5es de Migra\xe7\xe3o"}),"\n",(0,r.jsx)(d.p,{children:"As seguintes s\xe3o vers\xf5es hist\xf3ricas de migra\xe7\xe3o que trouxeram o banco de dados ao seu estado atual:"}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Schema v1.0"})," (Aplica\xe7\xe3o v0.6.x e anteriores): Schema de banco de dados inicial com tabelas de m\xe1quinas e backups"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Schema v2.0"})," (Aplica\xe7\xe3o v0.7.x): Adicionadas colunas ausentes e tabela de configura\xe7\xf5es"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Schema v3.0"})," (Aplica\xe7\xe3o v0.7.x): Tabela de m\xe1quinas renomeada para servidores, adicionada coluna server_url"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Schema v3.1"})," (Aplica\xe7\xe3o v0.8.x): Campos de dados de backup aprimorados, adicionada coluna server_password"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Schema v4.0"})," (Aplica\xe7\xe3o v0.9.x / v1.0.x): Adicionado Controle de Acesso de Usu\xe1rios (tabelas de usu\xe1rios, sess\xf5es e audit_log)"]}),"\n"]}),"\n",(0,r.jsxs)(d.p,{children:["Vers\xe3o atual da aplica\xe7\xe3o (v1.3.x) usa ",(0,r.jsx)(d.strong,{children:"Schema v4.0"})," como a vers\xe3o mais recente do esquema de banco de dados."]}),"\n",(0,r.jsx)(d.h3,{id:"migration-process",children:"Processo de Migra\xe7\xe3o"}),"\n",(0,r.jsxs)(d.ol,{children:["\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Backup Autom\xe1tico"}),": Cria backup antes da migra\xe7\xe3o"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Atualiza\xe7\xe3o de Schema"}),": Atualiza a estrutura do banco de dados"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Migra\xe7\xe3o de Dados"}),": Preserva dados existentes"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Verifica\xe7\xe3o"}),": Confirma migra\xe7\xe3o bem-sucedida"]}),"\n"]}),"\n",(0,r.jsx)(d.h2,{id:"tables",children:"Tabelas"}),"\n",(0,r.jsx)(d.h3,{id:"servers-table",children:"Tabela de Servidores"}),"\n",(0,r.jsx)(d.p,{children:"Armazena informa\xe7\xf5es sobre servidores Duplicati sendo monitorados."}),"\n",(0,r.jsx)(d.h4,{id:"fields",children:"Campos"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Campo"}),(0,r.jsx)(d.th,{children:"Tipo"}),(0,r.jsx)(d.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"id"})}),(0,r.jsx)(d.td,{children:"TEXT PRIMARY KEY"}),(0,r.jsx)(d.td,{children:"Identificador \xfanico do servidor"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"name"})}),(0,r.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,r.jsx)(d.td,{children:"Nome do servidor do Duplicati"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"server_url"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"URL do servidor Duplicati"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"alias"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Nome amig\xe1vel definido pelo usu\xe1rio"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"note"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Notas/descri\xe7\xe3o definidas pelo usu\xe1rio"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"server_password"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Senha do servidor para autentica\xe7\xe3o"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"created_at"})}),(0,r.jsx)(d.td,{children:"DATETIME"}),(0,r.jsx)(d.td,{children:"Data e hora de cria\xe7\xe3o do servidor"})]})]})]}),"\n",(0,r.jsx)(d.h3,{id:"backups-table",children:"Tabela de Backups"}),"\n",(0,r.jsx)(d.p,{children:"Armazena dados de opera\xe7\xe3o de backup recebidos de servidores Duplicati."}),"\n",(0,r.jsx)(d.h4,{id:"key-fields",children:"Campos-Chave"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Campo"}),(0,r.jsx)(d.th,{children:"Tipo"}),(0,r.jsx)(d.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"id"})}),(0,r.jsx)(d.td,{children:"TEXT PRIMARY KEY"}),(0,r.jsx)(d.td,{children:"Identificador \xfanico do backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"server_id"})}),(0,r.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,r.jsx)(d.td,{children:"Refer\xeancia \xe0 tabela de servidores"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"backup_name"})}),(0,r.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,r.jsx)(d.td,{children:"Nome do trabalho de backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"backup_id"})}),(0,r.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,r.jsx)(d.td,{children:"ID do backup do Duplicati"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"date"})}),(0,r.jsx)(d.td,{children:"DATETIME NOT NULL"}),(0,r.jsx)(d.td,{children:"Hora de execu\xe7\xe3o do backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"status"})}),(0,r.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,r.jsx)(d.td,{children:"Status do backup (Sucesso, Aviso, Erro, Fatal)"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"duration_seconds"})}),(0,r.jsx)(d.td,{children:"INTEGER NOT NULL"}),(0,r.jsx)(d.td,{children:"Dura\xe7\xe3o em segundos"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"size"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Tamanho dos arquivos de origem"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"uploaded_size"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Tamanho dos dados enviados"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"examined_files"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"N\xfamero de arquivos examinados"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"warnings"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"N\xfamero de avisos"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"errors"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"N\xfamero de erros"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"created_at"})}),(0,r.jsx)(d.td,{children:"DATETIME"}),(0,r.jsx)(d.td,{children:"Data e hora de cria\xe7\xe3o do registro"})]})]})]}),"\n",(0,r.jsx)(d.h4,{id:"message-arrays-json-storage",children:"Matrizes de Mensagens (Armazenamento JSON)"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Campo"}),(0,r.jsx)(d.th,{children:"Tipo"}),(0,r.jsx)(d.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"messages_array"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Array JSON de mensagens de log"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"warnings_array"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Array JSON de mensagens de aviso"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"errors_array"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Array JSON de mensagens de erro"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"available_backups"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Array JSON de vers\xf5es de backup dispon\xedveis"})]})]})]}),"\n",(0,r.jsx)(d.h4,{id:"file-operation-fields",children:"Campos de Opera\xe7\xe3o de Arquivo"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Campo"}),(0,r.jsx)(d.th,{children:"Tipo"}),(0,r.jsx)(d.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"examined_files"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Arquivos examinados durante backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"opened_files"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Arquivos abertos para backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"added_files"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Novos arquivos adicionados ao backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"modified_files"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Arquivos modificados no backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"deleted_files"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Arquivos deletados do backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"deleted_folders"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Pastas deletadas do backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"added_folders"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Pastas adicionadas ao backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"modified_folders"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Pastas modificadas no backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"not_processed_files"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Arquivos n\xe3o processados"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"too_large_files"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Arquivos muito grandes para processar"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"files_with_error"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Arquivos com erros"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"added_symlinks"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Links simb\xf3licos adicionados"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"modified_symlinks"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Links simb\xf3licos modificados"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"deleted_symlinks"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Links simb\xf3licos deletados"})]})]})]}),"\n",(0,r.jsx)(d.h4,{id:"file-size-fields",children:"Campos de Tamanho dos arquivos"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Campo"}),(0,r.jsx)(d.th,{children:"Tipo"}),(0,r.jsx)(d.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"size_of_examined_files"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Tamanho de arquivos examinados durante o backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"size_of_opened_files"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Tamanho de arquivos abertos para backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"size_of_added_files"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Tamanho de novos arquivos adicionados ao backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"size_of_modified_files"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Tamanho de arquivos modificados no backup"})]})]})]}),"\n",(0,r.jsx)(d.h4,{id:"operation-status-fields",children:"Campos de Status da Opera\xe7\xe3o"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Campo"}),(0,r.jsx)(d.th,{children:"Tipo"}),(0,r.jsx)(d.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"parsed_result"})}),(0,r.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,r.jsx)(d.td,{children:"Resultado da opera\xe7\xe3o analisado"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"main_operation"})}),(0,r.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,r.jsx)(d.td,{children:"Tipo de opera\xe7\xe3o principal"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"interrupted"})}),(0,r.jsx)(d.td,{children:"BOOLEAN"}),(0,r.jsx)(d.td,{children:"Se o backup foi interrompido"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"partial_backup"})}),(0,r.jsx)(d.td,{children:"BOOLEAN"}),(0,r.jsx)(d.td,{children:"Se o backup foi parcial"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"dryrun"})}),(0,r.jsx)(d.td,{children:"BOOLEAN"}),(0,r.jsx)(d.td,{children:"Se o backup foi uma execu\xe7\xe3o de teste"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"version"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Vers\xe3o do Duplicati utilizada"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"begin_time"})}),(0,r.jsx)(d.td,{children:"DATETIME NOT NULL"}),(0,r.jsx)(d.td,{children:"Hora de in\xedcio do backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"end_time"})}),(0,r.jsx)(d.td,{children:"DATETIME NOT NULL"}),(0,r.jsx)(d.td,{children:"Hora de t\xe9rmino do backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"warnings_actual_length"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Contagem real de avisos"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"errors_actual_length"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Contagem real de erros"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"messages_actual_length"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Contagem real de mensagens"})]})]})]}),"\n",(0,r.jsx)(d.h4,{id:"backend-statistics-fields",children:"Campos de Estat\xedsticas do Backend"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Campo"}),(0,r.jsx)(d.th,{children:"Tipo"}),(0,r.jsx)(d.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"bytes_downloaded"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Bytes baixados do destino"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"known_file_size"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Tamanho dos arquivos conhecido no destino"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"last_backup_date"})}),(0,r.jsx)(d.td,{children:"DATETIME"}),(0,r.jsx)(d.td,{children:"Data do \xfaltimo backup no destino"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"backup_list_count"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"N\xfamero de vers\xf5es de backup"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"reported_quota_error"})}),(0,r.jsx)(d.td,{children:"BOOLEAN"}),(0,r.jsx)(d.td,{children:"Erro de cota reportado"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"reported_quota_warning"})}),(0,r.jsx)(d.td,{children:"BOOLEAN"}),(0,r.jsx)(d.td,{children:"Aviso de cota reportado"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"backend_main_operation"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Opera\xe7\xe3o principal do backend"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"backend_parsed_result"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Resultado analisado do backend"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"backend_interrupted"})}),(0,r.jsx)(d.td,{children:"BOOLEAN"}),(0,r.jsx)(d.td,{children:"Opera\xe7\xe3o do backend interrompida"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"backend_version"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Vers\xe3o do backend"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"backend_begin_time"})}),(0,r.jsx)(d.td,{children:"DATETIME"}),(0,r.jsx)(d.td,{children:"Hora de in\xedcio da opera\xe7\xe3o do backend"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"backend_duration"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Dura\xe7\xe3o da opera\xe7\xe3o do backend"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"backend_warnings_actual_length"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Contagem de avisos do backend"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"backend_errors_actual_length"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Contagem de erros do backend"})]})]})]}),"\n",(0,r.jsx)(d.h3,{id:"configurations-table",children:"Tabela de Configura\xe7\xf5es"}),"\n",(0,r.jsx)(d.p,{children:"Armazena as configura\xe7\xf5es de aplica\xe7\xe3o."}),"\n",(0,r.jsx)(d.h4,{id:"fields",children:"Campos"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Campo"}),(0,r.jsx)(d.th,{children:"Tipo"}),(0,r.jsx)(d.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"key"})}),(0,r.jsx)(d.td,{children:"TEXT PRIMARY KEY NOT NULL"}),(0,r.jsx)(d.td,{children:"Chave de configura\xe7\xe3o"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"value"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Valor de configura\xe7\xe3o (JSON)"})]})]})]}),"\n",(0,r.jsx)(d.h4,{id:"common-configuration-keys",children:"Chaves de Configura\xe7\xe3o Comuns"}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.code,{children:"email_config"}),": Configura\xe7\xf5es de notifica\xe7\xe3o por e-mail"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.code,{children:"ntfy_config"}),": Configura\xe7\xf5es de notifica\xe7\xe3o NTFY"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.code,{children:"overdue_tolerance"}),": Configura\xe7\xf5es de toler\xe2ncia de backup atrasado"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.code,{children:"notification_templates"}),": Modelos de mensagens de notifica\xe7\xe3o"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.code,{children:"audit_retention_days"}),": Per\xedodo de reten\xe7\xe3o de log de auditoria (padr\xe3o: 90 dias)"]}),"\n"]}),"\n",(0,r.jsx)(d.h3,{id:"database-version-table",children:"Tabela de Vers\xe3o do Banco de Dados"}),"\n",(0,r.jsx)(d.p,{children:"Rastreia a vers\xe3o do esquema do banco de dados para fins de migra\xe7\xe3o."}),"\n",(0,r.jsx)(d.h4,{id:"fields",children:"Campos"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Campo"}),(0,r.jsx)(d.th,{children:"Tipo"}),(0,r.jsx)(d.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"version"})}),(0,r.jsx)(d.td,{children:"TEXT PRIMARY KEY"}),(0,r.jsx)(d.td,{children:"Vers\xe3o do banco de dados"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"applied_at"})}),(0,r.jsx)(d.td,{children:"DATETIME"}),(0,r.jsx)(d.td,{children:"Quando a migra\xe7\xe3o foi aplicada"})]})]})]}),"\n",(0,r.jsx)(d.h3,{id:"users-table",children:"Tabela de Usu\xe1rios"}),"\n",(0,r.jsx)(d.p,{children:"Armazena informa\xe7\xf5es de conta de usu\xe1rio para autentica\xe7\xe3o e controle de acesso."}),"\n",(0,r.jsx)(d.h4,{id:"fields",children:"Campos"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Campo"}),(0,r.jsx)(d.th,{children:"Tipo"}),(0,r.jsx)(d.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"id"})}),(0,r.jsx)(d.td,{children:"TEXT PRIMARY KEY"}),(0,r.jsx)(d.td,{children:"Identificador \xfanico do usu\xe1rio"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"username"})}),(0,r.jsx)(d.td,{children:"TEXT UNIQUE NOT NULL"}),(0,r.jsx)(d.td,{children:"Nome de usu\xe1rio para login"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"password_hash"})}),(0,r.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,r.jsx)(d.td,{children:"Senha com hash Bcrypt"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"is_admin"})}),(0,r.jsx)(d.td,{children:"BOOLEAN NOT NULL"}),(0,r.jsx)(d.td,{children:"Se o usu\xe1rio possui privil\xe9gios de admin"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"must_change_password"})}),(0,r.jsx)(d.td,{children:"BOOLEAN"}),(0,r.jsx)(d.td,{children:"Se a altera\xe7\xe3o de senha \xe9 obrigat\xf3ria"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"created_at"})}),(0,r.jsx)(d.td,{children:"DATETIME"}),(0,r.jsx)(d.td,{children:"Data e hora de cria\xe7\xe3o da conta"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"updated_at"})}),(0,r.jsx)(d.td,{children:"DATETIME"}),(0,r.jsx)(d.td,{children:"Data e hora da \xfaltima atualiza\xe7\xe3o"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"last_login_at"})}),(0,r.jsx)(d.td,{children:"DATETIME"}),(0,r.jsx)(d.td,{children:"Data e hora do \xfaltimo login bem-sucedido"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"last_login_ip"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Endere\xe7o IP do \xfaltimo login"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"failed_login_attempts"})}),(0,r.jsx)(d.td,{children:"INTEGER"}),(0,r.jsx)(d.td,{children:"Contagem de tentativas de login com falha"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"locked_until"})}),(0,r.jsx)(d.td,{children:"DATETIME"}),(0,r.jsx)(d.td,{children:"Expira\xe7\xe3o do bloqueio da conta (se bloqueada)"})]})]})]}),"\n",(0,r.jsx)(d.h3,{id:"sessions-table",children:"Tabela de Sess\xf5es"}),"\n",(0,r.jsx)(d.p,{children:"Armazena dados de sess\xe3o do usu\xe1rio para autentica\xe7\xe3o e seguran\xe7a."}),"\n",(0,r.jsx)(d.h4,{id:"fields",children:"Campos"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Campo"}),(0,r.jsx)(d.th,{children:"Tipo"}),(0,r.jsx)(d.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"id"})}),(0,r.jsx)(d.td,{children:"TEXT PRIMARY KEY"}),(0,r.jsx)(d.td,{children:"Identificador de sess\xe3o"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"user_id"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Refer\xeancia \xe0 tabela de usu\xe1rios (anul\xe1vel para sess\xf5es n\xe3o autenticadas)"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"created_at"})}),(0,r.jsx)(d.td,{children:"DATETIME"}),(0,r.jsx)(d.td,{children:"Data e hora de cria\xe7\xe3o da sess\xe3o"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"last_accessed"})}),(0,r.jsx)(d.td,{children:"DATETIME"}),(0,r.jsx)(d.td,{children:"Data e hora do \xfaltimo acesso"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"expires_at"})}),(0,r.jsx)(d.td,{children:"DATETIME NOT NULL"}),(0,r.jsx)(d.td,{children:"Data e hora de expira\xe7\xe3o da sess\xe3o"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"ip_address"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Endere\xe7o IP de origem da sess\xe3o"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"user_agent"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"String de agente do usu\xe1rio"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"csrf_token"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Token CSRF para a sess\xe3o"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"csrf_expires_at"})}),(0,r.jsx)(d.td,{children:"DATETIME"}),(0,r.jsx)(d.td,{children:"Expira\xe7\xe3o do token CSRF"})]})]})]}),"\n",(0,r.jsx)(d.h3,{id:"audit-log-table",children:"Log de Auditoria"}),"\n",(0,r.jsx)(d.p,{children:"Armazena a trilha de auditoria de a\xe7\xf5es do usu\xe1rio e eventos do sistema."}),"\n",(0,r.jsx)(d.h4,{id:"fields",children:"Campos"}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Campo"}),(0,r.jsx)(d.th,{children:"Tipo"}),(0,r.jsx)(d.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"id"})}),(0,r.jsx)(d.td,{children:"INTEGER PRIMARY KEY AUTOINCREMENT"}),(0,r.jsx)(d.td,{children:"Identificador \xfanico da entrada do log de auditoria"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"timestamp"})}),(0,r.jsx)(d.td,{children:"DATETIME"}),(0,r.jsx)(d.td,{children:"Data e hora do evento"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"user_id"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Refer\xeancia \xe0 tabela de usu\xe1rios (anul\xe1vel)"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"username"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Nome de usu\xe1rio no momento da a\xe7\xe3o"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"action"})}),(0,r.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,r.jsx)(d.td,{children:"A\xe7\xe3o executada"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"category"})}),(0,r.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,r.jsx)(d.td,{children:"Categoria da a\xe7\xe3o (ex: 'authentication', 'settings', 'backup')"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"target_type"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Tipo de destino (ex: 'server', 'backup', 'user')"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"target_id"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Identificador do destino"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"details"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Detalhes adicionais (JSON)"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"ip_address"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Endere\xe7o IP do solicitante"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"user_agent"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"String do agente do usu\xe1rio"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"status"})}),(0,r.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,r.jsx)(d.td,{children:"Status da a\xe7\xe3o ('success', 'failure', 'error')"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"error_message"})}),(0,r.jsx)(d.td,{children:"TEXT"}),(0,r.jsx)(d.td,{children:"Mensagem de erro se a a\xe7\xe3o falhar"})]})]})]}),"\n",(0,r.jsx)(d.h2,{id:"session-management",children:"Gerenciamento de Sess\xe3o"}),"\n",(0,r.jsx)(d.h3,{id:"database-backed-session-storage",children:"Armazenamento de Sess\xe3o com Suporte a Banco de Dados"}),"\n",(0,r.jsx)(d.p,{children:"As sess\xf5es s\xe3o armazenadas no banco de dados com fallback em mem\xf3ria:"}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Armazenamento Prim\xe1rio"}),": Tabela de sess\xf5es com suporte de banco de dados"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Fallback"}),": Armazenamento em mem\xf3ria (suporte legado ou casos de erro)"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"ID de Sess\xe3o"}),": String aleat\xf3ria criptograficamente segura"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Expira\xe7\xe3o"}),": Tempo limite excedido de sess\xe3o configur\xe1vel"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Prote\xe7\xe3o CSRF"}),": Prote\xe7\xe3o contra falsifica\xe7\xe3o de solicita\xe7\xe3o entre sites"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Limpeza Autom\xe1tica"}),": Sess\xf5es expiradas s\xe3o removidas automaticamente"]}),"\n"]}),"\n",(0,r.jsx)(d.h3,{id:"session-api-endpoints",children:"Endpoints da API de Sess\xe3o"}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.code,{children:"POST /api/session"}),": Criar nova sess\xe3o"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.code,{children:"GET /api/session"}),": Validar sess\xe3o existente"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.code,{children:"DELETE /api/session"}),": Destruir sess\xe3o"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.code,{children:"GET /api/csrf"}),": Obter token CSRF"]}),"\n"]}),"\n",(0,r.jsx)(d.h2,{id:"indexes",children:"\xcdndices"}),"\n",(0,r.jsx)(d.p,{children:"O banco de dados inclui v\xe1rios \xedndices para desempenho ideal de consultas:"}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Chaves Prim\xe1rias"}),": Todos as tabelas possuem \xedndices de chave prim\xe1ria"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Chaves Estrangeiras"}),": Refer\xeancias de Servidor na tabela backups, refer\xeancias de Usu\xe1rio em sessions e audit_log"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Otimiza\xe7\xe3o de Consultas"}),": \xcdndices em campos consultados frequentemente"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"\xcdndices de Data"}),": \xcdndices em campos de data para consultas baseadas em tempo"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"\xcdndices de Usu\xe1rio"}),": \xcdndice de nome de usu\xe1rio para buscas r\xe1pidas de usu\xe1rios"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"\xcdndices de Sess\xe3o"}),": \xcdndices de expira\xe7\xe3o e user_id para gerenciamento de sess\xf5es"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"\xcdndices de Auditoria"}),": \xcdndices de data e hora, user_id, a\xe7\xe3o, categoria e status para consultas de auditoria"]}),"\n"]}),"\n",(0,r.jsx)(d.h2,{id:"relationships",children:"Relacionamentos"}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Servidores \u2192 Backups"}),": Relacionamento um-para-muitos"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Usu\xe1rios \u2192 Sess\xf5es"}),": Relacionamento um-para-muitos (sess\xf5es podem existir sem usu\xe1rios)"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Usu\xe1rios \u2192 Log de Auditoria"}),": Relacionamento um-para-muitos (entradas de auditoria podem existir sem usu\xe1rios)"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Backups \u2192 Mensagens"}),": Arrays JSON incorporados"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Configura\xe7\xf5es"}),": Armazenamento de chave-valor"]}),"\n"]}),"\n",(0,r.jsx)(d.h2,{id:"data-types",children:"Tipos de Dados"}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"TEXTO"}),": Dados de string, arrays JSON"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"INTEIRO"}),": Dados num\xe9ricos, contagem de arquivos, tamanhos"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"REAL"}),": N\xfameros de ponto flutuante, dura\xe7\xf5es"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"DATA E HORA"}),": Dados de data e hora"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"BOOLEANO"}),": Valores verdadeiro/falso"]}),"\n"]}),"\n",(0,r.jsx)(d.h2,{id:"backup-status-values",children:"Valores de Status de Backup"}),"\n",(0,r.jsxs)(d.ul,{children:["\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Sucesso"}),": Backup conclu\xeddo com sucesso"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Aviso"}),": Backup conclu\xeddo com avisos"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Erro"}),": Backup conclu\xeddo com erros"]}),"\n",(0,r.jsxs)(d.li,{children:[(0,r.jsx)(d.strong,{children:"Fatal"}),": Backup falhou fatalmente"]}),"\n"]}),"\n",(0,r.jsx)(d.h2,{id:"common-queries",children:"Consultas Comuns"}),"\n",(0,r.jsx)(d.h3,{id:"get-latest-backup-for-a-server",children:"Obter \xdaltimo Backup para um Servidor"}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-sql",children:"SELECT * FROM backups \nWHERE server_id = ? \nORDER BY date DESC \nLIMIT 1;\n"})}),"\n",(0,r.jsx)(d.h3,{id:"get-all-backups-for-a-server",children:"Obter Todos os Backups de um Servidor"}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-sql",children:"SELECT * FROM backups \nWHERE server_id = ? \nORDER BY date DESC;\n"})}),"\n",(0,r.jsx)(d.h3,{id:"get-server-summary",children:"Obter Resumo do Servidor"}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-sql",children:"SELECT \n  s.name,\n  s.alias,\n  COUNT(b.id) as backup_count,\n  MAX(b.date) as last_backup,\n  b.status as last_status\nFROM servers s\nLEFT JOIN backups b ON s.id = b.server_id\nGROUP BY s.id;\n"})}),"\n",(0,r.jsx)(d.h3,{id:"get-overall-summary",children:"Obter Resumo Geral"}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-sql",children:"SELECT \n  COUNT(DISTINCT s.id) as total_servers,\n  COUNT(b.id) as total_backups_runs,\n  COUNT(DISTINCT s.id || ':' || b.backup_name) as total_backups,\n  COALESCE(SUM(b.uploaded_size), 0) as total_uploaded_size,\n  (\n    SELECT COALESCE(SUM(b2.known_file_size), 0)\n    FROM backups b2\n    INNER JOIN (\n      SELECT server_id, MAX(date) as max_date\n      FROM backups\n      GROUP BY server_id\n    ) latest ON b2.server_id = latest.server_id AND b2.date = latest.max_date\n  ) as total_storage_used,\n  (\n    SELECT COALESCE(SUM(b2.size_of_examined_files), 0)\n    FROM backups b2\n    INNER JOIN (\n      SELECT server_id, MAX(date) as max_date\n      FROM backups\n      GROUP BY server_id\n    ) latest ON b2.server_id = latest.server_id AND b2.date = latest.max_date\n  ) as total_backuped_size\nFROM servers s\nLEFT JOIN backups b ON b.server_id = s.id;\n"})}),"\n",(0,r.jsx)(d.h3,{id:"database-cleanup",children:"Limpeza de Banco de Dados"}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-sql",children:"-- Delete old backups (older than 30 days)\nDELETE FROM backups \nWHERE date < datetime('now', '-30 days');\n\n-- Delete servers with no backups\nDELETE FROM servers \nWHERE id NOT IN (SELECT DISTINCT server_id FROM backups);\n"})}),"\n",(0,r.jsx)(d.h2,{id:"json-to-database-mapping",children:"Mapeamento de JSON para Banco de Dados"}),"\n",(0,r.jsx)(d.h3,{id:"api-request-body-to-database-columns-mapping",children:"Mapeamento do Corpo da Requisi\xe7\xe3o da API para Colunas do Banco de Dados"}),"\n",(0,r.jsx)(d.p,{children:"Quando o Duplicati envia dados de backup via HTTP POST, a estrutura JSON \xe9 mapeada para colunas do banco de dados:"}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-json",children:'{\n  "Data": {\n    "ExaminedFiles": 15399,           // \u2192 examined_files\n    "OpenedFiles": 1861,              // \u2192 opened_files\n    "AddedFiles": 1861,               // \u2192 added_files\n    "SizeOfExaminedFiles": 11086692615, // \u2192 size_of_examined_files\n    "SizeOfOpenedFiles": 13450481,    // \u2192 size_of_opened_files\n    "SizeOfAddedFiles": 13450481,     // \u2192 size_of_added_files\n    "SizeOfModifiedFiles": 0,         // \u2192 size_of_modified_files\n    "ParsedResult": "Success",        // \u2192 status\n    "BeginTime": "2025-04-21T23:45:46.9712217Z", // \u2192 begin_time and date\n    "Duration": "00:00:51.3856057",   // \u2192 duration_seconds (calculated)\n    "WarningsActualLength": 0,        // \u2192 warnings_actual_length\n    "ErrorsActualLength": 0           // \u2192 errors_actual_length\n  },\n  "Extra": {\n    "machine-id": "66f5ffc7ff474a73a3c9cba4ac7bfb65", // \u2192 server_id\n    "machine-name": "WSJ-SER5",       // \u2192 server name\n    "backup-name": "WSJ-SER5 Local files", // \u2192 backup_name\n    "backup-id": "DB-2"               // \u2192 backup_id\n  }\n}\n'})}),"\n",(0,r.jsxs)(d.p,{children:[(0,r.jsx)(d.strong,{children:"Nota"}),": O campo ",(0,r.jsx)(d.code,{children:"size"})," na tabela de backups armazena ",(0,r.jsx)(d.code,{children:"SizeOfExaminedFiles"})," e ",(0,r.jsx)(d.code,{children:"uploaded_size"})," armazena o tamanho real enviado/transferido da opera\xe7\xe3o de backup."]})]})}function h(e={}){const{wrapper:d}={...(0,n.R)(),...e.components};return d?(0,r.jsx)(d,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},73230(e,d,s){s.d(d,{R:()=>a,x:()=>l});var i=s(71299);const r={},n=i.createContext(r);function a(e){const d=i.useContext(n);return i.useMemo(function(){return"function"==typeof e?e(d):{...d,...e}},[d,e])}function l(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(n.Provider,{value:d},e.children)}}}]);