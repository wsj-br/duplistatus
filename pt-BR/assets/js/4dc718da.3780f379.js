"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[3279],{75072(e,n,s){s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"development/podman-testing","title":"Testes do Podman","description":"podman-testing}","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/development/podman-testing.md","sourceDirName":"development","slug":"/development/podman-testing","permalink":"/duplistatus/pt-BR/development/podman-testing","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"translation_last_updated":"2026-02-16T02:21:42.876Z","source_file_mtime":"2026-02-16T00:30:39.430Z","source_file_hash":"841b30d8ee97e362","translation_language":"pt-BR","source_file_path":"development/podman-testing.md"},"sidebar":"mainSidebar","previous":{"title":"Fluxo de Trabalho de Manuten\xe7\xe3o de Tradu\xe7\xe3o","permalink":"/duplistatus/pt-BR/development/translation-workflow"},"next":{"title":"Gerenciamento de Lan\xe7amentos","permalink":"/duplistatus/pt-BR/development/release-management"}}');var i=s(36259),d=s(73230);const r={translation_last_updated:"2026-02-16T02:21:42.876Z",source_file_mtime:"2026-02-16T00:30:39.430Z",source_file_hash:"841b30d8ee97e362",translation_language:"pt-BR",source_file_path:"development/podman-testing.md"},a="Testes do Podman {#podman-testing}",t={},l=[{value:"Configura\xe7\xe3o Inicial e Gerenciamento",id:"initial-setup-and-management",level:2},{value:"Configura\xe7\xe3o de DNS",id:"dns-configuration",level:2},{value:"Monitoramento e Verifica\xe7\xf5es de Sa\xfade",id:"monitoring-and-health-checks",level:2},{value:"Comandos de Depura\xe7\xe3o",id:"debugging-commands",level:2},{value:"Fluxo de Uso",id:"usage-workflow",level:2},{value:"Servidor de Desenvolvimento",id:"development-server",level:3},{value:"Servidor Podman",id:"podman-server",level:3},{value:"Notas Importantes",id:"important-notes",level:2},{value:"Rede de Pod do Podman",id:"podman-pod-networking",level:3},{value:"Modo sem Root vs Modo Root",id:"rootless-vs-root-mode",level:3},{value:"Configura\xe7\xe3o de Ambiente",id:"environment-configuration",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"podman-testing",children:"Testes do Podman"})}),"\n",(0,i.jsxs)(n.p,{children:["Copiar e executar os scripts localizados em ",(0,i.jsx)(n.code,{children:"scripts/podman_testing"})," no servidor de teste Podman."]}),"\n",(0,i.jsx)(n.h2,{id:"initial-setup-and-management",children:"Configura\xe7\xe3o Inicial e Gerenciamento"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"copy.docker.duplistatus.local"}),": Copia a imagem Docker do daemon Docker local para Podman (para testes locais)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"copy.docker.duplistatus.remote"}),": Copia a imagem Docker de um servidor de desenvolvimento remoto para Podman (requer acesso SSH).","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Crie a imagem no servidor de desenvolvimento usando: ",(0,i.jsx)(n.code,{children:"docker build . -t wsj-br/duplistatus:devel"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"start.duplistatus"}),": Inicia o container em modo rootless."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pod.testing"}),": Testa o container dentro de um pod Podman (com privil\xe9gios de root)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"stop.duplistatus"}),": Para o pod e remove o container."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"clean.duplistatus"}),": Para containers, remove pods e limpa imagens antigas."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"dns-configuration",children:"Configura\xe7\xe3o de DNS"}),"\n",(0,i.jsx)(n.p,{children:"Os scripts detectam e configuram automaticamente as configura\xe7\xf5es de DNS do sistema host:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Detec\xe7\xe3o Autom\xe1tica"}),": Usa ",(0,i.jsx)(n.code,{children:"resolvectl status"})," (systemd-resolved) para extrair servidores DNS e dom\xednios de pesquisa"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Suporte de Fallback"}),": Retorna \xe0 an\xe1lise de ",(0,i.jsx)(n.code,{children:"/etc/resolv.conf"})," em sistemas n\xe3o-systemd"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Filtragem Inteligente"}),": Filtra automaticamente endere\xe7os localhost e nameservers IPv6"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Funciona com"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Tailscale MagicDNS (100.100.100.100)"}),"\n",(0,i.jsx)(n.li,{children:"Servidores DNS corporativos"}),"\n",(0,i.jsx)(n.li,{children:"Configura\xe7\xf5es de rede padr\xe3o"}),"\n",(0,i.jsx)(n.li,{children:"Configura\xe7\xf5es DNS Personalizadas"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Nenhuma configura\xe7\xe3o manual de DNS \xe9 necess\xe1ria - os scripts lidam com isso automaticamente!"}),"\n",(0,i.jsx)(n.h2,{id:"monitoring-and-health-checks",children:"Monitoramento e Verifica\xe7\xf5es de Sa\xfade"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"check.duplistatus"}),": Verifica os logs, conectividade e sa\xfade da aplica\xe7\xe3o."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"debugging-commands",children:"Comandos de Depura\xe7\xe3o"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"logs.duplistatus"}),": Mostra os logs do pod."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"exec.shell.duplistatus"}),": Abre um shell no container."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"restart.duplistatus"}),": Para o pod, remove o container, copia a imagem, cria o container e inicia o pod."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"usage-workflow",children:"Fluxo de Uso"}),"\n",(0,i.jsx)(n.h3,{id:"development-server",children:"Servidor de Desenvolvimento"}),"\n",(0,i.jsx)(n.p,{children:"Criar a imagem do Docker no servidor de desenvolvimento:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker build . -t wsj-br/duplistatus:devel\n"})}),"\n",(0,i.jsx)(n.h3,{id:"podman-server",children:"Servidor Podman"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Transferir a imagem Docker:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"./copy.docker.duplistatus.local"})," se Docker e Podman estiverem na mesma m\xe1quina"]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"./copy.docker.duplistatus.remote"})," se copiar de um servidor de desenvolvimento remoto (requer arquivo ",(0,i.jsx)(n.code,{children:".env"})," com ",(0,i.jsx)(n.code,{children:"REMOTE_USER"})," e ",(0,i.jsx)(n.code,{children:"REMOTE_HOST"}),")"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Inicie o container com ",(0,i.jsx)(n.code,{children:"./start.duplistatus"})," (independente, sem privil\xe9gios de root)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ou use ",(0,i.jsx)(n.code,{children:"./pod.testing"})," para testar em modo pod (com root)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Monitore com ",(0,i.jsx)(n.code,{children:"./check.duplistatus"})," e ",(0,i.jsx)(n.code,{children:"./logs.duplistatus"})]}),"\n",(0,i.jsxs)(n.li,{children:["Pare com ",(0,i.jsx)(n.code,{children:"./stop.duplistatus"})," quando terminar"]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"./restart.duplistatus"})," para um ciclo de reinicializa\xe7\xe3o completo (parar, copiar imagem, iniciar)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Nota"}),": Este script atualmente referencia ",(0,i.jsx)(n.code,{children:"copy.docker.duplistatus"})," que deve ser substitu\xeddo por uma das variantes ",(0,i.jsx)(n.code,{children:".local"})," ou ",(0,i.jsx)(n.code,{children:".remote"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"./clean.duplistatus"})," para remover containers, pods e imagens antigas"]}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"testing-the-application",children:"Testando a Aplica\xe7\xe3o"}),"\n",(0,i.jsxs)(n.p,{children:["Se voc\xea estiver executando o servidor Podman na mesma m\xe1quina, use ",(0,i.jsx)(n.code,{children:"http://localhost:9666"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Se voc\xea estiver em outro servidor, obtenha a URL com:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"echo \"http://$(hostname -I | awk '{print $1}'):9666\"\n"})}),"\n",(0,i.jsx)(n.h2,{id:"important-notes",children:"Notas Importantes"}),"\n",(0,i.jsx)(n.h3,{id:"podman-pod-networking",children:"Rede de Pod do Podman"}),"\n",(0,i.jsx)(n.p,{children:"Quando executado em pods Podman, a aplica\xe7\xe3o requer:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Configura\xe7\xe3o expl\xedcita de DNS (manipulada automaticamente pelo script ",(0,i.jsx)(n.code,{children:"pod.testing"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Vincula\xe7\xe3o de porta a todas as interfaces (",(0,i.jsx)(n.code,{children:"0.0.0.0:9666"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Os scripts lidam com esses requisitos automaticamente - nenhuma configura\xe7\xe3o manual necess\xe1ria."}),"\n",(0,i.jsx)(n.h3,{id:"rootless-vs-root-mode",children:"Modo sem Root vs Modo Root"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Modo aut\xf4nomo"})," (",(0,i.jsx)(n.code,{children:"start.duplistatus"}),"): Executa sem privil\xe9gios com ",(0,i.jsx)(n.code,{children:"--userns=keep-id"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Modo pod"})," (",(0,i.jsx)(n.code,{children:"pod.testing"}),"): Executa como root dentro do pod para fins de teste"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Ambos os modos funcionam corretamente com a detec\xe7\xe3o autom\xe1tica de DNS."}),"\n",(0,i.jsx)(n.h2,{id:"environment-configuration",children:"Configura\xe7\xe3o de Ambiente"}),"\n",(0,i.jsxs)(n.p,{children:["Tanto ",(0,i.jsx)(n.code,{children:"copy.docker.duplistatus.local"})," quanto ",(0,i.jsx)(n.code,{children:"copy.docker.duplistatus.remote"})," exigem um arquivo ",(0,i.jsx)(n.code,{children:".env"})," no diret\xf3rio ",(0,i.jsx)(n.code,{children:"scripts/podman_testing"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Para c\xf3pia local"})," (",(0,i.jsx)(n.code,{children:"copy.docker.duplistatus.local"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"IMAGE=wsj-br/duplistatus:devel\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Para c\xf3pia remota"})," (",(0,i.jsx)(n.code,{children:"copy.docker.duplistatus.remote"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"IMAGE=wsj-br/duplistatus:devel\nREMOTE_USER=your_username\nREMOTE_HOST=your_hostname\n"})}),"\n",(0,i.jsxs)(n.p,{children:["O script ",(0,i.jsx)(n.code,{children:"start.duplistatus"})," requer um arquivo ",(0,i.jsx)(n.code,{children:".env"})," com pelo menos a vari\xe1vel ",(0,i.jsx)(n.code,{children:"IMAGE"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"IMAGE=wsj-br/duplistatus:devel\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Nota"}),": A mensagem de erro do script menciona ",(0,i.jsx)(n.code,{children:"REMOTE_USER"})," e ",(0,i.jsx)(n.code,{children:"REMOTE_HOST"}),", mas estes n\xe3o s\xe3o realmente utilizados por ",(0,i.jsx)(n.code,{children:"start.duplistatus"}),"\u2014apenas ",(0,i.jsx)(n.code,{children:"IMAGE"})," \xe9 obrigat\xf3rio."]})]})}function u(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},73230(e,n,s){s.d(n,{R:()=>r,x:()=>a});var o=s(71299);const i={},d=o.createContext(i);function r(e){const n=o.useContext(d);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(d.Provider,{value:n},e.children)}}}]);