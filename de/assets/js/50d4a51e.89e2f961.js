"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[3444],{84048(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"api-reference/external-apis","title":"External APIs","description":"external-apis}","source":"@site/i18n/de/docusaurus-plugin-content-docs/current/api-reference/external-apis.md","sourceDirName":"api-reference","slug":"/api-reference/external-apis","permalink":"/duplistatus/de/api-reference/external-apis","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"mainSidebar","previous":{"title":"Cron Service Management","permalink":"/duplistatus/de/api-reference/cron-service-apis"},"next":{"title":"Monitoring & Health","permalink":"/duplistatus/de/api-reference/monitoring-apis"}}');var i=s(36259),a=s(73230);const c={},l="External APIs {#external-apis}",d={},t=[{value:"Get Overall Summary - <code>/api/summary</code>",id:"get-overall-summary-apisummary",level:2},{value:"Get Latest Backup - <code>/api/lastbackup/:serverId</code>",id:"get-latest-backup-apilastbackupserverid",level:2},{value:"Get Latest Backups - <code>/api/lastbackups/:serverId</code>",id:"get-latest-backups-apilastbackupsserverid",level:2},{value:"Upload Backup Data - <code>/api/upload</code>",id:"upload-backup-data-apiupload",level:2}];function o(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"external-apis",children:"External APIs"})}),"\n",(0,i.jsxs)(n.p,{children:["These endpoints are designed for use by other applications and integrations, for instance ",(0,i.jsx)(n.a,{href:"/duplistatus/de/user-guide/homepage-integration",children:"Homepage"}),"."]}),"\n",(0,i.jsxs)(n.h2,{id:"get-overall-summary-apisummary",children:["Get Overall Summary - ",(0,i.jsx)(n.code,{children:"/api/summary"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"/api/summary"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Method"}),": GET"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Retrieves a summary of all backup operations across all servers."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "totalServers": 3,\n  "totalBackupsRuns": 9,\n  "totalBackups": 9,\n  "totalUploadedSize": 2397229507,\n  "totalStorageUsed": 43346796938,\n  "totalBackupSize": 126089687807,\n  "overdueBackupsCount": 2,\n  "secondsSinceLastBackup": 7200\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Responses"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"500"}),": Server error fetching summary data"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Notes"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["In version 0.5.x, the field ",(0,i.jsx)(n.code,{children:"totalBackupedSize"})," was replaced by ",(0,i.jsx)(n.code,{children:"totalBackupSize"})]}),"\n",(0,i.jsxs)(n.li,{children:["In version 0.7.x, the field ",(0,i.jsx)(n.code,{children:"totalMachines"})," was replaced by ",(0,i.jsx)(n.code,{children:"totalServers"})]}),"\n",(0,i.jsxs)(n.li,{children:["The field ",(0,i.jsx)(n.code,{children:"overdueBackupsCount"})," shows the number of currently overdue backups"]}),"\n",(0,i.jsxs)(n.li,{children:["The field ",(0,i.jsx)(n.code,{children:"secondsSinceLastBackup"})," shows the time in seconds since the last backup across all servers"]}),"\n",(0,i.jsx)(n.li,{children:"Returns fallback response with zeros if data fetching fails"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": For internal dashboard use, consider using ",(0,i.jsx)(n.code,{children:"/api/dashboard"})," which includes this data plus additional information"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"get-latest-backup-apilastbackupserverid",children:["Get Latest Backup - ",(0,i.jsx)(n.code,{children:"/api/lastbackup/:serverId"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"/api/lastbackup/:serverId"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Method"}),": GET"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Retrieves the latest backup information for a specific server."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"serverId"}),": the server identifier (ID or name)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"The server identifier has to be URL Encoded."})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "server": {\n    "id": "unique-server-id",\n    "name": "Server Name",\n    "backup_name": "Backup Name",\n    "backup_id": "backup-id",\n    "created_at": "2024-03-20T10:00:00Z"\n  },\n  "latest_backup": {\n    "id": "backup-id",\n    "server_id": "unique-server-id",\n    "name": "Backup Name",\n    "date": "2024-03-20T10:00:00Z",\n    "status": "Success",\n    "warnings": 0,\n    "errors": 0,\n    "messages": 150,\n    "fileCount": 249426,\n    "fileSize": 113395849938,\n    "uploadedSize": 331318892,\n    "duration": "00:38:31",\n    "duration_seconds": 2311.6018052,\n    "durationInMinutes": 38.52669675333333,\n    "knownFileSize": 27203688543,\n    "backup_list_count": 10,\n    "messages_array": ["message1", "message2"],\n    "warnings_array": ["warning1"],\n    "errors_array": [],\n    "available_backups": ["v1", "v2", "v3"]\n  },\n  "status": 200\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Responses"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"404"}),": Server not found"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"500"}),": Internal server error"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Notes"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["In version 0.7.x, the response object key changed from ",(0,i.jsx)(n.code,{children:"machine"})," to ",(0,i.jsx)(n.code,{children:"server"})]}),"\n",(0,i.jsx)(n.li,{children:"Server identifier can be either ID or name"}),"\n",(0,i.jsx)(n.li,{children:"Returns null for latest_backup if no backups exist"}),"\n",(0,i.jsx)(n.li,{children:"Includes cache control headers to prevent caching"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"get-latest-backups-apilastbackupsserverid",children:["Get Latest Backups - ",(0,i.jsx)(n.code,{children:"/api/lastbackups/:serverId"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"/api/lastbackups/:serverId"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Method"}),": GET"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Retrieves the latest backup information for all configured backups (e.g. 'Files', 'Databases') on a specific server."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parameters"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"serverId"}),": the server identifier (ID or name)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"The server identifier has to be URL Encoded."})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "server": {\n    "id": "unique-server-id",\n    "name": "Server Name",\n    "backup_name": "Default Backup",\n    "backup_id": "backup-id",\n    "created_at": "2024-03-20T10:00:00Z"\n  },\n  "latest_backups": [\n    {\n      "id": "backup1",\n      "server_id": "unique-server-id",\n      "name": "Files",\n      "date": "2024-03-20T10:00:00Z",\n      "status": "Success",\n      "warnings": 0,\n      "errors": 0,\n      "messages": 150,\n      "fileCount": 249426,\n      "fileSize": 113395849938,\n      "uploadedSize": 331318892,\n      "duration": "00:38:31",\n      "duration_seconds": 2311.6018052,\n      "durationInMinutes": 38.52669675333333,\n      "knownFileSize": 27203688543,\n      "backup_list_count": 10,\n      "messages_array": "[\\"message1\\", \\"message2\\"]",\n      "warnings_array": "[\\"warning1\\"]",\n      "errors_array": "[]",\n      "available_backups": ["v1", "v2", "v3"]\n    },\n    {\n      "id": "backup2",\n      "server_id": "unique-server-id",\n      "name": "Databases",\n      "date": "2024-03-20T11:00:00Z",\n      "status": "Success",\n      "warnings": 1,\n      "errors": 0,\n      "messages": 75,\n      "fileCount": 125000,\n      "fileSize": 56789012345,\n      "uploadedSize": 123456789,\n      "duration": "00:25:15",\n      "duration_seconds": 1515.1234567,\n      "durationInMinutes": 25.25205761166667,\n      "knownFileSize": 12345678901,\n      "backup_list_count": 5,\n      "messages_array": ["message1"],\n      "warnings_array": ["warning1"],\n      "errors_array": [],\n      "available_backups": ["v1", "v2"]\n    }\n  ],\n  "backup_jobs_count": 2,\n  "backup_names": ["Files", "Databases"],\n  "status": 200\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Responses"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"404"}),": Server not found"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"500"}),": Internal server error"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Notes"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["In version 0.7.x, the response object key changed from ",(0,i.jsx)(n.code,{children:"machine"})," to ",(0,i.jsx)(n.code,{children:"server"}),", and the field ",(0,i.jsx)(n.code,{children:"backup_types_count"})," was renamed to ",(0,i.jsx)(n.code,{children:"backup_jobs_count"})]}),"\n",(0,i.jsx)(n.li,{children:"Server identifier can be either ID or name"}),"\n",(0,i.jsx)(n.li,{children:"Returns latest backup for each backup job (backup_name) that the server has"}),"\n",(0,i.jsxs)(n.li,{children:["Unlike ",(0,i.jsx)(n.code,{children:"/api/lastbackup/:serverId"})," which returns only the single most recent backup of the server (independ of backup job)"]}),"\n",(0,i.jsx)(n.li,{children:"Includes cache control headers to prevent caching"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"upload-backup-data-apiupload",children:["Upload Backup Data - ",(0,i.jsx)(n.code,{children:"/api/upload"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Endpoint"}),": ",(0,i.jsx)(n.code,{children:"/api/upload"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Method"}),": POST"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Uploads backup operation data for a server. Supports duplicate backup run detection and sends notifications."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Request Body"}),": JSON sent by Duplicati with the following options:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"--send-http-url=http://my.local.server:9666/api/upload\n--send-http-result-output-format=Json\n--send-http-log-level=Information\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Response"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "success": true\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Error Responses"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"400"}),": Missing required fields in Extra or Data sections, or invalid MainOperation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"409"}),": Duplicate backup data (ignored)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"500"}),": Server error processing backup data"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Notes"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Only processes backup operations (MainOperation must be "Backup")'}),"\n",(0,i.jsx)(n.li,{children:"Validates required fields in Extra section: machine-id, machine-name, backup-name, backup-id"}),"\n",(0,i.jsx)(n.li,{children:"Validates required fields in Data section: ParsedResult, BeginTime, Duration"}),"\n",(0,i.jsx)(n.li,{children:"Automatically detects duplicate backup runs and returns 409 status"}),"\n",(0,i.jsx)(n.li,{children:"Sends notifications after successful backup insertion (if configured)"}),"\n",(0,i.jsxs)(n.li,{children:["Logs request data to a file in the ",(0,i.jsx)(n.code,{children:"data"})," directory in the root of the project in development mode for debugging"]}),"\n",(0,i.jsx)(n.li,{children:"Uses transaction for data consistency"}),"\n"]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},73230(e,n,s){s.d(n,{R:()=>c,x:()=>l});var r=s(71299);const i={},a=r.createContext(i);function c(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);