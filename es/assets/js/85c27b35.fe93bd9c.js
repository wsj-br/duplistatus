"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[4714],{21306(e,d,s){s.r(d),s.d(d,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"development/database","title":"Esquema de Base de Datos","description":"database-schema}","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/development/database.md","sourceDirName":"development","slug":"/development/database","permalink":"/duplistatus/es/development/database","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"translation_last_updated":"2026-03-01T00:45:12.638Z","source_file_mtime":"2026-02-16T00:30:39.430Z","source_file_hash":"21d21cb01acea43b","translation_language":"es","source_file_path":"development/database.md"},"sidebar":"mainSidebar","previous":{"title":"Comandos m\xe1s utilizados","permalink":"/duplistatus/es/development/devel"},"next":{"title":"Herramientas de Documentaci\xf3n","permalink":"/duplistatus/es/development/documentation-tools"}}');var n=s(36259),r=s(73230);const c={translation_last_updated:"2026-03-01T00:45:12.638Z",source_file_mtime:"2026-02-16T00:30:39.430Z",source_file_hash:"21d21cb01acea43b",translation_language:"es",source_file_path:"development/database.md"},l="Esquema de Base de Datos {#database-schema}",a={},t=[{value:"Ubicaci\xf3n de la Base de Datos",id:"database-location",level:2},{value:"Sistema de Migraci\xf3n de Base de Datos",id:"database-migration-system",level:2},{value:"Historial de Versiones de Migraci\xf3n",id:"migration-version-history",level:3},{value:"Proceso de Migraci\xf3n",id:"migration-process",level:3},{value:"Tablas",id:"tables",level:2},{value:"Tabla de Servidores",id:"servers-table",level:3},{value:"Campos",id:"fields",level:4},{value:"Tabla de Backups",id:"backups-table",level:3},{value:"Campos Clave",id:"key-fields",level:4},{value:"Matrices de Mensajes (Almacenamiento JSON)",id:"message-arrays-json-storage",level:4},{value:"Campos de Operaci\xf3n de Archivos",id:"file-operation-fields",level:4},{value:"Campos de Tama\xf1o de archivos",id:"file-size-fields",level:4},{value:"Campos de Estado de Operaci\xf3n",id:"operation-status-fields",level:4},{value:"Campos de Estad\xedsticas del Backend",id:"backend-statistics-fields",level:4},{value:"Tabla de Configuraciones",id:"configurations-table",level:3},{value:"Campos",id:"fields",level:4},{value:"Claves de Configuraci\xf3n Comunes",id:"common-configuration-keys",level:4},{value:"Tabla de Versi\xf3n de Base de Datos",id:"database-version-table",level:3},{value:"Campos",id:"fields",level:4},{value:"Tabla de Usuarios",id:"users-table",level:3},{value:"Campos",id:"fields",level:4},{value:"Tabla de Sesiones",id:"sessions-table",level:3},{value:"Campos",id:"fields",level:4},{value:"Log de Auditor\xeda",id:"audit-log-table",level:3},{value:"Campos",id:"fields",level:4},{value:"Gesti\xf3n de Sesiones",id:"session-management",level:2},{value:"Almacenamiento de Sesiones Respaldado por Base de Datos",id:"database-backed-session-storage",level:3},{value:"Puntos finales de la API de sesi\xf3n",id:"session-api-endpoints",level:3},{value:"\xcdndices",id:"indexes",level:2},{value:"Relaciones",id:"relationships",level:2},{value:"Tipos de Datos",id:"data-types",level:2},{value:"Estados de Backup",id:"backup-status-values",level:2},{value:"Consultas Comunes",id:"common-queries",level:2},{value:"Obtener el \xdaltimo Backup para un Servidor",id:"get-latest-backup-for-a-server",level:3},{value:"Obtener Todos los Backups para un Servidor",id:"get-all-backups-for-a-server",level:3},{value:"Obtener Resumen del Servidor",id:"get-server-summary",level:3},{value:"Obtener Resumen General",id:"get-overall-summary",level:3},{value:"Limpieza de Base de Datos",id:"database-cleanup",level:3},{value:"Asignaci\xf3n de JSON a Base de Datos",id:"json-to-database-mapping",level:2},{value:"Asignaci\xf3n de Cuerpo de Solicitud de API a Columnas de Base de Datos",id:"api-request-body-to-database-columns-mapping",level:3}];function o(e){const d={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.header,{children:(0,n.jsx)(d.h1,{id:"database-schema",children:"Esquema de Base de Datos"})}),"\n",(0,n.jsx)(d.p,{children:"Este documento describe el esquema de base de datos SQLite utilizado por duplistatus para almacenar datos de operaciones de backup."}),"\n",(0,n.jsx)(d.h2,{id:"database-location",children:"Ubicaci\xf3n de la Base de Datos"}),"\n",(0,n.jsx)(d.p,{children:"La base de datos se almacena en el directorio de datos de la aplicaci\xf3n:"}),"\n",(0,n.jsxs)(d.ul,{children:["\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Ubicaci\xf3n por defecto"}),": ",(0,n.jsx)(d.code,{children:"/app/data/backups.db"})]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Volumen Docker"}),": ",(0,n.jsx)(d.code,{children:"duplistatus_data:/app/data"})]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Nombre de archivo"}),": ",(0,n.jsx)(d.code,{children:"backups.db"})]}),"\n"]}),"\n",(0,n.jsx)(d.h2,{id:"database-migration-system",children:"Sistema de Migraci\xf3n de Base de Datos"}),"\n",(0,n.jsx)(d.p,{children:"duplistatus utiliza un sistema de migraci\xf3n automatizado para gestionar cambios en el esquema de la base de datos entre versiones."}),"\n",(0,n.jsx)(d.h3,{id:"migration-version-history",children:"Historial de Versiones de Migraci\xf3n"}),"\n",(0,n.jsx)(d.p,{children:"Las siguientes son versiones hist\xf3ricas de migraci\xf3n que llevaron la base de datos a su estado actual:"}),"\n",(0,n.jsxs)(d.ul,{children:["\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Schema v1.0"})," (Aplicaci\xf3n v0.6.x y anteriores): Esquema de base de datos inicial con tablas de m\xe1quinas y backups"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Schema v2.0"})," (Aplicaci\xf3n v0.7.x): Se a\xf1adieron columnas faltantes y tabla de configuraciones"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Schema v3.0"})," (Aplicaci\xf3n v0.7.x): Se renombr\xf3 la tabla de m\xe1quinas a servidores, se a\xf1adi\xf3 columna server_url"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Schema v3.1"})," (Aplicaci\xf3n v0.8.x): Se mejoraron los campos de datos de backup, se a\xf1adi\xf3 columna server_password"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Schema v4.0"})," (Aplicaci\xf3n v0.9.x / v1.0.x): Se a\xf1adi\xf3 Control de Acceso de Usuarios (tablas users, sessions, audit_log)"]}),"\n"]}),"\n",(0,n.jsxs)(d.p,{children:["La versi\xf3n actual de la aplicaci\xf3n (v1.3.x) utiliza ",(0,n.jsx)(d.strong,{children:"Schema v4.0"})," como la \xfaltima versi\xf3n del esquema de base de datos."]}),"\n",(0,n.jsx)(d.h3,{id:"migration-process",children:"Proceso de Migraci\xf3n"}),"\n",(0,n.jsxs)(d.ol,{children:["\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Backup Autom\xe1tico"}),": Crea un backup antes de la migraci\xf3n"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Actualizaci\xf3n de Esquema"}),": Actualiza la estructura de la base de datos"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Migraci\xf3n de Datos"}),": Preserva los datos existentes"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Verificaci\xf3n"}),": Confirma la migraci\xf3n exitosa"]}),"\n"]}),"\n",(0,n.jsx)(d.h2,{id:"tables",children:"Tablas"}),"\n",(0,n.jsx)(d.h3,{id:"servers-table",children:"Tabla de Servidores"}),"\n",(0,n.jsx)(d.p,{children:"Almacena informaci\xf3n sobre los servidores Duplicati que se est\xe1n monitoreando."}),"\n",(0,n.jsx)(d.h4,{id:"fields",children:"Campos"}),"\n",(0,n.jsxs)(d.table,{children:[(0,n.jsx)(d.thead,{children:(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.th,{children:"Campo"}),(0,n.jsx)(d.th,{children:"Tipo"}),(0,n.jsx)(d.th,{children:"Descripci\xf3n"})]})}),(0,n.jsxs)(d.tbody,{children:[(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"id"})}),(0,n.jsx)(d.td,{children:"TEXT PRIMARY KEY"}),(0,n.jsx)(d.td,{children:"Identificador \xfanico del servidor"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"name"})}),(0,n.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,n.jsx)(d.td,{children:"Nombre del servidor desde Duplicati"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"server_url"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"URL del servidor Duplicati"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"alias"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Nombre descriptivo definido por el usuario"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"note"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Notas/Descripci\xf3n definidas por el usuario"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"server_password"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Contrase\xf1a del servidor para autenticaci\xf3n"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"created_at"})}),(0,n.jsx)(d.td,{children:"DATETIME"}),(0,n.jsx)(d.td,{children:"Marca de tiempo de creaci\xf3n del servidor"})]})]})]}),"\n",(0,n.jsx)(d.h3,{id:"backups-table",children:"Tabla de Backups"}),"\n",(0,n.jsx)(d.p,{children:"Almacena datos de operaciones de backup recibidos de servidores Duplicati."}),"\n",(0,n.jsx)(d.h4,{id:"key-fields",children:"Campos Clave"}),"\n",(0,n.jsxs)(d.table,{children:[(0,n.jsx)(d.thead,{children:(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.th,{children:"Campo"}),(0,n.jsx)(d.th,{children:"Tipo"}),(0,n.jsx)(d.th,{children:"Descripci\xf3n"})]})}),(0,n.jsxs)(d.tbody,{children:[(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"id"})}),(0,n.jsx)(d.td,{children:"TEXT PRIMARY KEY"}),(0,n.jsx)(d.td,{children:"Identificador \xfanico de backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"server_id"})}),(0,n.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,n.jsx)(d.td,{children:"Referencia a la tabla de servidores"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"backup_name"})}),(0,n.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,n.jsx)(d.td,{children:"Nombre del trabajo de backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"backup_id"})}),(0,n.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,n.jsx)(d.td,{children:"ID de backup de Duplicati"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"date"})}),(0,n.jsx)(d.td,{children:"DATETIME NOT NULL"}),(0,n.jsx)(d.td,{children:"Hora de ejecuci\xf3n del backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"status"})}),(0,n.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,n.jsx)(d.td,{children:"Estado del backup (\xc9xito, Advertencia, Error, Fatal)"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"duration_seconds"})}),(0,n.jsx)(d.td,{children:"INTEGER NOT NULL"}),(0,n.jsx)(d.td,{children:"Duraci\xf3n en segundos"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"size"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Tama\xf1o de archivos de origen"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"uploaded_size"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Tama\xf1o de datos enviados"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"examined_files"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"N\xfamero de archivos examinados"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"warnings"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"N\xfamero de advertencias"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"errors"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"N\xfamero de errores"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"created_at"})}),(0,n.jsx)(d.td,{children:"DATETIME"}),(0,n.jsx)(d.td,{children:"Marca de tiempo de creaci\xf3n del registro"})]})]})]}),"\n",(0,n.jsx)(d.h4,{id:"message-arrays-json-storage",children:"Matrices de Mensajes (Almacenamiento JSON)"}),"\n",(0,n.jsxs)(d.table,{children:[(0,n.jsx)(d.thead,{children:(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.th,{children:"Campo"}),(0,n.jsx)(d.th,{children:"Tipo"}),(0,n.jsx)(d.th,{children:"Descripci\xf3n"})]})}),(0,n.jsxs)(d.tbody,{children:[(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"messages_array"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Array JSON de mensajes de registro"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"warnings_array"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Array JSON de mensajes de advertencia"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"errors_array"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Array JSON de mensajes de error"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"available_backups"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Array JSON de versiones de backup disponibles"})]})]})]}),"\n",(0,n.jsx)(d.h4,{id:"file-operation-fields",children:"Campos de Operaci\xf3n de Archivos"}),"\n",(0,n.jsxs)(d.table,{children:[(0,n.jsx)(d.thead,{children:(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.th,{children:"Campo"}),(0,n.jsx)(d.th,{children:"Tipo"}),(0,n.jsx)(d.th,{children:"Descripci\xf3n"})]})}),(0,n.jsxs)(d.tbody,{children:[(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"examined_files"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Archivos examinados durante backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"opened_files"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Archivos abiertos para backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"added_files"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Archivos nuevos a\xf1adidos a backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"modified_files"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Archivos modificados en backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"deleted_files"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Archivos eliminados de backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"deleted_folders"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Carpetas eliminadas de backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"added_folders"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Carpetas a\xf1adidas a backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"modified_folders"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Carpetas modificadas en backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"not_processed_files"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Archivos no procesados"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"too_large_files"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Archivos demasiado grandes para procesar"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"files_with_error"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Archivos con errores"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"added_symlinks"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Enlaces simb\xf3licos a\xf1adidos"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"modified_symlinks"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Enlaces simb\xf3licos modificados"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"deleted_symlinks"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Enlaces simb\xf3licos eliminados"})]})]})]}),"\n",(0,n.jsx)(d.h4,{id:"file-size-fields",children:"Campos de Tama\xf1o de archivos"}),"\n",(0,n.jsxs)(d.table,{children:[(0,n.jsx)(d.thead,{children:(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.th,{children:"Campo"}),(0,n.jsx)(d.th,{children:"Tipo"}),(0,n.jsx)(d.th,{children:"Descripci\xf3n"})]})}),(0,n.jsxs)(d.tbody,{children:[(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"size_of_examined_files"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Tama\xf1o de archivos examinados durante el backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"size_of_opened_files"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Tama\xf1o de archivos abiertos para el backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"size_of_added_files"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Tama\xf1o de archivos nuevos a\xf1adidos al backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"size_of_modified_files"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Tama\xf1o de archivos modificados en el backup"})]})]})]}),"\n",(0,n.jsx)(d.h4,{id:"operation-status-fields",children:"Campos de Estado de Operaci\xf3n"}),"\n",(0,n.jsxs)(d.table,{children:[(0,n.jsx)(d.thead,{children:(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.th,{children:"Campo"}),(0,n.jsx)(d.th,{children:"Tipo"}),(0,n.jsx)(d.th,{children:"Descripci\xf3n"})]})}),(0,n.jsxs)(d.tbody,{children:[(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"parsed_result"})}),(0,n.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,n.jsx)(d.td,{children:"Resultado de operaci\xf3n analizado"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"main_operation"})}),(0,n.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,n.jsx)(d.td,{children:"Tipo de operaci\xf3n principal"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"interrupted"})}),(0,n.jsx)(d.td,{children:"BOOLEAN"}),(0,n.jsx)(d.td,{children:"Si el backup fue interrumpido"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"partial_backup"})}),(0,n.jsx)(d.td,{children:"BOOLEAN"}),(0,n.jsx)(d.td,{children:"Si el backup fue parcial"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"dryrun"})}),(0,n.jsx)(d.td,{children:"BOOLEAN"}),(0,n.jsx)(d.td,{children:"Si el backup fue una ejecuci\xf3n de prueba"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"version"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Versi\xf3n de Duplicati utilizada"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"begin_time"})}),(0,n.jsx)(d.td,{children:"DATETIME NOT NULL"}),(0,n.jsx)(d.td,{children:"Hora de inicio del backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"end_time"})}),(0,n.jsx)(d.td,{children:"DATETIME NOT NULL"}),(0,n.jsx)(d.td,{children:"Hora de fin del backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"warnings_actual_length"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Cantidad real de advertencias"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"errors_actual_length"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Cantidad real de errores"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"messages_actual_length"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Cantidad real de mensajes"})]})]})]}),"\n",(0,n.jsx)(d.h4,{id:"backend-statistics-fields",children:"Campos de Estad\xedsticas del Backend"}),"\n",(0,n.jsxs)(d.table,{children:[(0,n.jsx)(d.thead,{children:(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.th,{children:"Campo"}),(0,n.jsx)(d.th,{children:"Tipo"}),(0,n.jsx)(d.th,{children:"Descripci\xf3n"})]})}),(0,n.jsxs)(d.tbody,{children:[(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"bytes_downloaded"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Bytes descargados del destino"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"known_file_size"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Tama\xf1o de archivos conocido en el destino"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"last_backup_date"})}),(0,n.jsx)(d.td,{children:"DATETIME"}),(0,n.jsx)(d.td,{children:"Fecha del \xfaltimo backup en el destino"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"backup_list_count"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"N\xfamero de versiones de backup"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"reported_quota_error"})}),(0,n.jsx)(d.td,{children:"BOOLEAN"}),(0,n.jsx)(d.td,{children:"Error de cuota reportado"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"reported_quota_warning"})}),(0,n.jsx)(d.td,{children:"BOOLEAN"}),(0,n.jsx)(d.td,{children:"Advertencia de cuota reportada"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"backend_main_operation"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Operaci\xf3n principal del backend"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"backend_parsed_result"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Resultado analizado del backend"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"backend_interrupted"})}),(0,n.jsx)(d.td,{children:"BOOLEAN"}),(0,n.jsx)(d.td,{children:"Operaci\xf3n del backend interrumpida"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"backend_version"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Versi\xf3n del backend"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"backend_begin_time"})}),(0,n.jsx)(d.td,{children:"DATETIME"}),(0,n.jsx)(d.td,{children:"Hora de inicio de la operaci\xf3n del backend"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"backend_duration"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Duraci\xf3n de la operaci\xf3n del backend"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"backend_warnings_actual_length"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Cantidad de advertencias del backend"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"backend_errors_actual_length"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Cantidad de errores del backend"})]})]})]}),"\n",(0,n.jsx)(d.h3,{id:"configurations-table",children:"Tabla de Configuraciones"}),"\n",(0,n.jsx)(d.p,{children:"Almacena la configuraci\xf3n de la aplicaci\xf3n."}),"\n",(0,n.jsx)(d.h4,{id:"fields",children:"Campos"}),"\n",(0,n.jsxs)(d.table,{children:[(0,n.jsx)(d.thead,{children:(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.th,{children:"Campo"}),(0,n.jsx)(d.th,{children:"Tipo"}),(0,n.jsx)(d.th,{children:"Descripci\xf3n"})]})}),(0,n.jsxs)(d.tbody,{children:[(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"key"})}),(0,n.jsx)(d.td,{children:"TEXT PRIMARY KEY NOT NULL"}),(0,n.jsx)(d.td,{children:"Clave de configuraci\xf3n"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"value"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Valor de configuraci\xf3n (JSON)"})]})]})]}),"\n",(0,n.jsx)(d.h4,{id:"common-configuration-keys",children:"Claves de Configuraci\xf3n Comunes"}),"\n",(0,n.jsxs)(d.ul,{children:["\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.code,{children:"email_config"}),": Configuraci\xf3n de notificaciones por correo electr\xf3nico"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.code,{children:"ntfy_config"}),": Configuraci\xf3n de notificaciones NTFY"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.code,{children:"overdue_tolerance"}),": Configuraci\xf3n de tolerancia de backup retrasado"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.code,{children:"notification_templates"}),": Plantillas de mensajes de notificaci\xf3n"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.code,{children:"audit_retention_days"}),": Per\xedodo de retenci\xf3n del log de auditor\xeda (por defecto: 90 d\xedas)"]}),"\n"]}),"\n",(0,n.jsx)(d.h3,{id:"database-version-table",children:"Tabla de Versi\xf3n de Base de Datos"}),"\n",(0,n.jsx)(d.p,{children:"Realiza un seguimiento de la versi\xf3n del esquema de la base de datos con fines de migraci\xf3n."}),"\n",(0,n.jsx)(d.h4,{id:"fields",children:"Campos"}),"\n",(0,n.jsxs)(d.table,{children:[(0,n.jsx)(d.thead,{children:(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.th,{children:"Campo"}),(0,n.jsx)(d.th,{children:"Tipo"}),(0,n.jsx)(d.th,{children:"Descripci\xf3n"})]})}),(0,n.jsxs)(d.tbody,{children:[(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"version"})}),(0,n.jsx)(d.td,{children:"TEXT PRIMARY KEY"}),(0,n.jsx)(d.td,{children:"Versi\xf3n de la base de datos"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"applied_at"})}),(0,n.jsx)(d.td,{children:"DATETIME"}),(0,n.jsx)(d.td,{children:"Cu\xe1ndo se aplic\xf3 la migraci\xf3n"})]})]})]}),"\n",(0,n.jsx)(d.h3,{id:"users-table",children:"Tabla de Usuarios"}),"\n",(0,n.jsx)(d.p,{children:"Almacena informaci\xf3n de cuenta de usuario para autenticaci\xf3n y control de acceso."}),"\n",(0,n.jsx)(d.h4,{id:"fields",children:"Campos"}),"\n",(0,n.jsxs)(d.table,{children:[(0,n.jsx)(d.thead,{children:(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.th,{children:"Campo"}),(0,n.jsx)(d.th,{children:"Tipo"}),(0,n.jsx)(d.th,{children:"Descripci\xf3n"})]})}),(0,n.jsxs)(d.tbody,{children:[(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"id"})}),(0,n.jsx)(d.td,{children:"TEXT PRIMARY KEY"}),(0,n.jsx)(d.td,{children:"Identificador \xfanico de usuario"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"username"})}),(0,n.jsx)(d.td,{children:"TEXT UNIQUE NOT NULL"}),(0,n.jsx)(d.td,{children:"Nombre de usuario para iniciar sesi\xf3n"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"password_hash"})}),(0,n.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,n.jsx)(d.td,{children:"Contrase\xf1a cifrada con Bcrypt"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"is_admin"})}),(0,n.jsx)(d.td,{children:"BOOLEAN NOT NULL"}),(0,n.jsx)(d.td,{children:"Si el usuario tiene privilegios de admin"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"must_change_password"})}),(0,n.jsx)(d.td,{children:"BOOLEAN"}),(0,n.jsx)(d.td,{children:"Si el cambio de contrase\xf1a es requerido"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"created_at"})}),(0,n.jsx)(d.td,{children:"DATETIME"}),(0,n.jsx)(d.td,{children:"Marca de tiempo de creaci\xf3n de cuenta"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"updated_at"})}),(0,n.jsx)(d.td,{children:"DATETIME"}),(0,n.jsx)(d.td,{children:"Marca de tiempo de \xfaltima actualizaci\xf3n"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"last_login_at"})}),(0,n.jsx)(d.td,{children:"DATETIME"}),(0,n.jsx)(d.td,{children:"Marca de tiempo del \xfaltimo inicio de sesi\xf3n exitoso"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"last_login_ip"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Direcci\xf3n IP del \xfaltimo inicio de sesi\xf3n"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"failed_login_attempts"})}),(0,n.jsx)(d.td,{children:"INTEGER"}),(0,n.jsx)(d.td,{children:"Recuento de intentos de inicio de sesi\xf3n fallidos"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"locked_until"})}),(0,n.jsx)(d.td,{children:"DATETIME"}),(0,n.jsx)(d.td,{children:"Expiraci\xf3n del bloqueo de cuenta (si est\xe1 bloqueado)"})]})]})]}),"\n",(0,n.jsx)(d.h3,{id:"sessions-table",children:"Tabla de Sesiones"}),"\n",(0,n.jsx)(d.p,{children:"Almacena datos de sesi\xf3n del usuario para autenticaci\xf3n y seguridad."}),"\n",(0,n.jsx)(d.h4,{id:"fields",children:"Campos"}),"\n",(0,n.jsxs)(d.table,{children:[(0,n.jsx)(d.thead,{children:(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.th,{children:"Campo"}),(0,n.jsx)(d.th,{children:"Tipo"}),(0,n.jsx)(d.th,{children:"Descripci\xf3n"})]})}),(0,n.jsxs)(d.tbody,{children:[(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"id"})}),(0,n.jsx)(d.td,{children:"TEXT PRIMARY KEY"}),(0,n.jsx)(d.td,{children:"Identificador de sesi\xf3n"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"user_id"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Referencia a la tabla de usuarios (anulable para sesiones no autenticadas)"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"created_at"})}),(0,n.jsx)(d.td,{children:"DATETIME"}),(0,n.jsx)(d.td,{children:"Marca de tiempo de creaci\xf3n de sesi\xf3n"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"last_accessed"})}),(0,n.jsx)(d.td,{children:"DATETIME"}),(0,n.jsx)(d.td,{children:"Marca de tiempo de \xfaltima acceso"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"expires_at"})}),(0,n.jsx)(d.td,{children:"DATETIME NOT NULL"}),(0,n.jsx)(d.td,{children:"Marca de tiempo de expiraci\xf3n de sesi\xf3n"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"ip_address"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Direcci\xf3n IP de origen de sesi\xf3n"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"user_agent"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Cadena de agente de usuario"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"csrf_token"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Token CSRF para la sesi\xf3n"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"csrf_expires_at"})}),(0,n.jsx)(d.td,{children:"DATETIME"}),(0,n.jsx)(d.td,{children:"Expiraci\xf3n de token CSRF"})]})]})]}),"\n",(0,n.jsx)(d.h3,{id:"audit-log-table",children:"Log de Auditor\xeda"}),"\n",(0,n.jsx)(d.p,{children:"Almacena un registro de auditor\xeda de acciones de usuario y eventos del sistema."}),"\n",(0,n.jsx)(d.h4,{id:"fields",children:"Campos"}),"\n",(0,n.jsxs)(d.table,{children:[(0,n.jsx)(d.thead,{children:(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.th,{children:"Campo"}),(0,n.jsx)(d.th,{children:"Tipo"}),(0,n.jsx)(d.th,{children:"Descripci\xf3n"})]})}),(0,n.jsxs)(d.tbody,{children:[(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"id"})}),(0,n.jsx)(d.td,{children:"INTEGER PRIMARY KEY AUTOINCREMENT"}),(0,n.jsx)(d.td,{children:"Identificador \xfanico de entrada del log de auditor\xeda"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"timestamp"})}),(0,n.jsx)(d.td,{children:"DATETIME"}),(0,n.jsx)(d.td,{children:"Marca de tiempo del evento"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"user_id"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Referencia a la tabla de usuarios (anulable)"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"username"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Nombre de usuario en el momento de la acci\xf3n"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"action"})}),(0,n.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,n.jsx)(d.td,{children:"Acci\xf3n realizada"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"category"})}),(0,n.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,n.jsx)(d.td,{children:"Categor\xeda de la acci\xf3n (p. ej., 'authentication', 'settings', 'backup')"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"target_type"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Tipo de objetivo (p. ej., 'server', 'backup', 'user')"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"target_id"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Identificador del objetivo"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"details"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Detalles adicionales (JSON)"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"ip_address"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Direcci\xf3n IP del solicitante"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"user_agent"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Cadena de agente de usuario"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"status"})}),(0,n.jsx)(d.td,{children:"TEXT NOT NULL"}),(0,n.jsx)(d.td,{children:"Estado de la acci\xf3n ('success', 'failure', 'error')"})]}),(0,n.jsxs)(d.tr,{children:[(0,n.jsx)(d.td,{children:(0,n.jsx)(d.code,{children:"error_message"})}),(0,n.jsx)(d.td,{children:"TEXT"}),(0,n.jsx)(d.td,{children:"Mensaje de error si la acci\xf3n fall\xf3"})]})]})]}),"\n",(0,n.jsx)(d.h2,{id:"session-management",children:"Gesti\xf3n de Sesiones"}),"\n",(0,n.jsx)(d.h3,{id:"database-backed-session-storage",children:"Almacenamiento de Sesiones Respaldado por Base de Datos"}),"\n",(0,n.jsx)(d.p,{children:"Las sesiones se almacenan en la base de datos con respaldo en memoria:"}),"\n",(0,n.jsxs)(d.ul,{children:["\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Almacenamiento Principal"}),": Tabla de sesiones respaldada por base de datos"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Respaldo"}),": Almacenamiento en memoria (soporte heredado o casos de error)"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"ID de Sesi\xf3n"}),": Cadena aleatoria criptogr\xe1ficamente segura"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Vencimiento"}),": Tiempo de espera agotado configurable"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Protecci\xf3n CSRF"}),": Protecci\xf3n contra falsificaci\xf3n de solicitudes entre sitios"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Limpieza Autom\xe1tica"}),": Las sesiones vencidas se eliminan autom\xe1ticamente"]}),"\n"]}),"\n",(0,n.jsx)(d.h3,{id:"session-api-endpoints",children:"Puntos finales de la API de sesi\xf3n"}),"\n",(0,n.jsxs)(d.ul,{children:["\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.code,{children:"POST /api/session"}),": Crear nueva sesi\xf3n"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.code,{children:"GET /api/session"}),": Validar sesi\xf3n existente"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.code,{children:"DELETE /api/session"}),": Destruir sesi\xf3n"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.code,{children:"GET /api/csrf"}),": Obtener token CSRF"]}),"\n"]}),"\n",(0,n.jsx)(d.h2,{id:"indexes",children:"\xcdndices"}),"\n",(0,n.jsx)(d.p,{children:"La base de datos incluye varios \xedndices para un rendimiento \xf3ptimo de las consultas:"}),"\n",(0,n.jsxs)(d.ul,{children:["\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Claves Primarias"}),": Todos los tablas tienen \xedndices de clave primaria"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Claves For\xe1neas"}),": Referencias de Servidor en tabla de backups, referencias de Usuario en sesiones y audit_log"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Optimizaci\xf3n de Consultas"}),": \xcdndices en campos consultados frecuentemente"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"\xcdndices de Fecha"}),": \xcdndices en campos de fecha para consultas basadas en tiempo"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"\xcdndices de Usuario"}),": \xcdndice de nombre de usuario para b\xfasquedas r\xe1pidas de usuarios"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"\xcdndices de Sesi\xf3n"}),": \xcdndices de expiraci\xf3n e ID de usuario para gesti\xf3n de sesiones"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"\xcdndices de Auditor\xeda"}),": \xcdndices de marca de tiempo, ID de usuario, acci\xf3n, categor\xeda y estado para consultas de auditor\xeda"]}),"\n"]}),"\n",(0,n.jsx)(d.h2,{id:"relationships",children:"Relaciones"}),"\n",(0,n.jsxs)(d.ul,{children:["\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Servidores \u2192 Backups"}),": Relaci\xf3n uno a muchos"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Usuarios \u2192 Sesiones"}),": Relaci\xf3n uno a muchos (las sesiones pueden existir sin usuarios)"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Usuarios \u2192 Log de Auditor\xeda"}),": Relaci\xf3n uno a muchos (las entradas de auditor\xeda pueden existir sin usuarios)"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Backups \u2192 Mensajes"}),": Arreglos JSON incrustados"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Configuraciones"}),": Almacenamiento de clave-valor"]}),"\n"]}),"\n",(0,n.jsx)(d.h2,{id:"data-types",children:"Tipos de Datos"}),"\n",(0,n.jsxs)(d.ul,{children:["\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"TEXT"}),": Datos de cadena, matrices JSON"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"INTEGER"}),": Datos num\xe9ricos, recuentos de archivos, tama\xf1os"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"REAL"}),": N\xfameros de punto flotante, duraciones"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"DATETIME"}),": Datos de marca de tiempo"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"BOOLEAN"}),": Valores verdadero/falso"]}),"\n"]}),"\n",(0,n.jsx)(d.h2,{id:"backup-status-values",children:"Estados de Backup"}),"\n",(0,n.jsxs)(d.ul,{children:["\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"\xc9xito"}),": Backup completado exitosamente"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Advertencia"}),": Backup completado con advertencias"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Error"}),": Backup completado con errores"]}),"\n",(0,n.jsxs)(d.li,{children:[(0,n.jsx)(d.strong,{children:"Fatal"}),": Backup fallido fatalmente"]}),"\n"]}),"\n",(0,n.jsx)(d.h2,{id:"common-queries",children:"Consultas Comunes"}),"\n",(0,n.jsx)(d.h3,{id:"get-latest-backup-for-a-server",children:"Obtener el \xdaltimo Backup para un Servidor"}),"\n",(0,n.jsx)(d.pre,{children:(0,n.jsx)(d.code,{className:"language-sql",children:"SELECT * FROM backups \nWHERE server_id = ? \nORDER BY date DESC \nLIMIT 1;\n"})}),"\n",(0,n.jsx)(d.h3,{id:"get-all-backups-for-a-server",children:"Obtener Todos los Backups para un Servidor"}),"\n",(0,n.jsx)(d.pre,{children:(0,n.jsx)(d.code,{className:"language-sql",children:"SELECT * FROM backups \nWHERE server_id = ? \nORDER BY date DESC;\n"})}),"\n",(0,n.jsx)(d.h3,{id:"get-server-summary",children:"Obtener Resumen del Servidor"}),"\n",(0,n.jsx)(d.pre,{children:(0,n.jsx)(d.code,{className:"language-sql",children:"SELECT \n  s.name,\n  s.alias,\n  COUNT(b.id) as backup_count,\n  MAX(b.date) as last_backup,\n  b.status as last_status\nFROM servers s\nLEFT JOIN backups b ON s.id = b.server_id\nGROUP BY s.id;\n"})}),"\n",(0,n.jsx)(d.h3,{id:"get-overall-summary",children:"Obtener Resumen General"}),"\n",(0,n.jsx)(d.pre,{children:(0,n.jsx)(d.code,{className:"language-sql",children:"SELECT \n  COUNT(DISTINCT s.id) as total_servers,\n  COUNT(b.id) as total_backups_runs,\n  COUNT(DISTINCT s.id || ':' || b.backup_name) as total_backups,\n  COALESCE(SUM(b.uploaded_size), 0) as total_uploaded_size,\n  (\n    SELECT COALESCE(SUM(b2.known_file_size), 0)\n    FROM backups b2\n    INNER JOIN (\n      SELECT server_id, MAX(date) as max_date\n      FROM backups\n      GROUP BY server_id\n    ) latest ON b2.server_id = latest.server_id AND b2.date = latest.max_date\n  ) as total_storage_used,\n  (\n    SELECT COALESCE(SUM(b2.size_of_examined_files), 0)\n    FROM backups b2\n    INNER JOIN (\n      SELECT server_id, MAX(date) as max_date\n      FROM backups\n      GROUP BY server_id\n    ) latest ON b2.server_id = latest.server_id AND b2.date = latest.max_date\n  ) as total_backuped_size\nFROM servers s\nLEFT JOIN backups b ON b.server_id = s.id;\n"})}),"\n",(0,n.jsx)(d.h3,{id:"database-cleanup",children:"Limpieza de Base de Datos"}),"\n",(0,n.jsx)(d.pre,{children:(0,n.jsx)(d.code,{className:"language-sql",children:"-- Delete old backups (older than 30 days)\nDELETE FROM backups \nWHERE date < datetime('now', '-30 days');\n\n-- Delete servers with no backups\nDELETE FROM servers \nWHERE id NOT IN (SELECT DISTINCT server_id FROM backups);\n"})}),"\n",(0,n.jsx)(d.h2,{id:"json-to-database-mapping",children:"Asignaci\xf3n de JSON a Base de Datos"}),"\n",(0,n.jsx)(d.h3,{id:"api-request-body-to-database-columns-mapping",children:"Asignaci\xf3n de Cuerpo de Solicitud de API a Columnas de Base de Datos"}),"\n",(0,n.jsx)(d.p,{children:"Cuando Duplicati env\xeda datos de backup a trav\xe9s de HTTP POST, la estructura JSON se asigna a columnas de base de datos:"}),"\n",(0,n.jsx)(d.pre,{children:(0,n.jsx)(d.code,{className:"language-json",children:'{\n  "Data": {\n    "ExaminedFiles": 15399,           // \u2192 examined_files\n    "OpenedFiles": 1861,              // \u2192 opened_files\n    "AddedFiles": 1861,               // \u2192 added_files\n    "SizeOfExaminedFiles": 11086692615, // \u2192 size_of_examined_files\n    "SizeOfOpenedFiles": 13450481,    // \u2192 size_of_opened_files\n    "SizeOfAddedFiles": 13450481,     // \u2192 size_of_added_files\n    "SizeOfModifiedFiles": 0,         // \u2192 size_of_modified_files\n    "ParsedResult": "Success",        // \u2192 status\n    "BeginTime": "2025-04-21T23:45:46.9712217Z", // \u2192 begin_time and date\n    "Duration": "00:00:51.3856057",   // \u2192 duration_seconds (calculated)\n    "WarningsActualLength": 0,        // \u2192 warnings_actual_length\n    "ErrorsActualLength": 0           // \u2192 errors_actual_length\n  },\n  "Extra": {\n    "machine-id": "66f5ffc7ff474a73a3c9cba4ac7bfb65", // \u2192 server_id\n    "machine-name": "WSJ-SER5",       // \u2192 server name\n    "backup-name": "WSJ-SER5 Local files", // \u2192 backup_name\n    "backup-id": "DB-2"               // \u2192 backup_id\n  }\n}\n'})}),"\n",(0,n.jsxs)(d.p,{children:[(0,n.jsx)(d.strong,{children:"Nota"}),": El campo ",(0,n.jsx)(d.code,{children:"size"})," en la tabla de backups almacena ",(0,n.jsx)(d.code,{children:"SizeOfExaminedFiles"})," y ",(0,n.jsx)(d.code,{children:"uploaded_size"})," almacena el tama\xf1o real enviado/transferido desde la operaci\xf3n de backup."]})]})}function h(e={}){const{wrapper:d}={...(0,r.R)(),...e.components};return d?(0,n.jsx)(d,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},73230(e,d,s){s.d(d,{R:()=>c,x:()=>l});var i=s(71299);const n={},r=i.createContext(n);function c(e){const d=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(d):{...d,...e}},[d,e])}function l(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),i.createElement(r.Provider,{value:d},e.children)}}}]);