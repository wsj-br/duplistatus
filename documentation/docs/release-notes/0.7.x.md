

# Version 0.7.x

## Overview

Version 0.7.x is a major release that introduces significant improvements to the database schema, API structure, and user interface. This version includes breaking changes that require updates to external integrations.

## Breaking Changes

### Database Schema Changes
- **Table Renaming**: `machines` table renamed to `servers`
- **New Fields**: Added `alias`, `notes`, `created_at`, and `updated_at` fields
- **API Response Changes**: Updated field names for consistency

### API Breaking Changes
- **Field Renaming**: `totalMachines` → `totalServers`
- **Object Renaming**: `machine` → `server` in API responses
- **Field Renaming**: `backup_types_count` → `backupJobsCount`

> [!WARNING]
> **External integrations using the API must be updated** to work with version 0.7.x. See the [API Breaking Changes](../migration/api-changes) guide for details.

## New Features

### Enhanced Server Management
- **Server Aliases**: Give servers friendly, memorable names
- **Server Notes**: Add descriptions and additional information
- **Improved Status Tracking**: Better server status monitoring
- **Enhanced Server Details**: More comprehensive server information

### Improved API Structure
- **Consistent Response Format**: Standardized API response structure
- **Better Error Handling**: Improved error messages and codes
- **Enhanced Documentation**: Better API documentation
- **New Endpoints**: Additional API endpoints for better integration

### Database Improvements
- **Better Performance**: Optimised database queries and indexing
- **Data Integrity**: Enhanced data validation and constraints
- **Migration System**: Automated database migration system
- **Backup System**: Improved database backup and restore

## Enhancements

### User Interface
- **Modern Design**: Updated UI with better visual design
- **Responsive Layout**: Better mobile and tablet support
- **Improved Navigation**: Enhanced navigation and user experience
- **Better Charts**: Improved chart visualisation and interactivity

### Notification System
- **Enhanced Templates**: Better notification message templates
- **Improved Delivery**: More reliable notification delivery
- **Better Error Handling**: Improved error handling for notifications
- **Enhanced Logging**: Better logging for notification debugging

### Performance
- **Faster Queries**: Optimised database queries
- **Better Caching**: Improved caching mechanisms
- **Reduced Memory Usage**: Better memory management
- **Faster API Responses**: Improved API response times

## Bug Fixes

### Database Issues
- Fixed database corruption issues in rare cases
- Resolved migration problems during upgrades
- Fixed data loss issues in specific scenarios
- Improved database backup and restore procedures

### API Issues
- Fixed API response inconsistencies
- Resolved authentication problems
- Fixed data validation issues
- Improved error handling and messages

### User Interface
- Fixed dashboard loading issues
- Resolved chart rendering problems
- Fixed mobile layout issues
- Improved error message display

### Notification System
- Fixed notification delivery failures
- Resolved email configuration issues
- Fixed NTFY integration problems
- Improved notification template rendering

## Migration Guide

### Automatic Migration
The migration from 0.6.x to 0.7.x happens automatically:

1. **Backup Creation**: Automatic database backup is created
2. **Schema Update**: Database schema is updated automatically
3. **Data Migration**: Existing data is preserved and migrated
4. **Verification**: Migration is verified and logged

### Manual Steps Required
- **Update External Integrations**: Update any external tools using the API
- **Test Functionality**: Verify all features work correctly
- **Update Documentation**: Update any custom documentation

## Configuration Changes

### New Configuration Options
```yaml
# Server management
servers:
  defaultAlias: true
  showNotes: true
  sortBy: "name" # name, status, lastBackup

# API settings
api:
  version: "1.0"
  rateLimit: 100
  timeout: 30000

# Database settings
database:
  backupRetention: 7
  autoVacuum: true
  optimizeInterval: 24
```

### Deprecated Options
- `machines` configuration (use `servers` instead)
- Old API field names (use new field names)

## Docker Images

### Available Images
- **Docker Hub**: `wsjbr/duplistatus:0.7.x`
- **GitHub Container Registry**: `ghcr.io/wsj-br/duplistatus:0.7.x`
- **Latest Tag**: `wsjbr/duplistatus:latest`

### Image Sizes
- **Alpine**: 52MB
- **Debian**: 85MB
- **Multi-arch**: Support for ARM64 and AMD64

## Installation

### Docker Compose
```yaml
services:
  duplistatus:
    image: wsjbr/duplistatus:0.7.x
    container_name: duplistatus
    restart: unless-stopped
    ports:
      - "9666:9666"
    volumes:
      - duplistatus_data:/app/data
    environment:
      - TZ=UTC
```

### Docker CLI
```bash
docker run -d \
  --name duplistatus \
  --restart unless-stopped \
  -p 9666:9666 \
  -v duplistatus_data:/app/data \
  wsjbr/duplistatus:0.7.x
```

## Upgrade Instructions

### From Version 0.6.x
1. **Backup your data** (automatic backup created during upgrade)
2. **Update Docker image**: `docker pull wsjbr/duplistatus:0.7.x`
3. **Restart container**: `docker-compose down && docker-compose up -d`
4. **Monitor logs**: `docker logs -f duplistatus`
5. **Update integrations**: Update any external tools using the API
6. **Verify upgrade**: Check that all features work correctly

### From Version 0.5.x or Earlier
1. **First upgrade to 0.6.x** (if available)
2. **Then upgrade to 0.7.x** using the steps above

## Known Issues

### Migration Issues
- **Large Databases**: Migration may take longer for large databases
- **Disk Space**: Ensure sufficient disk space for migration backup
- **Permissions**: Check file permissions for database access

### API Compatibility
- **External Tools**: External tools using the API need updates
- **Field Names**: Some field names have changed
- **Response Format**: Some response formats have changed

### Workarounds
- **Migration**: Ensure sufficient disk space and time for migration
- **API**: Update external integrations to use new API format
- **Testing**: Test all functionality after upgrade

## Support

### Getting Help
- **Documentation**: [User Guide](../user-guide/overview.md)
- **API Reference**: [API Documentation](../api-reference/overview.md)
- **Migration Guide**: [Version Upgrade Migration](../migration/version_upgrade.md)
- **Community**: [GitHub Discussions](https://github.com/wsj-br/duplistatus/discussions)
- **Issues**: [GitHub Issues](https://github.com/wsj-br/duplistatus/issues)

### Reporting Bugs
When reporting bugs, please include:
- Version: 0.7.x
- Operating system and version
- Docker version
- Error messages and logs
- Steps to reproduce

## What's Next

### Version 0.8.x (Planned)
- **Enhanced Monitoring**: Better overdue backup monitoring
- **Improved Notifications**: Enhanced notification system
- **Performance**: Further performance improvements
- **New Features**: Additional monitoring and management features

### Long-term Roadmap
- **Advanced Analytics**: More detailed backup analytics
- **Multi-Tenant Support**: Support for multiple organisations
- **Cloud Integration**: Support for cloud storage providers
- **Mobile App**: Native mobile application

## Changelog

### Detailed Changes
- **Added**: Server aliases and notes functionality
- **Added**: Enhanced API with consistent response format
- **Added**: Improved database schema and performance
- **Added**: Better error handling and logging
- **Added**: Enhanced user interface and navigation
- **Changed**: Database table names (`machines` → `servers`)
- **Changed**: API field names for consistency
- **Changed**: Response format structure
- **Fixed**: Database corruption issues
- **Fixed**: API response inconsistencies
- **Fixed**: User interface rendering problems
- **Fixed**: Notification delivery issues
- **Improved**: Overall performance and stability
- **Improved**: Documentation and user experience

## Contributors

### Development Team
- **Waldemar Scudeller Jr.**: Lead developer and maintainer
- **Community Contributors**: Bug reports, feature requests, and testing

### Special Thanks
- **Beta Testers**: For testing early versions and providing feedback
- **Community**: For suggestions, bug reports, and support
- **Duplicati Team**: For the excellent backup software that makes this project possible

## License

This project is licensed under the [Apache License 2.0](https://github.com/wsj-br/duplistatus/blob/main/LICENSE).

**Copyright © 2025 Waldemar Scudeller Jr.**
