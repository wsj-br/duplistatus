# Vers√£o 1.0.x {#version-10x}

## Vis√£o geral {#overview}

Vers√£o 1.0.x √© um lan√ßamento de recursos que introduz melhorias significativas na configura√ß√£o de e-mail, capacidades de gerenciamento de servidores e ferramentas de manuten√ß√£o do banco de dados. Este lan√ßamento se concentra em melhorar a confiabilidade das notifica√ß√µes por e-mail, expandir as op√ß√µes de conex√£o SMTP e fornecer melhores ferramentas para gerenciar servidores e integridade do banco de dados.

## Novos recursos {#new-features}

### Melhorias no gerenciamento de servidores {#server-management-enhancements}

- **Funcionalidade de altera√ß√£o de senha do servidor** - Os usu√°rios agora podem alterar as senhas do servidor diretamente na p√°gina de detalhes do servidor clicando no √≠cone de chave
- **Detec√ß√£o e mesclagem de servidores duplicados** - Nova fun√ß√£o no formul√°rio de manuten√ß√£o do banco de dados para detectar servidores duplicados e mescl√°-los em uma √∫nica entrada de servidor

### Melhorias na auditoria de logs {#audit-logging-enhancements}

- **Auditoria de upload de backup** - Todos os uploads de logs de backup via endpoint `/api/upload` agora s√£o automaticamente registrados no log de auditoria. Cada entrada inclui detalhes do backup (ID do servidor, nome do servidor, nome do backup, status, data, dura√ß√£o, contagem de arquivos, tamanhos, avisos e erros) junto com endere√ßo IP do cliente e informa√ß√µes do agente do usu√°rio para fins de rastreamento e seguran√ßa

### Melhorias na configura√ß√£o de e-mail {#email-configuration-enhancements}

- **Aviso de configura√ß√£o incompleta** - Alerta visual exibido quando as configura√ß√µes de e-mail n√£o est√£o configuradas corretamente
- **Indicadores de status do servi√ßo** - R√≥tulos "(desabilitado)" mostrados nas caixas de sele√ß√£o de notifica√ß√µes quando os servi√ßos de e-mail n√£o est√£o configurados
- **Informa√ß√µes do remetente personaliz√°veis**:
  - `Nome do remetente` campo para personalizar o nome de exibi√ß√£o mostrado como remetente nas notifica√ß√µes por e-mail
  - `Endere√ßo do remetente` campo para especificar o endere√ßo de e-mail mostrado como remetente
  - Nota: Alguns provedores de e-mail substituir√£o o `Endere√ßo do remetente` pelo `Nome de usu√°rio do servidor SMTP`
- **Altern√¢ncia de autentica√ß√£o SMTP** - Op√ß√£o para ativar ou desativar a autentica√ß√£o SMTP, suportando servidores que n√£o requerem autentica√ß√£o
- **Valida√ß√£o de formato de e-mail** - Valida√ß√£o para campos de endere√ßo do destinat√°rio e remetente para garantir o formato correto do endere√ßo de e-mail
- **E-mail de teste aprimorado** - O e-mail de teste agora exibe detalhes de conex√£o abrangentes, incluindo nome do host do servidor SMTP, porta, tipo de conex√£o, status de autentica√ß√£o, nome de usu√°rio (se aplic√°vel), e-mail do destinat√°rio, endere√ßo do remetente, nome do remetente e data e hora do teste

### Suporte ao tipo de conex√£o SMTP {#smtp-connection-type-support}

- **M√∫ltiplos tipos de conex√£o** - Suporte para tr√™s tipos de conex√£o:
  - `SMTP simples` (sem criptografia) na porta 25
  - `STARTTLS` (atualizar para TLS) na porta 587
  - `SSL/TLS direto` (criptografado desde o in√≠cio) na porta 465
- **Tipo de conex√£o padr√£o** - Alterado para `SSL/TLS direto` para novas configura√ß√µes
- **Requisitos espec√≠ficos de conex√£o** - O campo `Endere√ßo do remetente` √© obrigat√≥rio para conex√µes `SMTP simples` para garantir a identifica√ß√£o adequada do remetente de e-mail e conformidade com RFC 5322

---

## üêõ Corre√ß√µes de bugs {#bug-fixes}

### Corre√ß√µes do sistema de e-mail {#email-system-fixes}

- **Cabe√ßalho `From` ausente corrigido** - Resolvidos erros de conformidade com RFC 5322 garantindo que todas as mensagens de e-mail incluam cabe√ßalhos `From` apropriados
- **Criptografia de e-mail para STARTTLS corrigida** - Corrigido o tratamento de criptografia para conex√µes `STARTTLS` (porta 587)
- **Conex√µes SMTP simples corrigidas** - Resolvidos erros de negocia√ß√£o TLS que estavam causando falha nas conex√µes `SMTP simples`
- **Perda de configura√ß√£o n√£o salva corrigida** - Impedida a limpeza da configura√ß√£o de e-mail n√£o salva ao alterar a senha
- **Configura√ß√£o SMTP obsoleta corrigida** - Resolvido o problema em que o endpoint de e-mail de teste estava usando configura√ß√£o SMTP desatualizada

### Corre√ß√µes da interface do usu√°rio {#user-interface-fixes}

- **Altern√¢ncia de visibilidade de senha corrigida** - Corrigido o comportamento do recurso de visualiza√ß√£o de senha no formul√°rio de altera√ß√£o de senha; clicar no √≠cone de olho agora mostra a senha para ambos os campos de senha simultaneamente

### Corre√ß√µes do sistema {#system-fixes}

- **Logging do ponto de entrada do Docker corrigido** - Resolvido o problema em que o script de ponto de entrada do Docker estava descartando mensagens de log
- **C√°lculo da data de pr√≥xima execu√ß√£o corrigido** - Adicionado rec√°lculo autom√°tico da data `Pr√≥xima execu√ß√£o` ap√≥s coletar logs de backup, garantindo que a data seja atualizada corretamente ap√≥s a coleta de logs

---

## üöÄ Notas de migra√ß√£o {#migration-notes}

### Da vers√£o 0.9.x {#from-version-09x}

Este lan√ßamento inclui melhorias na configura√ß√£o de e-mail e gerenciamento de servidores. Ao atualizar da vers√£o 0.9.x:

1. **Nenhuma migra√ß√£o de banco de dados necess√°ria** - Este lan√ßamento n√£o requer altera√ß√µes no esquema do banco de dados
2. **Atualiza√ß√µes de configura√ß√£o de e-mail** - As configura√ß√µes de e-mail existentes continuar√£o funcionando, mas voc√™ pode querer revisar e atualizar suas configura√ß√µes para aproveitar os novos recursos:
   - Considere definir um `Nome do remetente` personalizado para melhor identifica√ß√£o de e-mail
   - Verifique se seu `Endere√ßo do remetente` est√° definido corretamente, especialmente se usar conex√µes `SMTP simples`
   - Teste sua configura√ß√£o de e-mail usando o recurso de e-mail de teste aprimorado
3. **Padr√£o de tipo de conex√£o** - Novas configura√ß√µes de e-mail usar√£o como padr√£o o tipo de conex√£o `SSL/TLS direto`
4. **Gerenciamento de senha do servidor** - Agora voc√™ pode alterar as senhas do servidor diretamente na p√°gina de detalhes do servidor sem precisar recoletar backups

### Recomenda√ß√µes de configura√ß√£o de e-mail {#email-configuration-recommendations}

- **Para uso em produ√ß√£o**: Use conex√µes `STARTTLS` ou `SSL/TLS direto` para entrega segura de e-mail
- **Para testes locais**: Conex√µes `SMTP simples` est√£o dispon√≠veis para redes locais confi√°veis
- **Requisito de endere√ßo do remetente**: Ao usar `SMTP simples` ou quando a autentica√ß√£o est√° desabilitada, certifique-se de que o campo `Endere√ßo do remetente` est√° configurado corretamente
- **Teste sua configura√ß√£o**: Sempre use o bot√£o "Enviar e-mail de teste" para verificar se sua configura√ß√£o de e-mail funciona corretamente

---

## Endpoints da API {#api-endpoints}

### Endpoints de configura√ß√£o de e-mail {#email-configuration-endpoints}

- `GET /api/email/config` - Obter configura√ß√£o de e-mail
- `POST /api/email/config` - Atualizar configura√ß√£o de e-mail
- `POST /api/email/test` - Enviar e-mail de teste
- `DELETE /api/email/config` - Excluir configura√ß√£o de e-mail

### Endpoints de gerenciamento de servidores {#server-management-endpoints}

- `PATCH /api/servers/{id}/password` - Atualizar senha do servidor
- `POST /api/database/maintenance/merge-duplicate-servers` - Mesclar servidores duplicados

---

## Suporte {#support}

### Obtendo ajuda {#getting-help}

- **Documenta√ß√£o**: [Guia do usu√°rio](../user-guide/overview.md)
- **Configura√ß√µes de e-mail**: [Guia de configura√ß√£o de e-mail](../user-guide/settings/email-settings.md)
- **Refer√™ncia da API**: [Documenta√ß√£o da API](../api-reference/overview.md)
- **Guia de migra√ß√£o**: [Migra√ß√£o de atualiza√ß√£o de vers√£o](../migration/version_upgrade.md)
- **Comunidade**: [GitHub Discussions](https://github.com/wsj-br/duplistatus/discussions)
- **Problemas**: [GitHub Issues](https://github.com/wsj-br/duplistatus/issues)

### Relatando bugs {#reporting-bugs}

Ao relatar bugs, inclua:

- Vers√£o: 1.0.x (especifique a vers√£o exata, por exemplo, 1.0.3)
- Sistema operacional e vers√£o
- Vers√£o do Docker/podman
- Tipo de cont√™iner (Docker ou podman/Pod)
- Mensagens de erro e logs
- Etapas para reproduzir
- Detalhes de configura√ß√£o de e-mail (se relacionado a e-mail)
- Detalhes de configura√ß√£o do Podman (se executado em podman/Pod)

---

## Changelog {#changelog}

### Altera√ß√µes detalhadas {#detailed-changes}

- **Adicionado**: Funcionalidade de altera√ß√£o de senha do servidor na p√°gina de detalhes do servidor
- **Adicionado**: Detec√ß√£o e mesclagem de servidores duplicados na manuten√ß√£o do banco de dados
- **Adicionado**: Campos `Nome do remetente` e `Endere√ßo do remetente` na configura√ß√£o de e-mail
- **Adicionado**: Suporte para conex√µes `SMTP simples` (porta 25)
- **Adicionado**: Sele√ß√£o de tipo de conex√£o (`SMTP simples`, `STARTTLS`, `SSL/TLS direto`)
- **Adicionado**: Altern√¢ncia de requisito de autentica√ß√£o SMTP
- **Adicionado**: Valida√ß√£o de formato de e-mail para campos de endere√ßo do destinat√°rio e remetente
- **Adicionado**: E-mail de teste aprimorado com detalhes de conex√£o abrangentes
- **Adicionado**: Aviso de configura√ß√£o incompleta para configura√ß√µes de e-mail
- **Adicionado**: R√≥tulos "(desabilitado)" nas caixas de sele√ß√£o de notifica√ß√µes quando os servi√ßos n√£o est√£o configurados
- **Adicionado**: Entradas de log de auditoria para uploads de logs de backup via endpoint `/api/upload`
- **Alterado**: Tipo de conex√£o padr√£o para `SSL/TLS direto` para novas configura√ß√µes
- **Alterado**: O campo `Endere√ßo do remetente` agora √© obrigat√≥rio para conex√µes `SMTP simples`
- **Corrigido**: Cabe√ßalho `From` ausente em mensagens de e-mail (conformidade com RFC 5322)
- **Corrigido**: Criptografia de e-mail para conex√µes `STARTTLS`
- **Corrigido**: Conex√µes `SMTP simples` falhando com erros de negocia√ß√£o TLS
- **Corrigido**: Configura√ß√£o de e-mail n√£o salva sendo limpa ao alterar a senha
- **Corrigido**: Configura√ß√£o SMTP obsoleta no endpoint de e-mail de teste
- **Corrigido**: Altern√¢ncia de visibilidade de senha no formul√°rio de altera√ß√£o de senha
- **Corrigido**: Script de ponto de entrada do Docker descartando mensagens de log
- **Corrigido**: Data `Pr√≥xima execu√ß√£o` n√£o sendo recalculada ap√≥s coletar logs de backup
- **Melhorado**: Experi√™ncia do usu√°rio na configura√ß√£o de e-mail com melhor valida√ß√£o e feedback

---

## Licen√ßa {#license}

Este projeto √© licenciado sob a [Licen√ßa Apache 2.0](https://github.com/wsj-br/duplistatus/blob/main/LICENSE).

**Copyright ¬© 2025 Waldemar Scudeller Jr.**
