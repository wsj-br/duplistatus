---
translation_last_updated: '2026-03-01T00:45:19.348Z'
source_file_mtime: '2026-02-16T00:30:39.431Z'
source_file_hash: 2b55509cc1de9065
translation_language: pt-BR
source_file_path: release-notes/0.9.x.md
---
# Vers√£o 0.9.x {#version-09x}

## Vis√£o geral {#overview}

Vers√£o 0.9.x √© uma vers√£o principal que introduz um **Sistema Abrangente de Controle de Acesso de Usu√°rios e Seguran√ßa**. Esta vers√£o transforma **duplistatus** de uma aplica√ß√£o de acesso aberto em um sistema seguro e multi-usu√°rio com controle de acesso baseado em fun√ß√µes, registro de auditoria abrangente e recursos de seguran√ßa de n√≠vel empresarial. Toda a funcionalidade existente agora √© protegida por autentica√ß√£o, garantindo que apenas usu√°rios autorizados possam acessar e gerenciar o monitoramento de backup.

## Mudan√ßas Significativas {#breaking-changes}

### Autentica√ß√£o Obrigat√≥ria {#authentication-required}

- **Todas as p√°ginas agora exigem autentica√ß√£o** - Os usu√°rios devem entrar para acessar a aplica√ß√£o
- **Conta admin padr√£o** √© criada automaticamente:
  - Nome de usu√°rio: `admin`
  - Senha: `Duplistatus09` (deve ser alterada no primeiro login)
- **Sess√µes existentes s√£o invalidadas** - Todos os usu√°rios devem entrar ap√≥s a atualiza√ß√£o
- **Endpoints de API agora exigem autentica√ß√£o** - Integra√ß√µes externas devem incluir cookies de sess√£o ou usar requisi√ß√µes autenticadas

:::warning
**Todos os usu√°rios devem entrar ap√≥s atualizar para a vers√£o 0.9.x.** As credenciais padr√£o de admin s√£o admin/Duplistatus09. Altere a senha imediatamente ap√≥s o primeiro login.
:::

### Migra√ß√£o de Schema de Banco de Dados {#database-schema-migration}

- **Migra√ß√£o autom√°tica de v3.1 para v4.0** para instala√ß√µes existentes
- **Novas tabelas adicionadas**: `users`, `sessions`, `audit_log`
- **Backup do banco de dados criado automaticamente** antes da migra√ß√£o
- **Novas instala√ß√µes** iniciam diretamente com schema v4.0 (nenhuma migra√ß√£o necess√°ria)

## Novos Recursos {#new-features}

### Controle de Acesso de Usu√°rio e Sistema de Seguran√ßa {#user-access-control-security-system}

#### Sistema de Autentica√ß√£o {#authentication-system}

- **Funcionalidade de login/logout de usu√°rio** com gerenciamento seguro de sess√£o
- **Autentica√ß√£o baseada em senha** com hash bcrypt (fator de custo 12)
- **Mecanismo de bloqueio de conta** (5 tentativas falhadas, bloqueio de 15 minutos)
- **Altera√ß√£o for√ßada de senha** no primeiro login
- **Aplica√ß√£o de pol√≠tica de senha**:
  - M√≠nimo 8 caracteres
  - Pelo menos uma letra mai√∫scula
  - Pelo menos uma letra min√∫scula
  - Pelo menos um n√∫mero
  - Caracteres especiais opcional
- **Funcionalidade "Lembrar de mim"** com persist√™ncia de nome de usu√°rio em localStorage
- **Autentica√ß√£o baseada em sess√£o** com sess√µes apoiadas em banco de dados (substitui em mem√≥ria)
- **Prote√ß√£o CSRF** integrada com autentica√ß√£o
- **Cookies HTTP-only** para seguran√ßa de sess√£o
- **Rastreamento de endere√ßo IP e agente do usu√°rio** para monitoramento de seguran√ßa

#### Gerenciamento de usu√°rios (Apenas Admin) {#user-management-admin-only}

- **Cria√ß√£o de usu√°rio** com gera√ß√£o autom√°tica de senha tempor√°ria
- **Lista de usu√°rios** com pesquisa, pagina√ß√£o e filtros
- **Edi√ß√£o de usu√°rio** (nome de usu√°rio, status de admin, requisito de altera√ß√£o de senha)
- **Funcionalidade de redefini√ß√£o de senha** com exibi√ß√£o de senha tempor√°ria
- **Exclus√£o de usu√°rio** com salvaguardas (impede exclus√£o do √∫ltimo admin)
- **Controle de acesso baseado em fun√ß√£o** (fun√ß√µes Admin/Usu√°rio)
- **Indicadores de status** (Ativo, Bloqueado, Deve alterar a senha)
- **Rastreamento de √∫ltimo login** e exibi√ß√£o

#### Sistema de Registro de Auditoria {#audit-logging-system}

- **Trilha de auditoria abrangente** para todas as mudan√ßas do sistema e a√ß√µes do usu√°rio
- **Visualizador de log de auditoria** com filtragem avan√ßada:
  - Filtragem por intervalo de data
  - Filtragem por usu√°rio
  - Filtragem por a√ß√£o
  - Filtragem por categoria
  - Filtragem por status
- **Funcionalidade de exporta√ß√£o** (formatos CSV e JSON)
- **Estat√≠sticas e an√°lises de log de auditoria**
- **Per√≠odo de reten√ß√£o configur√°vel** (30-365 dias, padr√£o: 90 dias)
- **Tarefa de limpeza autom√°tica cron** (executa diariamente √†s 2h UTC)
- **API de limpeza manual** com suporte a simula√ß√£o
- **Log de auditoria para**:
  - Eventos de autentica√ß√£o (login, logout, altera√ß√µes de senha, bloqueios de conta)
  - Opera√ß√µes de gerenciamento de usu√°rios (criar, atualizar, excluir, redefini√ß√µes de senha)
  - Mudan√ßas de configura√ß√£o (e-mail, NTFY, modelos, toler√¢ncia de atraso, configura√ß√µes de backup)
  - Opera√ß√µes de backup (coleta, exclus√£o, limpeza)
  - Gerenciamento de servidores (adicionar, atualizar, excluir)
  - Opera√ß√µes do sistema (migra√ß√µes, limpeza, notifica√ß√µes)

### Redesign da P√°gina de Configura√ß√µes {#settings-page-redesign}

- **Navega√ß√£o moderna da barra lateral** com barra lateral recolh√≠vel
- **Persist√™ncia de estado da barra lateral espec√≠fica do usu√°rio** (prefer√™ncia de recolhida/expandida salva por usu√°rio)
- **Se√ß√µes de configura√ß√µes agrupadas**:
  - **Notifica√ß√µes**: Notifica√ß√µes de backup, Monitoramento de backup, Modelos
  - **Integra√ß√µes**: NTFY, E-mail
  - **Sistema**: Servidores, Usu√°rios (apenas admin), Log de Auditoria
- **Barra lateral fixa** que permanece vis√≠vel ao rolar
- **Design responsivo** com espa√ßamento otimizado
- **√çcone de configura√ß√µes e t√≠tulo "Configura√ß√µes do Sistema"** no cabe√ßalho da barra lateral
- **Bot√£o Voltar** integrado ao cabe√ßalho do aplicativo

### Melhorias da Interface do Usu√°rio {#user-interface-enhancements}

- **P√°gina de login independente** com design moderno
- **Caixa de sele√ß√£o "Lembrar de mim"** no formul√°rio de login para persist√™ncia do nome de usu√°rio
- **Bot√µes mostrar/ocultar senha** nos formul√°rios de login e altera√ß√£o de senha
- **Modal de altera√ß√£o de senha** com lista de valida√ß√£o em tempo real
- **Indicador de usu√°rio e bot√£o de sair** no cabe√ßalho do aplicativo
- **Visibilidade da interface baseada em fun√ß√£o** (recursos apenas para admin ocultos de usu√°rios comuns)
- **Crach√°s e indicadores de status** em toda a interface
- **Prefer√™ncias espec√≠ficas do usu√°rio** armazenadas em localStorage (por exemplo, estado da barra lateral recolhida)

### Recursos de Seguran√ßa {#security-features}

- **Hashing de senha** com bcrypt (padr√£o da ind√∫stria)
- **Sanitiza√ß√£o de dados sens√≠veis** em logs de auditoria (senhas, tokens, segredos nunca s√£o registrados)
- **Limita√ß√£o de taxa** para tentativas de login
- **Expira√ß√£o de sess√£o** (24 horas)
- **Valida√ß√£o de token CSRF** para todas as opera√ß√µes que alteram estado
- **Ferramenta CLI de recupera√ß√£o do Admin** para redefini√ß√£o de senha se bloqueado

### Ferramentas do Desenvolvedor {#developer-tools}

- **Script CLI de recupera√ß√£o de Admin** (`admin-recovery`) para f√°cil execu√ß√£o em cont√™ineres Docker
- **Funciona tanto localmente quanto em Docker** com detec√ß√£o autom√°tica de caminho
- **Interfaces TypeScript abrangentes** (sem tipos `any`)
- **Middleware de autentica√ß√£o** para prote√ß√£o de rotas
- **Classe utilit√°ria de logger de auditoria** com m√©todos de conveni√™ncia

---

## üöÄ Notas de Migra√ß√£o {#migration-notes}

### Da Vers√£o 0.8.x {#from-version-08x}

Esta vers√£o introduz autentica√ß√£o e requer que todos os usu√°rios entrem. Quando atualizar da vers√£o 0.8.x:

1. **Migra√ß√£o Autom√°tica do Banco de Dados**: A aplica√ß√£o migrar√° automaticamente o esquema do seu banco de dados da v3.1 para v4.0
2. **Backup do Banco de Dados**: Um backup autom√°tico √© criado antes da migra√ß√£o
3. **Conta Admin Padr√£o**: Uma conta admin padr√£o √© criada:
   - Nome de usu√°rio: `admin`
   - Senha: `Duplistatus09`
   - **Voc√™ deve alterar esta senha no primeiro login**
4. **Invalida√ß√£o de Sess√£o**: Todas as sess√µes existentes s√£o invalidadas
5. **Login do Usu√°rio Obrigat√≥rio**: Todos os usu√°rios devem entrar ap√≥s a atualiza√ß√£o
6. **Autentica√ß√£o de API**: As integra√ß√µes externas devem ser atualizadas para incluir autentica√ß√£o

### Considera√ß√µes de Seguran√ßa {#security-considerations}

- **Alterar Senha Padr√£o**: Altere a senha padr√£o do admin imediatamente ap√≥s o primeiro login
- **Criar Contas de Usu√°rio**: Crie contas de usu√°rio individuais para cada pessoa que precisa de acesso
- **Verificar Logs de Auditoria**: Verifique os logs de auditoria regularmente para monitoramento de seguran√ßa
- **Configurar Reten√ß√£o**: Defina o per√≠odo apropriado de reten√ß√£o de log de auditoria com base em seus requisitos de conformidade
- **Backup da Chave Mestra**: Se estiver atualizando da vers√£o 0.8.x, certifique-se de que o arquivo `.duplistatus.key` est√° em backup

### Primeiros Passos de Login {#first-login-steps}

1. **Entrar** com credenciais padr√£o (`admin` / `Duplistatus09`)
2. **Alterar senha** quando solicitado (obrigat√≥rio no primeiro login)
3. **Criar usu√°rio** para outros usu√°rios (Configura√ß√µes ‚Üí Usu√°rios)
4. **Configurar reten√ß√£o de log de auditoria** se necess√°rio (Configura√ß√µes ‚Üí Log de Auditoria)
5. **Revisar logs de auditoria** para verificar se o sistema est√° funcionando corretamente

---

## üêõ Corre√ß√µes de Bugs {#bug-fixes}

- Corrigidos problemas de persist√™ncia de sess√£o entre reinicializa√ß√µes de servidor
- Melhorado tratamento de erros para falhas de autentica√ß√£o
- Aprimorado feedback de valida√ß√£o de senha
- Corrigidas inconsist√™ncias de UI na p√°gina de Configura√ß√µes
- Melhorado desempenho de filtragem do Log de Auditoria

---

## Pontos de Extremidade da API {#api-endpoints}

### Pontos de Extremidade de Autentica√ß√£o {#authentication-endpoints}

- `POST /api/auth/login` - Autentica√ß√£o de usu√°rio
- `POST /api/auth/logout` - Encerramento de sess√£o
- `GET /api/auth/me` - Informa√ß√µes do usu√°rio atual
- `POST /api/auth/change-password` - Altera√ß√£o de senha

### Endpoints de Gerenciamento de usu√°rios (Apenas Admin) {#user-management-endpoints-admin-only}

- `GET /api/users` - Listar usu√°rios
- `POST /api/users` - Criar usu√°rio
- `PATCH /api/users/{id}` - Atualizar usu√°rio
- `DELETE /api/users/{id}` - Excluir usu√°rio

### Endpoints de Log de Auditoria {#audit-log-endpoints}

- `GET /api/audit-log` - Consultar logs de auditoria
- `GET /api/audit-log/download` - Exportar logs de auditoria
- `GET /api/audit-log/stats` - Estat√≠sticas de auditoria
- `POST /api/audit-log/cleanup` - Limpeza manual (apenas admin)
- `GET /api/audit-log/retention` - Obter configura√ß√£o de reten√ß√£o
- `PATCH /api/audit-log/retention` - Atualizar reten√ß√£o (apenas admin)

:::note
Todos os endpoints da API agora exigem autentica√ß√£o. Consulte a [Refer√™ncia da API](../api-reference/authentication-security.md) para detalhes sobre autentica√ß√£o.
:::

---

## Suporte {#support}

### Obtendo Ajuda {#getting-help}

- **Documenta√ß√£o**: [Guia do Usu√°rio](../user-guide/overview.md)
- **Refer√™ncia de API**: [Documenta√ß√£o da API](../api-reference/authentication-security.md)
- **Guia de Migra√ß√£o**: [Migra√ß√£o de Atualiza√ß√£o de Vers√£o](../migration/version_upgrade.md)
- **Recupera√ß√£o de Admin**: [Recupera√ß√£o de Conta Admin](../user-guide/admin-recovery.md)
- **Comunidade**: [GitHub Discussions](https://github.com/wsj-br/duplistatus/discussions)
- **Problemas**: [GitHub Issues](https://github.com/wsj-br/duplistatus/issues)

### Relatando Bugs {#reporting-bugs}

Ao relatar bugs, inclua:
- Vers√£o: 0.9.x
- Sistema operacional e vers√£o
- Vers√£o do Docker
- Mensagens de erro e logs
- Passos para reproduzir
- Fun√ß√£o do usu√°rio (admin/usu√°rio) se relevante

---

## Changelog {#changelog}

### Altera√ß√µes Detalhadas {#detailed-changes}

- **Adicionado**: Sistema completo de autentica√ß√£o e autoriza√ß√£o
- **Adicionado**: Gerenciamento de usu√°rios com controle de acesso baseado em fun√ß√£o
- **Adicionado**: Sistema abrangente de auditoria
- **Adicionado**: Redesign da p√°gina de Configura√ß√µes com barra lateral recolh√≠vel
- **Adicionado**: Ferramenta CLI de recupera√ß√£o Admin
- **Adicionado**: Aplica√ß√£o de pol√≠tica de Senha
- **Adicionado**: Mecanismo de bloqueio de conta
- **Adicionado**: Gerenciamento de sess√£o com persist√™ncia em banco de dados
- **Alterado**: Todas as p√°ginas agora exigem autentica√ß√£o
- **Alterado**: Schema do banco de dados de v3.1 para v4.0
- **Alterado**: Armazenamento de sess√£o de em mem√≥ria para suportado por banco de dados
- **Alterado**: Layout e navega√ß√£o da p√°gina de Configura√ß√µes
- **Corrigido**: Persist√™ncia de sess√£o entre reinicializa√ß√µes do Servidor
- **Corrigido**: V√°rias inconsist√™ncias de UI
- **Melhorado**: Postura de Seguran√ßa com auditoria abrangente
- **Melhorado**: Experi√™ncia do usu√°rio com p√°ginas modernas de Login e Configura√ß√µes
- **Melhorado**: Qualidade de c√≥digo com interfaces TypeScript e princ√≠pios DRY

---

## Licen√ßa {#license}

Este projeto est√° licenciado sob a [Apache License 2.0](https://github.com/wsj-br/duplistatus/blob/main/LICENSE).

**Copyright ¬© 2025 Waldemar Scudeller Jr.**
