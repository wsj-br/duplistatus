# Vers√£o 1.3.0 {#version-130}

## Vis√£o geral {#overview}

A Vers√£o 1.3.0 introduz pol√≠ticas de senha configur√°veis, um novo visualizador de logs da aplica√ß√£o para administradores, exibi√ß√£o de dias da semana com suporte a localidade e v√°rias melhorias na experi√™ncia do usu√°rio. Esta vers√£o se concentra em ferramentas administrativas aprimoradas e suporte de internacionaliza√ß√£o melhorado.

## Novos recursos {#new-features}

### Pol√≠tica de senha configur√°vel {#configurable-password-policy}

- **Vari√°veis de ambiente de pol√≠tica de senha**: Configure os requisitos de valida√ß√£o de senha por meio de vari√°veis de ambiente:
  - `PWD_ENFORCE`: Defina como `false` para desativar requisitos de complexidade de senha (mai√∫sculas, min√∫sculas, n√∫meros). O padr√£o √© aplicar todas as regras. Quando desabilitado, apenas o comprimento m√≠nimo √© aplicado.
  - `PWD_MIN_LEN`: Define o comprimento m√≠nimo da senha em caracteres. O padr√£o √© 8 caracteres.
  - A verifica√ß√£o de senha padr√£o (preven√ß√£o do uso da senha de admin padr√£o) √© sempre aplicada independentemente da configura√ß√£o `PWD_ENFORCE`.

### Visualizador de logs do aplicativo {#application-logs-viewer}

- **Novo visualizador de logs exclusivo para admin**: Visualize e baixe logs da aplica√ß√£o diretamente da p√°gina de Configura√ß√µes:
  - Acesse o arquivo consolidado `application.log` e vers√µes de log rotacionadas
  - Seletor de contagem de linhas configur√°vel (100, 500, 1000, 5000, 10000 linhas)
  - Filtro de pesquisa em tempo real com correspond√™ncia de texto sem distin√ß√£o de mai√∫sculas e min√∫sculas
  - Altern√¢ncia de rolagem autom√°tica para monitoramento de log em tempo real com sondagem autom√°tica
  - Copiar para a √°rea de transfer√™ncia e exportar logs filtrados como arquivo de texto
  - Exibi√ß√£o de metadados do arquivo mostrando contagem de linhas, tamanho do arquivo e data e hora da √∫ltima modifica√ß√£o
  - Rota√ß√£o de log na inicializa√ß√£o do cont√™iner (configur√°vel via `LOG_ROTATION_VERSIONS`, padr√£o: 5)

### Guia do usu√°rio com reconhecimento de contexto {#context-aware-user-guide}

- **Bot√£o de ajuda din√¢mico**: O bot√£o Guia do usu√°rio no cabe√ßalho do aplicativo agora abre a documenta√ß√£o relevante para a p√°gina atual. A dica de ferramenta √© atualizada para mostrar "Ajuda para {pageName}" para indicar qual documenta√ß√£o ser√° aberta.

### Aprimoramento da configura√ß√£o do servidor {#server-configuration-enhancement}

- **Acesso r√°pido √† interface do Duplicati**: Clicar com o bot√£o direito no bot√£o de configura√ß√£o do servidor ou em qualquer item de servidor no popover de sele√ß√£o de servidor abre a interface legada do Duplicati (`/ngax`) em uma nova aba.

---

## üîß Melhorias {#improvements}

### Exibi√ß√£o de dias da semana com reconhecimento de localidade {#locale-aware-weekday-display}

- **Ordena√ß√£o de dias da semana internacionalizada**: A exibi√ß√£o de dias da semana no formul√°rio de monitoramento de backups atrasados agora respeita as configura√ß√µes de localidade do seu navegador. Os dias da semana s√£o exibidos na ordem correta com base na localidade (segunda a domingo para Reino Unido/Europa, domingo a s√°bado para EUA/Brasil).

### Tratamento aprimorado de erros SMTP {#enhanced-smtp-error-handling}

- **Mensagens de erro melhoradas**: As mensagens de erro SMTP agora fornecem orienta√ß√£o mais precisa:
  - Os erros de autentica√ß√£o indicam claramente problemas de nome de usu√°rio/senha
  - Os erros de vers√£o SSL/TLS s√£o identificados corretamente
  - As sugest√µes de tipo de conex√£o aparecem apenas quando genuinamente relevantes

### Comportamento de notifica√ß√£o de toast {#toast-notification-behaviour}

- **Notifica√ß√µes de erro persistentes**: Os toasts de erro agora persistem at√© serem fechados manualmente, garantindo que voc√™ n√£o perca mensagens de erro importantes. Os toasts de sucesso e informativos s√£o fechados automaticamente ap√≥s 3 segundos.

### Tabela de configura√ß√µes de notifica√ß√£o {#notification-settings-table}

- **Layout simplificado**: A tabela de configura√ß√µes de notifica√ß√£o foi simplificada com uma coluna "Servidor / Backup" combinada e √≠cones contextuais indicando o status de configura√ß√£o de destino adicional.

---

## üöÄ Notas de migra√ß√£o {#migration-notes}

### Da vers√£o 1.2.x {#from-version-12x}

Ao atualizar para a vers√£o 1.3.0:

1. **Pol√≠tica de senha**: A nova pol√≠tica de senha usa como padr√£o a aplica√ß√£o de todos os requisitos de complexidade. Se voc√™ precisar de uma pol√≠tica de senha mais simples, configure as vari√°veis de ambiente `PWD_ENFORCE` e `PWD_MIN_LEN`.

2. **Logs da aplica√ß√£o**: Toda a sa√≠da do cont√™iner (servidor e servi√ßo cron) agora √© consolidada em um √∫nico arquivo `data/logs/application.log`.

3. **Rota√ß√£o de log**: A rota√ß√£o de log √© configur√°vel por meio da vari√°vel de ambiente `LOG_ROTATION_VERSIONS` (padr√£o: 5 vers√µes).

4. **Nenhuma migra√ß√£o de banco de dados necess√°ria**: Esta vers√£o n√£o requer altera√ß√µes no esquema do banco de dados.

---

## Endpoints da API {#api-endpoints}

O seguinte endpoint da API foi introduzido nesta vers√£o:

### Endpoint de pol√≠tica de senha {#password-policy-endpoint}

- `GET /api/auth/password-policy` - Retorna a configura√ß√£o de pol√≠tica de senha atual

### Endpoints de logs da aplica√ß√£o {#application-logs-endpoints}

- `GET /api/application-logs` - Visualizar logs com sele√ß√£o de arquivo e funcionalidade de cauda
- `GET /api/application-logs/export` - Exportar logs filtrados como arquivo de texto

### Endpoints removidos {#removed-endpoints}

Os seguintes endpoints da API n√£o utilizados foram removidos nesta vers√£o:

- `DELETE /api/backups/[backupId]` - Endpoint exclusivo de desenvolvimento que nunca foi usado
- `GET /api/audit-log/stats` - Endpoint n√£o era chamado pelo visualizador de log de auditoria

---

## Suporte {#support}

### Obtendo ajuda {#getting-help}

- **Documenta√ß√£o**: [Guia do usu√°rio](../user-guide/overview.md)
- **Configura√ß√µes de e-mail**: [Guia de configura√ß√£o de e-mail](../user-guide/settings/email-settings.md)
- **Refer√™ncia da API**: [Documenta√ß√£o da API](../api-reference/overview.md)
- **Guia de migra√ß√£o**: [Migra√ß√£o de atualiza√ß√£o de vers√£o](../migration/version_upgrade.md)
- **Comunidade**: [Discuss√µes do GitHub](https://github.com/wsj-br/duplistatus/discussions)
- **Problemas**: [Problemas do GitHub](https://github.com/wsj-br/duplistatus/issues)

### Relatando bugs {#reporting-bugs}

Ao relatar bugs, inclua:

- Vers√£o: 1.3.0
- Sistema operacional e vers√£o
- Vers√£o do Docker/podman
- Tipo de cont√™iner (Docker ou podman/Pod)
- Mensagens de erro e logs
- Etapas para reproduzir

---

## Changelog {#changelog}

### Altera√ß√µes da vers√£o 1.3.0 {#version-130-changes}

- **Adicionado**: Pol√≠tica de senha configur√°vel por meio das vari√°veis de ambiente `PWD_ENFORCE` e `PWD_MIN_LEN`
- **Adicionado**: Visualizador de logs da aplica√ß√£o em Configura√ß√µes (apenas admin)
- **Adicionado**: Rota√ß√£o de log com contagem de vers√£o configur√°vel (`LOG_ROTATION_VERSIONS`)
- **Adicionado**: Bot√£o de guia do usu√°rio com reconhecimento de contexto que abre documenta√ß√£o relevante
- **Adicionado**: Clique com o bot√£o direito na configura√ß√£o do servidor para abrir a interface legada do Duplicati
- **Adicionado**: Endpoint da API `GET /api/auth/password-policy` para configura√ß√£o de pol√≠tica de senha
- **Adicionado**: Endpoints da API para visualiza√ß√£o e exporta√ß√£o de logs da aplica√ß√£o
- **Alterado**: A exibi√ß√£o de dias da semana agora respeita as configura√ß√µes de localidade do navegador
- **Alterado**: Os toasts de erro persistem at√© serem fechados manualmente
- **Alterado**: Os toasts de sucesso s√£o fechados automaticamente ap√≥s 3 segundos (anteriormente 5 segundos)
- **Alterado**: Tabela de configura√ß√µes de notifica√ß√£o simplificada com coluna "Servidor / Backup" combinada
- **Alterado**: Consolidados todos os logs do cont√™iner em um √∫nico arquivo `application.log`
- **Melhorado**: As mensagens de erro SMTP fornecem orienta√ß√£o mais precisa
- **Removido**: Endpoints da API n√£o utilizados (`DELETE /api/backups/[backupId]` e `GET /api/audit-log/stats`) que n√£o eram chamados pela aplica√ß√£o

---

## Licen√ßa {#license}

Este projeto √© licenciado sob a [Licen√ßa Apache 2.0](https://github.com/wsj-br/duplistatus/blob/main/LICENSE).

**Copyright ¬© 2025 Waldemar Scudeller Jr.**
