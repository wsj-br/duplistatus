# Vers√£o 0.8.x {#version-08x}

## Vis√£o geral {#overview}

Vers√£o 0.8.x √© uma atualiza√ß√£o importante que introduz melhorias significativas de seguran√ßa, capacidades aprimoradas de gerenciamento de servidores e um sistema abrangente de notifica√ß√µes com suporte a e-mail SMTP. Esta vers√£o se concentra em fortalecer a seguran√ßa, melhorar a experi√™ncia do usu√°rio e fornecer op√ß√µes mais flex√≠veis de monitoramento de backup.

## Novos recursos {#new-features}

### Melhorias no gerenciamento de servidores {#server-management-enhancements}

- **Persist√™ncia autom√°tica de URL e senha do servidor** ao coletar backups
  - Os usu√°rios podem atualizar a URL e a senha usando dois m√©todos:
    - Recoletar backups com valores atualizados
    - Modificando configura√ß√µes em `Configura√ß√µes ‚Üí Configura√ß√µes de servidor`

### Monitoramento aprimorado de atrasos {#enhanced-overdue-monitoring}

- **Nova aba de configura√ß√£o `Monitoramento de backups atrasados`** com configura√ß√µes de intervalo compat√≠veis com servidor Duplicati
  - Suporte para intervalos personalizados (por exemplo, "1D12h")
  - Atualiza√ß√µes autom√°ticas de intervalo de atraso da configura√ß√£o do Duplicati durante a coleta de logs de backup
  - **Recomendado:** Execute a coleta ap√≥s alterar intervalos de trabalho de backup no servidor Duplicati para sincronizar a configura√ß√£o do duplistatus
  - Os modelos de notifica√ß√£o agora usam `{backup_interval}` em vez de `{backup_interval_value}` e `{backup_interval_type}`.

### Configura√ß√£o de dispositivo NTFY {#ntfy-device-configuration}

- **Gera√ß√£o de c√≥digo QR** para configura√ß√£o autom√°tica de dispositivo para receber notifica√ß√µes do **duplistatus**
  - Clique com o bot√£o direito no bot√£o `Visualizar mensagens NTFY` na barra de ferramentas da aplica√ß√£o
  - Bot√£o "Configurar dispositivo" em `Configura√ß√µes ‚Üí Configura√ß√µes NTFY`

### Coleta de backup aprimorada {#improved-backup-collection}

- **Detec√ß√£o autom√°tica de HTTP/HTTPS**, as conex√µes s√£o tentadas nesta ordem: HTTPS ‚Üí HTTPS com auto-assinado ‚Üí fallback HTTP
- **Menu suspenso de sele√ß√£o de servidor** na interface `Coletar logs de backup` para coleta direta espec√≠fica do servidor
- **M√∫ltiplos endere√ßos** no nome do host (separados por v√≠rgula) agora s√£o aceitos (devem compartilhar a mesma senha e porta)
- **Bot√µes de coleta de backup de servidor √∫nico** adicionados ao `Painel (tabela)`, `Configura√ß√µes ‚Üí Monitoramento de backups atrasados` e `Configura√ß√µes ‚Üí Servidores`
- **Funcionalidade de coleta em massa** para todos os servidores com configura√ß√£o v√°lida (url e senha)
  - Bot√µes `Coletar todos` em `Configura√ß√µes ‚Üí Monitoramento de backups atrasados` e `Configura√ß√µes ‚Üí Servidores`
  - Menu de contexto com clique direito no bot√£o `Coletar logs de backup` na barra de ferramentas da aplica√ß√£o

### Sistema de notifica√ß√£o aprimorado {#enhanced-notification-system}

- **Suporte a notifica√ß√£o por e-mail SMTP:**
  - Configura√ß√£o do servidor SMTP em `Configura√ß√µes ‚Üí Configura√ß√µes de e-mail`
  - Configura√ß√£o por trabalho de backup para notifica√ß√µes NTFY e/ou e-mail
  - Modelos formatados em HTML usando `Configura√ß√µes ‚Üí Modelos de notifica√ß√£o` existentes

- **Configura√ß√£o de notifica√ß√£o por trabalho de backup:**
  - Prefer√™ncias de notifica√ß√£o individuais em `Configura√ß√µes ‚Üí Notifica√ß√µes de backup`
  - Indicadores visuais (√≠cones acinzentados) quando NTFY ou e-mail n√£o est√° configurado corretamente

- **Suporte a localidade:**
  - criada uma nova vari√°vel de ambiente `LANG` para definir a localidade na aplica√ß√£o
  - agora √© previs√≠vel o formato de datas e n√∫meros nas notifica√ß√µes e logs

---

## üîí Melhorias de seguran√ßa {#security-enhancements}

### Prote√ß√£o CSRF {#csrf-protection}

- **Autentica√ß√£o baseada em sess√£o** com gerenciamento robusto de sess√£o
- **Valida√ß√£o de token CSRF** aplicada para todas as solicita√ß√µes de API que alteram estado
- **As sess√µes expiram automaticamente** ap√≥s 24 horas; os tokens CSRF s√£o atualizados a cada 30 minutos
- Garante prote√ß√£o contra falsifica√ß√£o de solicita√ß√£o entre sites, mantendo compatibilidade com APIs externas

### Minimiza√ß√£o de senha em texto simples {#plaintext-password-minimization}

- **As senhas podem ser definidas apenas pela interface do usu√°rio**; nenhum endpoint de API exp√µe senhas armazenadas
- **A manipula√ß√£o de senha em texto simples √© minimizada** em todo o sistema

### Criptografia avan√ßada para dados sens√≠veis {#advanced-cryptography-for-sensitive-data}

- **Criptografia de dados sens√≠veis** (por exemplo, senhas, credenciais SMTP) usando AES-256-GCM
- **A chave mestra √© gerada automaticamente** e armazenada com seguran√ßa em `.duplistatus.key`
- **PBKDF2 com 100.000 itera√ß√µes** usado para deriva√ß√£o de chave para fortalecer a seguran√ßa
- **As tags de autentica√ß√£o s√£o verificadas** e a mem√≥ria √© limpa com seguran√ßa ap√≥s o uso
- **As permiss√µes do arquivo de chave mestra** s√£o definidas estritamente como 0400 para prote√ß√£o m√°xima

---

## üé® Melhorias na interface do usu√°rio {#user-interface-improvements}

- **Estilo de aplica√ß√£o aprimorado** com novo esquema de cores e iconografia para melhor usabilidade
- **Sistema de design moderno** com indicadores de status aprimorados
- **√çcones coloridos e indicadores de progresso** para melhor feedback visual
- **Abas de configura√ß√µes** renomeadas para facilitar o uso
- **Intera√ß√µes de API simplificadas** e experi√™ncia do usu√°rio aprimorada

---

## üìö Atualiza√ß√µes de documenta√ß√£o {#documentation-updates}

- **Documenta√ß√£o abrangente** usando Docusaurus para navega√ß√£o e pesquisa aprimoradas
- **Documenta√ß√£o de API aprimorada** com descri√ß√µes detalhadas de endpoints
- **Guias do usu√°rio atualizados** cobrindo novos recursos e melhorias de seguran√ßa
- **Guias de instala√ß√£o** com instru√ß√µes de configura√ß√£o aprimoradas
- **Documenta√ß√£o de desenvolvimento** para colaboradores

---

## üîß Melhorias t√©cnicas {#technical-improvements}

- **Configura√ß√£o aprimorada do Next.js** com desempenho e experi√™ncia do usu√°rio aprimorados
- **Divis√£o de pacote otimizada** para reduzir avisos de pr√©-carregamento
- **Tratamento de erro aprimorado** para problemas de conex√£o e intera√ß√µes de API
- **Gerenciamento de configura√ß√µes de backup refatorado** para melhor manipula√ß√£o de configura√ß√£o
- **Gerenciamento de sess√£o aprimorado** e prote√ß√£o CSRF em intera√ß√µes de API
- **Migra√ß√µes de banco de dados aprimoradas** e atualiza√ß√µes de esquema
- **V√°rias corre√ß√µes de bugs** e simplifica√ß√£o de c√≥digo.

---

## üöÄ Notas de migra√ß√£o {#migration-notes}

### Da vers√£o 0.7.x {#from-version-07x}

Esta vers√£o inclui melhorias significativas de seguran√ßa e novos recursos. Ao atualizar da vers√£o 0.7.x:

1. **Migra√ß√£o autom√°tica de banco de dados:** A aplica√ß√£o migrar√° automaticamente seu esquema de banco de dados para suportar novos recursos
2. **Gera√ß√£o de chave mestra:** Uma nova chave mestra ser√° gerada para criptografia de dados sens√≠veis
3. **Gerenciamento de sess√£o:** As sess√µes existentes ser√£o invalidadas e novas sess√µes protegidas por CSRF ser√£o estabelecidas
4. **Atualiza√ß√µes de configura√ß√£o:** Algumas chaves de configura√ß√£o foram atualizadas para suportar novos recursos
5. **Altera√ß√µes de modelo:** As vari√°veis `{backup_interval_value}` e `{backup_interval_type}` foram substitu√≠das por `{backup_interval}`. Os modelos padr√£o ser√£o ajustados automaticamente, mas os modelos personalizados n√£o ser√£o migrados. Verifique seus modelos.

### Considera√ß√µes de seguran√ßa {#security-considerations}

- **Arquivo de chave mestra:** Certifique-se de que o arquivo `.duplistatus.key` seja devidamente feito backup e protegido
- **Permiss√µes de arquivo:** O arquivo de chave mestra ter√° permiss√µes restritas (0400) para seguran√ßa
- **Criptografia de senha:** As senhas existentes ser√£o criptografadas usando o novo sistema criptogr√°fico

---

## üêõ Corre√ß√µes de bugs {#bug-fixes}

- Formata√ß√£o de tempo relativo corrigida para retornar "agora mesmo" para diferen√ßas de tempo menores que 15 segundos
- Tratamento de erro aprimorado para vari√°veis de ambiente ausentes
- Testes de conex√£o e valida√ß√£o aprimorados
- Corrigidas v√°rias inconsist√™ncias de UI e feedback do usu√°rio aprimorado

---

Esta vers√£o representa um passo significativo em seguran√ßa, usabilidade e funcionalidade. Recomendamos atualizar para aproveitar os novos recursos e melhorias de seguran√ßa.
