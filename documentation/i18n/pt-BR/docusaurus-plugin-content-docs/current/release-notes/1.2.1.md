---
translation_last_updated: '2026-02-05T00:21:12.340Z'
source_file_mtime: '2026-01-27T14:22:06.834Z'
source_file_hash: 0687484e1f3f39cb
translation_language: pt-BR
source_file_path: release-notes/1.2.1.md
---
# Vers√£o 1.2.1 {#version-121}

## Vis√£o geral {#overview}

Vers√£o 1.2.1 √© uma vers√£o menor que introduz melhorias significativas no gerenciamento de notifica√ß√µes de backup, melhora as capacidades de registro de auditoria, corrige a detec√ß√£o de pr√≥xima execu√ß√£o/atrasado em casos extremos e adiciona funcionalidade de backup e restaura√ß√£o do banco de dados. Esta vers√£o se concentra em melhorar a experi√™ncia do usu√°rio com Configura√ß√µes de Notifica√ß√£o.

## Novos Recursos {#new-features}

### Gerenciamento Aprimorado de Notifica√ß√µes de Backup {#enhanced-backup-notifications-management}

- **Sistema de padr√µes e heran√ßa no n√≠vel do servidor**: Configure destinos adicionais padr√£o (eventos de notifica√ß√£o, e-mails e t√≥picos NTFY) no n√≠vel do servidor que todos os backups herdam automaticamente. Os backups podem substituir esses padr√µes quando necess√°rio, com indicadores visuais claros mostrando o status de heran√ßa.
- **Hierarquia visual melhorada**: Os backups agora s√£o agrupados por servidor com linhas de cabe√ßalho de servidor distintas. Os valores herdados s√£o claramente marcados com √≠cones de link, e os valores substitu√≠dos podem ser facilmente revertidos para heran√ßa.
- **Opera√ß√µes em massa**: O bot√£o "Sincronizar com todos" limpa todas as substitui√ß√µes de backup para fazer com que todos os backups herdem dos padr√µes do servidor. O bot√£o "Limpar tudo" limpa todos os destinos adicionais mantendo a estrutura de heran√ßa.
- **Funcionalidade de teste**: Adicionados bot√µes de testar e-mail e testar notifica√ß√£o diretamente na p√°gina de Configura√ß√µes de Notifica√ß√µes de backup. Os bot√µes de teste est√£o dispon√≠veis tanto para configura√ß√µes de backup individual quanto para opera√ß√µes de edi√ß√£o em massa, permitindo que voc√™ verifique a entrega de notifica√ß√µes antes de aplicar as altera√ß√µes.
- **Suporte a c√≥digo QR**: Adicionado bot√£o de c√≥digo QR para t√≥picos NTFY para compartilhar facilmente t√≥picos de notifica√ß√£o com dispositivos m√≥veis.

### Aprimoramentos de Modelo de Notifica√ß√£o {#notification-template-enhancements}

- **Nova vari√°vel `{log_text}`**: Adicionada vari√°vel `{log_text}` aos modelos de notifica√ß√£o, fornecendo acesso a mensagens de texto de log para uso em mensagens de notifica√ß√£o. A vari√°vel cont√©m o texto completo de avisos e erros combinados, formatado como texto simples com um item por linha.
- **Migra√ß√£o autom√°tica de modelos**: O sistema inclui um mecanismo de atualiza√ß√£o lenta que detecta e atualiza automaticamente os modelos padr√£o antigos quando s√£o lidos pela primeira vez ap√≥s uma atualiza√ß√£o. Os modelos personalizados s√£o preservados inalterados.

### Gerenciamento de Banco de Dados {#database-management}

- **Funcionalidade de backup do banco de dados**: Os administradores agora podem criar backups de todo o banco de dados na p√°gina de Configura√ß√µes de Manuten√ß√£o do banco de dados. Suporta ambos os formatos bin√°rio (.db) e texto SQL (.sql) para flexibilidade.
- **Funcionalidade de restaura√ß√£o do banco de dados**: Restaure o banco de dados a partir de arquivos de backup criados anteriormente com cria√ß√£o autom√°tica de backup de seguran√ßa, valida√ß√£o de integridade e revers√£o em caso de falha. Todas as sess√µes s√£o limpas ap√≥s a restaura√ß√£o por seguran√ßa.

### Detec√ß√£o de Chave Mestra {#master-key-detection}

- **Detec√ß√£o autom√°tica de altera√ß√£o de chave mestra**: Ap√≥s o login, o sistema verifica automaticamente se o arquivo `.duplistatus.key` foi alterado. Se detectado, todas as senhas criptografadas s√£o limpas e um popup modal informa aos usu√°rios que as senhas precisam ser reconfiguradas. Isso previne erros ao restaurar de backups ou migrar para um novo sistema.

### Melhorias no Monitoramento de backups atrasados {#overdue-monitoring-improvements}

- **Exporta√ß√£o CSV aprimorada**: Adicionada coluna "Last Backup Timestamp (DB)" ao arquivo CSV gerado pelo bot√£o "Baixar CSV" nas configura√ß√µes de Monitoramento de backups atrasados. Isso permite que os usu√°rios comparem a data e hora do √∫ltimo backup real do banco de dados com a data e hora do "√öltimo backup" configurada.
- **Dica de ferramenta Pr√≥xima execu√ß√£o**: Ao passar o mouse sobre o valor "Pr√≥xima execu√ß√£o" em cada linha, agora √© exibida uma dica de ferramenta mostrando a data e hora do √∫ltimo backup do banco de dados, formatada da mesma forma que a exibi√ß√£o de "Pr√≥xima execu√ß√£o".

### Melhorias de Registro de Auditoria {#audit-logging-enhancements}

- **Entradas individuais de auditoria de notifica√ß√µes**: Cada notifica√ß√£o e e-mail enviado agora gera uma entrada separada no log de auditoria com detalhes sobre o canal, configura√ß√£o e resultado (sucesso ou falha). Isso inclui notifica√ß√µes de teste, fornecendo melhor rastreabilidade para entrega de notifica√ß√µes.
- **Registro robusto de falhas**: Todas as opera√ß√µes de log de auditoria para falhas de notifica√ß√£o agora est√£o encapsuladas em blocos try-catch para evitar que erros de log de auditoria interrompam fluxos de notifica√ß√£o. O sistema tenta recuperar a configura√ß√£o SMTP se ela n√£o estiver imediatamente dispon√≠vel ao registrar falhas de e-mail.
- **Log de auditoria melhorado para atualiza√ß√µes de configura√ß√£o**: As entradas de log de auditoria `email_config_updated` e `ntfy_config_updated` agora registram apenas quando h√° altera√ß√µes reais na configura√ß√£o. Quando altera√ß√µes s√£o detectadas, o log de auditoria inclui valores antigos e novos para cada campo modificado, facilitando o rastreamento do que especificamente mudou.

### Melhorias na documenta√ß√£o {#documentation-improvements}

- O estilo da documenta√ß√£o foi atualizado para se alinhar com a apar√™ncia e a sensa√ß√£o do aplicativo. A barra lateral tamb√©m foi revisada para melhorar a visibilidade e facilitar a navega√ß√£o.

---

## üêõ Corre√ß√µes de Bugs {#bug-fixes}

- **Corre√ß√£o de datas e horas do log de auditoria**: As datas e horas no visualizador de log de auditoria agora s√£o exibidas corretamente no fuso hor√°rio do navegador do usu√°rio em vez de GMT. As datas e horas do SQLite (armazenadas em UTC) agora s√£o analisadas corretamente como UTC e convertidas para o fuso hor√°rio local do navegador para exibi√ß√£o.
- **C√°lculo corrigido de "Pr√≥xima execu√ß√£o" e detec√ß√£o de atrasos**: A coluna "Pr√≥xima execu√ß√£o" nas configura√ß√µes de monitoramento de backups atrasados agora calcula e exibe com precis√£o a pr√≥xima data de backup esperada, levando em considera√ß√£o tanto o agendamento de backup quanto a data e hora do √∫ltimo backup. Isso se aplica tanto a trabalhos de backup agendados quanto aos executados manualmente, resultando em detec√ß√£o mais confi√°vel de atrasos.

---

## üöÄ Notas de Migra√ß√£o {#migration-notes}

### Da Vers√£o 1.1.x {#from-version-11x}

Quando atualizar para a vers√£o 1.2.1:

1. **Modelos de notifica√ß√£o**: O sistema atualizar√° automaticamente os modelos de notifica√ß√£o padr√£o para incluir a nova vari√°vel `{log_text}` na primeira vez em que forem acessados ap√≥s a atualiza√ß√£o. Os modelos personalizados permanecer√£o inalterados. Se voc√™ deseja usar a nova vari√°vel `{log_text}` em seus pr√≥prios modelos, ser√° necess√°rio atualiz√°-los ou restaurar os modelos padr√£o manualmente.

2. **Altera√ß√µes de Chave Mestra**: Se voc√™ restaurar de um backup ou migrar para um novo sistema com um arquivo `.duplistatus.key` diferente, o sistema detectar√° automaticamente isso e solicitar√° que voc√™ reconfigure as senhas criptografadas (senhas SMTP e senhas do servidor Duplicati).

3. **Backup/Restaura√ß√£o do banco de dados**: A nova funcionalidade de backup e restaura√ß√£o do banco de dados est√° dispon√≠vel na p√°gina Configura√ß√µes de Manuten√ß√£o do banco de dados. √â recomendado criar um backup antes de atualizar, embora nenhuma altera√ß√£o de esquema de banco de dados seja obrigat√≥ria para esta vers√£o.

4. **N√£o √© Necess√°ria Migra√ß√£o de Banco de Dados**: Esta vers√£o n√£o requer altera√ß√µes no esquema do banco de dados.

---

## Pontos de Extremidade da API {#api-endpoints}

Os seguintes endpoints de API foram introduzidos nesta vers√£o.

### Endpoints de Autentica√ß√£o e Seguran√ßa {#authentication-security-endpoints}

- `GET /api/auth/admin-must-change-password` - Verificar se o usu√°rio administrador deve alterar a senha

### Endpoints de Gerenciamento de Banco de Dados {#database-management-endpoints}

- `GET /api/database/backup` - Criar backup do banco de dados (formato bin√°rio ou SQL)
- `POST /api/database/restore` - Restaurar banco de dados a partir do arquivo de backup

### Endpoints de Gerenciamento de Backup {#backup-management-endpoints}

- `GET /api/backups/last-timestamps` - Obter √∫ltimos timestamps de backup para todas as combina√ß√µes de servidor-backup

---

## Suporte {#support}

### Obtendo Ajuda {#getting-help}

- **Documenta√ß√£o**: [Guia do Usu√°rio](../user-guide/overview.md)
- **Configura√ß√µes de e-mail**: [Guia de Configura√ß√£o de e-mail](../user-guide/settings/email-settings.md)
- **Refer√™ncia de API**: [Documenta√ß√£o de API](../api-reference/overview.md)
- **Guia de Migra√ß√£o**: [Migra√ß√£o de Atualiza√ß√£o de Vers√£o](../migration/version_upgrade.md)
- **Comunidade**: [GitHub Discussions](https://github.com/wsj-br/duplistatus/discussions)
- **Problemas**: [GitHub Issues](https://github.com/wsj-br/duplistatus/issues)

### Relatando Bugs {#reporting-bugs}

Quando reportar bugs, por favor inclua:
- Vers√£o: 1.2.1
- Sistema operacional e vers√£o
- Vers√£o do Docker/podman
- Tipo de container (Docker ou podman/Pod)
- Mensagens de erro e logs
- Passos para reproduzir

---

## Changelog {#changelog}

### Altera√ß√µes da Vers√£o 1.2.1 {#version-121-changes}

- **Adicionado**: Sistema de padr√µes em n√≠vel de servidor e heran√ßa para notifica√ß√µes de backup
- **Adicionado**: Funcionalidade de testar e-mail e testar notifica√ß√£o nas configura√ß√µes de Notifica√ß√µes de backup
- **Adicionado**: Bot√£o de c√≥digo QR para t√≥picos NTFY
- **Adicionado**: Coluna "Data e hora do √∫ltimo backup (BD)" na exporta√ß√£o CSV de monitoramento de backups atrasados
- **Adicionado**: Dica de ferramenta para o texto "Pr√≥xima execu√ß√£o" nas configura√ß√µes de monitoramento de backups atrasados
- **Adicionado**: Entradas individuais de log de auditoria para cada notifica√ß√£o e e-mail enviados
- **Adicionado**: Robustez aprimorada de log de auditoria para falhas de notifica√ß√£o
- **Adicionado**: Vari√°vel `{log_text}` para modelos de notifica√ß√£o com migra√ß√£o autom√°tica de modelo
- **Adicionado**: Detec√ß√£o autom√°tica de altera√ß√µes de arquivo de chave mestra
- **Adicionado**: Funcionalidade de backup do banco de dados (formatos bin√°rio e SQL)
- **Adicionado**: Funcionalidade de restaura√ß√£o do banco de dados com backups de seguran√ßa e valida√ß√£o de integridade
- **Adicionado**: Endpoint de API `GET /api/auth/admin-must-change-password` para verificar requisito de altera√ß√£o de senha de admin
- **Adicionado**: Endpoint de API `GET /api/database/backup` para criar backups do banco de dados
- **Adicionado**: Endpoint de API `POST /api/database/restore` para restaurar banco de dados a partir de backup
- **Adicionado**: Endpoint de API `GET /api/backups/last-timestamps` para recuperar datas e horas do √∫ltimo backup
- **Alterado**: Log de auditoria aprimorado para atualiza√ß√µes de configura√ß√£o de e-mail e NTFY (registra apenas altera√ß√µes reais)
- **Alterado**: Formul√°rios de altera√ß√£o de senha n√£o exigem mais confirma√ß√£o ao mostrar senhas sem m√°scara.
- **Alterado**: Senhas s√£o apagadas com seguran√ßa da mem√≥ria quando formul√°rios de altera√ß√£o de senha s√£o fechados.
- **Alterado**: Inclu√≠do alternador de visualiza√ß√£o de senha no formul√°rio de coletar backups.
- **Alterado**: Vari√°vel `{server_alias}` agora mostra o nome do servidor entre colchetes
- **Alterado**: Documenta√ß√£o atualizada, estilo alinhado com a aplica√ß√£o e barra lateral refatorada.
- **Corrigido**: Datas e horas do log de auditoria exibindo em GMT em vez do fuso hor√°rio do navegador
- **Corrigido**: Log de auditoria de falha de e-mail e NTFY
- **Corrigido**: Exibi√ß√£o de "Pr√≥xima execu√ß√£o" nas configura√ß√µes de monitoramento de backups atrasados mostrando datas incorretas

---

## Licen√ßa {#license}

Este projeto est√° licenciado sob a [Apache License 2.0](https://github.com/wsj-br/duplistatus/blob/main/LICENSE).

**Copyright ¬© 2025 Waldemar Scudeller Jr.**
