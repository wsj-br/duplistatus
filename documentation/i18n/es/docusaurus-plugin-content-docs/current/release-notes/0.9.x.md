---
translation_last_updated: '2026-01-31T00:51:28.948Z'
source_file_mtime: '2026-01-27T14:22:06.834Z'
source_file_hash: 0e80121c539af670
translation_language: es
source_file_path: release-notes/0.9.x.md
---
# Versi√≥n 0.9.x {#version-09x}

## Resumen {#overview}

Versi√≥n 0.9.x es una versi√≥n principal que introduce un completo **Sistema de Control de Acceso de Usuarios y Seguridad**. Esta versi√≥n transforma **duplistatus** de una aplicaci√≥n de acceso abierto a un sistema seguro, multiusuario con control de acceso basado en roles, registro de auditor√≠a integral y caracter√≠sticas de seguridad de nivel empresarial. Toda la funcionalidad existente ahora est√° protegida por autenticaci√≥n, asegurando que solo los usuarios autorizados puedan acceder y gestionar la supervisi√≥n de backup.

## Cambios Incompatibles {#breaking-changes}

### Autenticaci√≥n Requerida {#authentication-required}

- **Todas las p√°ginas ahora requieren autenticaci√≥n** - Los usuarios deben iniciar sesi√≥n para acceder a la aplicaci√≥n
- **La cuenta de admin por defecto** se crea autom√°ticamente:
  - Nombre de usuario: `admin`
  - Contrase√±a: `Duplistatus09` (debe cambiarse en el primer inicio de sesi√≥n)
- **Las sesiones existentes se invalidan** - Todos los usuarios deben iniciar sesi√≥n despu√©s de la actualizaci√≥n
- **Los puntos finales de API ahora requieren autenticaci√≥n** - Las integraciones externas deben incluir cookies de sesi√≥n o utilizar solicitudes autenticadas

:::warning
**Todos los usuarios deben iniciar sesi√≥n despu√©s de actualizar a la versi√≥n 0.9.x.** Las credenciales de admin por defecto son admin/Duplistatus09. Cambie la contrase√±a inmediatamente despu√©s del primer inicio de sesi√≥n.
:::

### Migraci√≥n del Esquema de Base de Datos {#database-schema-migration}

- **Migraci√≥n autom√°tica de v3.1 a v4.0** para instalaciones existentes
- **Nuevas tablas agregadas**: `users`, `sessions`, `audit_log`
- **Backup de base de datos creado autom√°ticamente** antes de la migraci√≥n
- **Nuevas instalaciones** inician directamente con esquema v4.0 (no se requiere migraci√≥n)

## Nuevas Caracter√≠sticas {#new-features}

### Control de Acceso de Usuario y Sistema de Seguridad {#user-access-control-security-system}

#### Sistema de Autenticaci√≥n {#authentication-system}

- **Funcionalidad de Iniciar sesi√≥n/Cerrar sesi√≥n de Usuario** con gesti√≥n segura de sesiones
- **Autenticaci√≥n basada en Contrase√±a** con hash bcrypt (factor de costo 12)
- **Mecanismo de bloqueo de cuenta** (5 intentos fallidos, bloqueo de 15 minutos)
- **Cambio de Contrase√±a forzado** en el primer Iniciar sesi√≥n
- **Aplicaci√≥n de pol√≠tica de Contrase√±a**:
  - M√≠nimo 8 caracteres
  - Al menos una letra may√∫scula
  - Al menos una letra min√∫scula
  - Al menos un n√∫mero
  - Caracteres especiales opcional
- **Funcionalidad "Recordarme"** con persistencia de Nombre de usuario en localStorage
- **Autenticaci√≥n basada en sesiones** con sesiones respaldadas por base de datos (reemplaza en memoria)
- **Protecci√≥n CSRF** integrada con autenticaci√≥n
- **Cookies solo HTTP** para Seguridad de sesiones
- **Seguimiento de Direcci√≥n IP y Agente de usuario** para monitoreo de Seguridad

#### Gesti√≥n de usuarios (Solo Admin) {#user-management-admin-only}

- **Creaci√≥n de usuarios** con generaci√≥n autom√°tica de contrase√±a temporal
- **Lista de usuarios** con b√∫squeda, paginaci√≥n y filtrado
- **Edici√≥n de usuarios** (nombre de usuario, estado de admin, requisito de cambio de contrase√±a)
- **Funcionalidad de restablecimiento de contrase√±a** con visualizaci√≥n de contrase√±a temporal
- **Eliminaci√≥n de usuarios** con salvaguardas (previene la eliminaci√≥n del √∫ltimo admin)
- **Control de acceso basado en roles** (roles Admin/Usuario)
- **Indicadores de estado** (Activo, Bloqueado, Debe cambiar la contrase√±a)
- **Seguimiento y visualizaci√≥n del √∫ltimo inicio de sesi√≥n**

#### Sistema de Registro de Auditor√≠a {#audit-logging-system}

- **Registro de auditor√≠a completo** para todos los cambios del sistema y acciones de usuarios
- **Visor de log de auditor√≠a** con filtrado avanzado:
  - Filtrado por rango de fechas
  - Filtrado por usuario
  - Filtrado por acci√≥n
  - Filtrado por categor√≠a
  - Filtrado por estado
- **Funcionalidad de exportaci√≥n** (formatos CSV y JSON)
- **Estad√≠sticas y an√°lisis del log de auditor√≠a**
- **Per√≠odo de retenci√≥n configurable** (30-365 d√≠as, por defecto: 90 d√≠as)
- **Trabajo cron de limpieza autom√°tica** (se ejecuta diariamente a las 2 AM UTC)
- **API de limpieza manual** con soporte de ejecuci√≥n en seco
- **Registro de auditor√≠a para**:
  - Eventos de autenticaci√≥n (iniciar sesi√≥n, cerrar sesi√≥n, cambios de contrase√±a, bloqueos de cuenta)
  - Operaciones de gesti√≥n de usuarios (crear, actualizar, eliminar, restablecimiento de contrase√±as)
  - Cambios de configuraci√≥n (correo electr√≥nico, NTFY, plantillas, tolerancia de retraso, configuraci√≥n de backup)
  - Operaciones de backup (recopilaci√≥n, eliminaci√≥n, limpieza)
  - Gesti√≥n de servidores (a√±adir, actualizar, eliminar)
  - Operaciones del sistema (migraciones, limpieza, notificaciones)

### Redise√±o de la P√°gina de Configuraci√≥n {#settings-page-redesign}

- **Navegaci√≥n moderna de la barra lateral** con barra lateral contra√≠ble
- **Persistencia del estado de la barra lateral espec√≠fica del usuario** (preferencia de contra√≠do/expandido guardada por usuario)
- **Secciones de configuraci√≥n agrupadas**:
  - **Notificaciones**: Notificaciones de backup, Monitoreo de backups retrasados, Plantillas
  - **Integraciones**: NTFY, Correo electr√≥nico
  - **Sistema**: Servidores, Usuarios (solo admin), Log de Auditor√≠a
- **Barra lateral fija** que permanece visible mientras se desplaza
- **Dise√±o responsivo** con espaciado optimizado
- **Icono de configuraci√≥n y t√≠tulo "Configuraci√≥n del Sistema"** en el encabezado de la barra lateral
- **Bot√≥n Atr√°s** integrado en el encabezado de la aplicaci√≥n

### Mejoras de la Interfaz de Usuario {#user-interface-enhancements}

- **P√°gina de inicio de sesi√≥n independiente** con dise√±o moderno
- **Casilla de verificaci√≥n "Recordarme"** en el formulario de inicio de sesi√≥n para la persistencia del nombre de usuario
- **Botones Mostrar/Ocultar contrase√±a** en los formularios de inicio de sesi√≥n y cambio de contrase√±a
- **Modal Cambiar contrase√±a** con lista de validaci√≥n en tiempo real
- **Indicador de usuario y bot√≥n Cerrar sesi√≥n** en el encabezado de la aplicaci√≥n
- **Visibilidad de interfaz basada en roles** (caracter√≠sticas solo para admin ocultas de usuarios normales)
- **Insignias e indicadores de estado** en toda la interfaz de usuario
- **Preferencias espec√≠ficas del usuario** almacenadas en localStorage (por ejemplo, estado de la barra lateral contra√≠da)

### Caracter√≠sticas de Seguridad {#security-features}

- **Cifrado de contrase√±as** con bcrypt (est√°ndar de la industria)
- **Sanitizaci√≥n de datos sensibles** en logs de auditor√≠a (contrase√±as, tokens, secretos nunca registrados)
- **Limitaci√≥n de velocidad** para intentos de inicio de sesi√≥n
- **Expiraci√≥n de sesi√≥n** (24 horas)
- **Validaci√≥n de token CSRF** para todas las operaciones que cambian estado
- **Herramienta CLI de recuperaci√≥n de Admin** para restablecimiento de contrase√±a si est√° bloqueado

### Herramientas para Desarrolladores {#developer-tools}

- **Script CLI de recuperaci√≥n de Admin** (`admin-recovery`) para f√°cil ejecuci√≥n en contenedores Docker
- **Funciona tanto localmente como en Docker** con detecci√≥n autom√°tica de rutas
- **Interfaces TypeScript completas** (sin tipos `any`)
- **Middleware de autenticaci√≥n** para protecci√≥n de rutas
- **Clase de utilidad de registro de auditor√≠a** con m√©todos de conveniencia

---

## üöÄ Notas de Migraci√≥n {#migration-notes}

### Desde la Versi√≥n 0.8.x {#from-version-08x}

Esta versi√≥n introduce autenticaci√≥n y requiere que todos los usuarios inicien sesi√≥n. Al actualizar desde la versi√≥n 0.8.x:

1. **Migraci√≥n autom√°tica de base de datos**: La aplicaci√≥n migrar√° autom√°ticamente el esquema de su base de datos de v3.1 a v4.0
2. **Backup de base de datos**: Se crea un backup autom√°tico antes de la migraci√≥n
3. **Cuenta Admin por defecto**: Se crea una cuenta admin por defecto:
   - Nombre de usuario: `admin`
   - Contrase√±a: `Duplistatus09`
   - **Debe cambiar esta contrase√±a al iniciar sesi√≥n por primera vez**
4. **Invalidaci√≥n de sesiones**: Todas las sesiones existentes se invalidan
5. **Inicio de sesi√≥n de usuario requerido**: Todos los usuarios deben iniciar sesi√≥n despu√©s de la actualizaci√≥n
6. **Autenticaci√≥n de API**: Las integraciones externas deben actualizarse para incluir autenticaci√≥n

### Consideraciones de Seguridad {#security-considerations}

- **Cambiar contrase√±a por defecto**: Cambiar la contrase√±a de admin por defecto inmediatamente despu√©s del primer inicio de sesi√≥n
- **Crear cuentas de usuario**: Crear cuentas de usuario individuales para cada persona que necesite acceso
- **Revisar logs de auditor√≠a**: Verificar los logs de auditor√≠a regularmente para monitoreo de seguridad
- **Configurar retenci√≥n**: Establecer un per√≠odo de retenci√≥n del log de auditor√≠a apropiado seg√∫n sus requisitos de cumplimiento normativo
- **Backup de clave maestra**: Si est√° actualizando desde 0.8.x, aseg√∫rese de que el archivo `.duplistatus.key` est√© respaldado

### Pasos para el Primer Inicio de Sesi√≥n {#first-login-steps}

1. **Iniciar sesi√≥n** con las credenciales por defecto (`admin` / `Duplistatus09`)
2. **Cambiar contrase√±a** cuando se le solicite (obligatorio en el primer inicio de sesi√≥n)
3. **Crear cuentas de usuario** para otros usuarios (Configuraci√≥n ‚Üí Usuarios)
4. **Configurar la retenci√≥n del log de auditor√≠a** si es necesario (Configuraci√≥n ‚Üí Log de Auditor√≠a)
5. **Revisar los logs de auditor√≠a** para verificar que el sistema funciona correctamente

---

## üêõ Correcciones de Errores {#bug-fixes}

- Se corrigieron problemas de persistencia de sesi√≥n en reinicios de servidor
- Se mejor√≥ el manejo de errores para fallos de autenticaci√≥n
- Se mejor√≥ la retroalimentaci√≥n de validaci√≥n de contrase√±a
- Se corrigieron inconsistencias de interfaz de usuario en la p√°gina de configuraci√≥n
- Se mejor√≥ el rendimiento del filtrado del Log de Auditor√≠a

---

## Puntos finales de API {#api-endpoints}

### Puntos finales de autenticaci√≥n {#authentication-endpoints}

- `POST /api/auth/login` - Autenticaci√≥n de usuario
- `POST /api/auth/logout` - Terminaci√≥n de sesi√≥n
- `GET /api/auth/me` - Informaci√≥n del usuario actual
- `POST /api/auth/change-password` - Cambio de contrase√±a

### Puntos finales de Gesti√≥n de usuarios (Solo Admin) {#user-management-endpoints-admin-only}

- `GET /api/users` - Listar usuarios
- `POST /api/users` - Crear usuario
- `PATCH /api/users/{id}` - Actualizar usuario
- `DELETE /api/users/{id}` - Eliminar usuario

### Puntos finales del Log de Auditor√≠a {#audit-log-endpoints}

- `GET /api/audit-log` - Consultar logs de auditor√≠a
- `GET /api/audit-log/download` - Exportar logs de auditor√≠a
- `GET /api/audit-log/stats` - Estad√≠sticas de auditor√≠a
- `POST /api/audit-log/cleanup` - Limpieza manual (solo Admin)
- `GET /api/audit-log/retention` - Obtener configuraci√≥n de retenci√≥n
- `PATCH /api/audit-log/retention` - Actualizar retenci√≥n (solo Admin)

:::note
Todos los puntos finales de la API ahora requieren autenticaci√≥n. Consulte la [Referencia de API](../api-reference/authentication-security.md) para obtener detalles sobre autenticaci√≥n.
:::

---

## Soporte {#support}

### Obtener Ayuda {#getting-help}

- **Documentaci√≥n**: [Gu√≠a del Usuario](../user-guide/overview.md)
- **Referencia de API**: [Documentaci√≥n de API](../api-reference/authentication-security.md)
- **Gu√≠a de Migraci√≥n**: [Migraci√≥n de Actualizaci√≥n de Versi√≥n](../migration/version_upgrade.md)
- **Recuperaci√≥n de Admin**: [Recuperaci√≥n de Cuenta Admin](../user-guide/admin-recovery.md)
- **Comunidad**: [GitHub Discussions](https://github.com/wsj-br/duplistatus/discussions)
- **Problemas**: [GitHub Issues](https://github.com/wsj-br/duplistatus/issues)

### Reportar Errores {#reporting-bugs}

Cu√°ndo reportar errores, por favor incluya:
- Versi√≥n: 0.9.x
- Sistema operativo y versi√≥n
- Versi√≥n de Docker
- Mensajes de Error y Logs
- Pasos para reproducir
- Rol de Usuario (admin/usuario) si es relevante

---

## Registro de cambios {#changelog}

### Cambios Detallados {#detailed-changes}

- **Agregado**: Sistema completo de autenticaci√≥n y autorizaci√≥n
- **Agregado**: Gesti√≥n de usuarios con control de acceso basado en roles
- **Agregado**: Sistema integral de registro de auditor√≠a
- **Agregado**: Redise√±o de p√°gina de Configuraci√≥n con barra lateral contra√≠ble
- **Agregado**: Herramienta CLI de recuperaci√≥n de Admin
- **Agregado**: Aplicaci√≥n de pol√≠tica de contrase√±a
- **Agregado**: Mecanismo de bloqueo de cuenta
- **Agregado**: Gesti√≥n de sesi√≥n con persistencia en base de datos
- **Modificado**: Todas las p√°ginas ahora requieren autenticaci√≥n
- **Modificado**: Esquema de base de datos de v3.1 a v4.0
- **Modificado**: Almacenamiento de sesi√≥n de en memoria a respaldado por base de datos
- **Modificado**: Dise√±o y navegaci√≥n de p√°gina de Configuraci√≥n
- **Corregido**: Persistencia de sesi√≥n entre reinicios del servidor
- **Corregido**: Varias inconsistencias de interfaz de usuario
- **Mejorado**: Postura de Seguridad con registro de auditor√≠a integral
- **Mejorado**: Experiencia del usuario con p√°ginas modernas de Iniciar sesi√≥n y Configuraci√≥n
- **Mejorado**: Calidad de c√≥digo con interfaces TypeScript y principios DRY

---

## Licencia {#license}

Este proyecto est√° licenciado bajo la [Licencia Apache 2.0](https://github.com/wsj-br/duplistatus/blob/main/LICENSE).

**Copyright ¬© 2025 Waldemar Scudeller Jr.**
