---
translation_last_updated: '2026-02-16T02:21:40.895Z'
source_file_mtime: '2026-02-16T00:30:39.431Z'
source_file_hash: 0242331b35b340ab
translation_language: es
source_file_path: release-notes/1.2.1.md
---
# Versi贸n 1.2.1 {#version-121}

## Resumen {#overview}

Versi贸n 1.2.1 es una versi贸n menor que introduce mejoras significativas en la gesti贸n de notificaciones de backup, mejora las capacidades de registro de auditor铆a, corrige la detecci贸n de pr贸xima ejecuci贸n/retrasado en casos extremos y a帽ade funcionalidad de backup y restauraci贸n de base de datos. Esta versi贸n se enfoca en mejorar la experiencia del usuario con la configuraci贸n de notificaciones.

## Nuevas Caracter铆sticas {#new-features}

### Gesti贸n mejorada de notificaciones de backup {#enhanced-backup-notifications-management}

- **Sistema de herencia y valores por defecto a nivel de servidor**: Configure Destinos adicionales por defecto (Eventos de notificaci贸n, Correos electr贸nicos y temas NTFY) a nivel de servidor que todas las copias de seguridad heredan autom谩ticamente. Los backups pueden anular estos valores por defecto cuando sea necesario, con indicadores visuales claros que muestren el estado de herencia.
- **Jerarqu铆a visual mejorada**: Los backups ahora se agrupan por servidor con filas de encabezado de servidor distintas. Los valores heredados se marcan claramente con iconos de enlace, y los valores anulados se pueden revertir f谩cilmente a la herencia.
- **Operaciones masivas**: El bot贸n "Sincronizar con todos" limpia todas las anulaciones de backup para que todas las copias de seguridad hereden de los valores por defecto del servidor. El bot贸n "Limpiar todos" limpia todos los Destinos adicionales mientras mantiene la estructura de herencia.
- **Funcionalidad de prueba**: Se agregaron botones de Probar correo electr贸nico y Probar notificaci贸n directamente en la p谩gina de Configuraci贸n de Notificaciones de backup. Los botones de prueba est谩n disponibles tanto para la configuraci贸n individual de backup como para operaciones de Edici贸n masiva, lo que le permite verificar la entrega de notificaciones antes de aplicar cambios.
- **Compatibilidad con c贸digos QR**: Se agreg贸 bot贸n de c贸digo QR para temas NTFY para compartir f谩cilmente temas de notificaci贸n con dispositivos m贸viles.

### Mejoras en Plantillas de Notificaci贸n {#notification-template-enhancements}

- **Nueva variable `{log_text}`**: Se a帽adi贸 la variable `{log_text}` a las plantillas de notificaci贸n, proporcionando acceso a los mensajes de texto de registro para su uso en mensajes de notificaci贸n. La variable contiene el texto completo de advertencias y errores combinados, formateado como texto sin formato con un elemento por l铆nea.
- **Migraci贸n autom谩tica de plantillas**: El sistema incluye un mecanismo de actualizaci贸n diferida que detecta y actualiza autom谩ticamente las plantillas por defecto antiguas cuando se leen por primera vez despu茅s de una actualizaci贸n. Las plantillas personalizadas se conservan sin cambios.

### Gesti贸n de Bases de Datos {#database-management}

- **Funcionalidad de Backup de base de datos**: Los administradores ahora pueden crear backups de toda la base de datos desde la p谩gina de Configuraci贸n de Mantenimiento de base de datos. Admite formatos binarios (.db) y texto SQL (.sql) para mayor flexibilidad.
- **Funcionalidad de Restauraci贸n de base de datos**: Restaure la base de datos desde archivos de backup creados anteriormente con creaci贸n autom谩tica de backup de seguridad, validaci贸n de integridad y reversi贸n en caso de fallo. Todas las sesiones se cierran despu茅s de la restauraci贸n por razones de seguridad.

### Detecci贸n de Clave Maestra {#master-key-detection}

- **Detecci贸n autom谩tica de cambio de clave maestra**: Despu茅s de iniciar sesi贸n, el sistema comprueba autom谩ticamente si el archivo `.duplistatus.key` ha cambiado. Si se detecta, todas las contrase帽as cifradas se borran y un cuadro de di谩logo modal informa a los usuarios que las contrase帽as deben reconfigurarse. Esto previene errores al restaurar desde Backups o migrar a un nuevo Sistema.

### Mejoras en la supervisi贸n de backups {#overdue-monitoring-improvements}

- **Exportaci贸n CSV mejorada**: Se agreg贸 la columna "Marca de tiempo del 煤ltimo backup (BD)" al archivo CSV generado por el bot贸n "Descargar CSV" en la configuraci贸n de supervisi贸n de backups. Esto permite a los usuarios comparar la marca de tiempo real del 煤ltimo backup de la base de datos con la marca de tiempo "ltimo backup" configurada.
- **Informaci贸n sobre "Pr贸xima ejecuci贸n"**: Al pasar el cursor sobre el valor "Pr贸xima ejecuci贸n" en cada fila, ahora se muestra una informaci贸n sobre herramientas que muestra la marca de tiempo del 煤ltimo backup de la base de datos, formateada de la misma manera que la pantalla "Pr贸xima ejecuci贸n".

### Mejoras en el Registro de Auditor铆a {#audit-logging-enhancements}

- **Entradas individuales de auditor铆a de notificaciones**: Cada notificaci贸n y correo electr贸nico enviado ahora genera una entrada de log de auditor铆a separada con detalles sobre el canal, la configuraci贸n y el resultado (茅xito o fallo). Esto incluye notificaciones de prueba, proporcionando una mejor trazabilidad para la entrega de notificaciones.
- **Registro de fallos robusto**: Todas las operaciones de logging de auditor铆a para fallos de notificaciones ahora est谩n envueltas en bloques try-catch para evitar que los errores de logging de auditor铆a rompan los flujos de notificaciones. El sistema intenta recuperar la configuraci贸n SMTP si no est谩 inmediatamente disponible al registrar fallos de correo electr贸nico.
- **Logging de auditor铆a mejorado para actualizaciones de configuraci贸n**: Las entradas de log de auditor铆a `email_config_updated` y `ntfy_config_updated` ahora solo se registran cuando hay cambios reales en la configuraci贸n. Cuando se detectan cambios, el log de auditor铆a incluye valores antiguos y nuevos para cada campo modificado, facilitando el seguimiento de qu茅 cambi贸 espec铆ficamente.

### Mejoras en la documentaci贸n {#documentation-improvements}

- El estilo de la documentaci贸n se ha actualizado para alinearse con la apariencia y la experiencia del usuario de la aplicaci贸n. La barra lateral tambi茅n ha sido revisada para mejorar la visibilidad y facilitar la navegaci贸n.

---

##  Correcciones de Errores {#bug-fixes}

- **Marcas de tiempo del log de auditor铆a corregidas**: Las marcas de tiempo en el visor de log de auditor铆a ahora se muestran correctamente en la zona horaria del navegador del usuario en lugar de GMT. Las marcas de tiempo de SQLite (almacenadas en UTC) ahora se analizan correctamente como UTC y se convierten a la zona horaria local del navegador para su visualizaci贸n.
- **C谩lculo de "Pr贸xima ejecuci贸n" corregido y detecci贸n de retrasos mejorada**: La columna "Pr贸xima ejecuci贸n" en la configuraci贸n de supervisi贸n de backups ahora calcula y muestra con precisi贸n la siguiente fecha de backup esperada, teniendo en cuenta tanto la programaci贸n del backup como la marca de tiempo del 煤ltimo backup. Esto se aplica tanto a trabajos de backup programados como ejecutados manualmente, lo que resulta en una detecci贸n de retrasos m谩s confiable.

---

##  Notas de Migraci贸n {#migration-notes}

### Desde la Versi贸n 1.1.x {#from-version-11x}

Al actualizar a la versi贸n 1.2.1:

1. **Plantillas de notificaci贸n**: El sistema actualizar谩 autom谩ticamente las plantillas de notificaci贸n por defecto para incluir la nueva variable `{log_text}` la primera vez que se acceda a ellas despu茅s de actualizar. Las plantillas personalizadas permanecer谩n sin cambios. Si desea utilizar la nueva variable `{log_text}` en sus propias plantillas, deber谩 actualizarlas o restaurar las plantillas por defecto manualmente.

2. **Cambios de Clave Maestra**: Si restaura desde un backup o migra a un nuevo sistema con un archivo `.duplistatus.key` diferente, el sistema detectar谩 autom谩ticamente esto y le solicitar谩 que reconfigure las contrase帽as cifradas (contrase帽as SMTP y contrase帽as del servidor Duplicati).

3. **Backup/Restauraci贸n de base de datos**: Nueva funcionalidad de backup y restauraci贸n de base de datos disponible en la p谩gina de Configuraci贸n de Mantenimiento de base de datos. Se recomienda crear un backup antes de actualizar, aunque no se requieren cambios de esquema de base de datos para esta versi贸n.

4. **No se requiere migraci贸n de base de datos**: Esta versi贸n no requiere cambios en el esquema de la base de datos.

---

## Puntos finales de API {#api-endpoints}

Los siguientes puntos finales de API se han introducido en esta versi贸n.

### Puntos finales de autenticaci贸n y seguridad {#authentication-security-endpoints}

- `GET /api/auth/admin-must-change-password` - Verificar si el usuario administrador debe cambiar la contrase帽a

### Puntos finales de gesti贸n de base de datos {#database-management-endpoints}

- `GET /api/database/backup` - Crear backup de base de datos (formato binario o SQL)
- `POST /api/database/restore` - Restaurar base de datos desde archivo de backup

### Puntos finales de gesti贸n de backup {#backup-management-endpoints}

- `GET /api/backups/last-timestamps` - Obtener las marcas de tiempo del 煤ltimo backup para todas las combinaciones de servidor-backup

---

## Soporte {#support}

### Obtener Ayuda {#getting-help}

- **Documentaci贸n**: [Gu铆a del usuario](../user-guide/overview.md)
- **Configuraci贸n de correo electr贸nico**: [Gu铆a de configuraci贸n de correo electr贸nico](../user-guide/settings/email-settings.md)
- **Referencia de API**: [Documentaci贸n de API](../api-reference/overview.md)
- **Gu铆a de migraci贸n**: [Migraci贸n de actualizaci贸n de versi贸n](../migration/version_upgrade.md)
- **Comunidad**: [GitHub Discussions](https://github.com/wsj-br/duplistatus/discussions)
- **Problemas**: [GitHub Issues](https://github.com/wsj-br/duplistatus/issues)

### Informar de Errores {#reporting-bugs}

Cu谩ndo reportar errores, incluya:
- Versi贸n: 1.2.1
- Sistema operativo y versi贸n
- Versi贸n de Docker/podman
- Tipo de contenedor (Docker o podman/Pod)
- Mensajes de error y logs
- Pasos para reproducir

---

## Registro de cambios {#changelog}

### Cambios de la Versi贸n 1.2.1 {#version-121-changes}

- **Agregado**: Sistema de valores predeterminados a nivel de servidor e herencia para notificaciones de backup
- **Agregado**: Funcionalidad de correo electr贸nico de prueba y notificaci贸n de prueba en la configuraci贸n de Notificaciones de backup
- **Agregado**: Bot贸n de c贸digo QR para temas NTFY
- **Agregado**: Columna "Marca de tiempo del 煤ltimo backup (BD)" a la exportaci贸n CSV de supervisi贸n de backups
- **Agregado**: Informaci贸n sobre herramientas para el texto "Pr贸xima ejecuci贸n" en la configuraci贸n de supervisi贸n de backups
- **Agregado**: Entradas de log de auditor铆a individuales para cada notificaci贸n y correo electr贸nico enviados
- **Agregado**: Robustez mejorada del registro de auditor铆a para fallos de notificaci贸n
- **Agregado**: Variable `{log_text}` en plantillas de notificaci贸n con migraci贸n autom谩tica de plantillas
- **Agregado**: Detecci贸n autom谩tica de cambios de archivo de clave maestra
- **Agregado**: Funcionalidad de backup de base de datos (formatos binario y SQL)
- **Agregado**: Funcionalidad de restauraci贸n de base de datos con backups de seguridad y validaci贸n de integridad
- **Agregado**: Punto final de API `GET /api/auth/admin-must-change-password` para verificar el requisito de cambio de contrase帽a de administrador
- **Agregado**: Punto final de API `GET /api/database/backup` para crear backups de base de datos
- **Agregado**: Punto final de API `POST /api/database/restore` para restaurar la base de datos desde backup
- **Agregado**: Punto final de API `GET /api/backups/last-timestamps` para recuperar marcas de tiempo del 煤ltimo backup
- **Cambiado**: Registro de auditor铆a mejorado para actualizaciones de configuraci贸n de correo electr贸nico y NTFY (solo registra cambios reales)
- **Cambiado**: Los formularios de cambio de contrase帽a ya no requieren confirmaci贸n cuando se muestran contrase帽as sin enmascarar.
- **Cambiado**: Las contrase帽as se borran de forma segura de la memoria cuando se cierran los formularios de cambio de contrase帽a.
- **Cambiado**: Se incluy贸 un bot贸n de alternancia de visualizaci贸n de contrase帽a en el formulario de recopilaci贸n de backups.
- **Cambiado**: La variable `{server_alias}` ahora muestra el nombre del servidor entre corchetes
- **Cambiado**: Documentaci贸n actualizada, estilo alineado con la aplicaci贸n y barra lateral refactorizada.
- **Corregido**: Marcas de tiempo del log de auditor铆a que se mostraban en GMT en lugar de la zona horaria del navegador
- **Corregido**: Registro de auditor铆a de fallos de correo electr贸nico y NTFY
- **Corregido**: Pantalla de "Pr贸xima ejecuci贸n" en la configuraci贸n de supervisi贸n de backups que mostraba fechas incorrectas

---

## Licencia {#licencia}

Este proyecto est谩 licenciado bajo la [Licencia Apache 2.0](https://github.com/wsj-br/duplistatus/blob/main/LICENSE).

**Copyright 漏 2025 Waldemar Scudeller Jr.**
