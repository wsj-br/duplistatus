# Versi√≥n 0.8.x {#version-08x}

## Resumen {#overview}

Versi√≥n 0.8.x es una actualizaci√≥n importante que introduce mejoras significativas de Seguridad, capacidades mejoradas de Gesti√≥n de servidores y un Sistema integral de Notificaciones con soporte de correo electr√≥nico SMTP. Esta versi√≥n se enfoca en fortalecer la Seguridad, mejorar la experiencia del Usuario y proporcionar opciones m√°s flexibles de monitoreo de Backups.

## Nuevas caracter√≠sticas {#new-features}

### Mejoras en la Gesti√≥n de servidores {#server-management-enhancements}

- **Persistencia autom√°tica de URL y contrase√±a del servidor** al Recopilar Backups
  - Los Usuarios pueden actualizar la URL y Contrase√±a utilizando dos m√©todos:
    - Recopilaci√≥n de Backups con valores actualizados
    - Modificaci√≥n de configuraci√≥n en `Configuraci√≥n ‚Üí Configuraci√≥n de servidores`

### Monitoreo mejorado de backups retrasados {#enhanced-overdue-monitoring}

- **Nueva pesta√±a de configuraci√≥n `Monitoreo de backups retrasados`** con configuraci√≥n de intervalos compatible con servidor Duplicati
  - Soporte para intervalos Personalizado (por ejemplo, "1D12h")
  - Actualizaciones autom√°ticas de intervalo retrasado desde Configuraci√≥n de Duplicati durante la recopilaci√≥n de logs de backup
  - **Recomendado:** Ejecutar recopilaci√≥n despu√©s de cambiar intervalos de trabajo de backup en servidor Duplicati para sincronizar la configuraci√≥n de duplistatus
  - Las plantillas de Notificaciones ahora utilizan `{backup_interval}` en lugar de `{backup_interval_value}` y `{backup_interval_type}`.

### Configuraci√≥n de dispositivo NTFY {#ntfy-device-configuration}

- **Generaci√≥n de c√≥digo QR** para configuraci√≥n autom√°tica de dispositivo para recibir Notificaciones de **duplistatus**
  - Haga clic derecho en el bot√≥n `Ver NTFY` en la barra de herramientas de la aplicaci√≥n
  - Bot√≥n "Configurar dispositivo" en `Configuraci√≥n ‚Üí Configuraci√≥n de NTFY`

### Recopilaci√≥n de Backup mejorada {#improved-backup-collection}

- **Detecci√≥n autom√°tica de HTTP/HTTPS**, las conexiones se intentan en este orden: HTTPS ‚Üí HTTPS con autofirmado ‚Üí alternativa HTTP
- **Men√∫ desplegable de selecci√≥n de servidor** en la interfaz `Recopilar logs de backup` para recopilaci√≥n directa espec√≠fica del servidor
- **M√∫ltiples direcciones** en el nombre de host (separadas por comas) ahora se aceptan (deben compartir la misma Contrase√±a y Puerto)
- **Botones de recopilaci√≥n de backup de servidor √∫nico** a√±adidos a `Panel de control (tabla)`, `Configuraci√≥n ‚Üí Monitoreo de backups retrasados` y `Configuraci√≥n ‚Üí Servidores`
- **Funcionalidad de recopilaci√≥n masiva** para Todos los Servidores con configuraci√≥n v√°lida (url y Contrase√±a)
  - Botones `Recopilar todo` en `Configuraci√≥n ‚Üí Monitoreo de backups retrasados` y `Configuraci√≥n ‚Üí Servidores`
  - Men√∫ contextual de clic derecho en el bot√≥n `Recopilar logs de backup` en la barra de herramientas de la aplicaci√≥n

### Sistema de Notificaciones mejorado {#enhanced-notification-system}

- **Soporte de Notificaciones por correo electr√≥nico SMTP:**
  - Configuraci√≥n del servidor SMTP en `Configuraci√≥n ‚Üí Configuraci√≥n de correo electr√≥nico`
  - Configuraci√≥n por trabajo de backup para Notificaciones de NTFY y/o Notificaciones por correo electr√≥nico
  - Plantillas con formato HTML utilizando `Configuraci√≥n ‚Üí Plantillas de notificaci√≥n` existentes

- **Configuraci√≥n de Notificaciones por trabajo de Backup:**
  - Preferencias de notificaci√≥n individuales en `Configuraci√≥n ‚Üí Notificaciones de backup`
  - Indicadores visuales (iconos atenuados) cuando NTFY o correo electr√≥nico no est√° configurado correctamente

- **Soporte de configuraci√≥n regional:**
  - se cre√≥ una nueva variable de entorno `LANG` para establecer la configuraci√≥n regional en la aplicaci√≥n
  - ahora es predecible el formato de Fechas y n√∫meros en las Notificaciones y Logs

---

## üîí Mejoras de Seguridad {#security-enhancements}

### Protecci√≥n CSRF {#csrf-protection}

- **Autenticaci√≥n basada en sesi√≥n** con gesti√≥n robusta de sesiones
- **Validaci√≥n de token CSRF** aplicada para Todos los solicitudes de API que cambian estado
- **Las sesiones expiran autom√°ticamente** despu√©s de 24 horas; los tokens CSRF se actualizan cada 30 minutos
- Garantiza protecci√≥n contra falsificaci√≥n de solicitud entre sitios mientras se preserva la compatibilidad con API externas

### Minimizaci√≥n de Contrase√±a en texto plano {#plaintext-password-minimization}

- **Las Contrase√±as solo se pueden establecer a trav√©s de la interfaz de Usuario**; ning√∫n punto final de API expone Contrase√±as almacenadas
- **La manipulaci√≥n de Contrase√±a en texto plano se minimiza** en todo el Sistema

### Criptograf√≠a avanzada para datos sensibles {#advanced-cryptography-for-sensitive-data}

- **Cifrado de datos sensibles** (por ejemplo, Contrase√±as, credenciales SMTP) utilizando AES-256-GCM
- **La clave maestra se genera autom√°ticamente** y se almacena de forma segura en `.duplistatus.key`
- **PBKDF2 con 100.000 iteraciones** utilizado para derivaci√≥n de clave para fortalecer la Seguridad
- **Las etiquetas de autenticaci√≥n se verifican** y la memoria se Limpia de forma segura despu√©s de su uso
- **Los permisos del archivo de clave maestra** se establecen estrictamente en 0400 para protecci√≥n M√°xima

---

## üé® Mejoras de la interfaz de Usuario {#user-interface-improvements}

- **Estilo de aplicaci√≥n mejorado** con nuevo esquema de colores e iconograf√≠a para mejorar la usabilidad
- **Sistema de dise√±o moderno** con indicadores de Estado mejorados
- **Iconos de color e indicadores de progreso** para mejor retroalimentaci√≥n visual
- **Pesta√±as de Configuraci√≥n** renombradas para facilitar el uso
- **Interacciones de API simplificadas** y experiencia de Usuario mejorada

---

## üìö Actualizaciones de documentaci√≥n {#documentation-updates}

- **Documentaci√≥n integral** utilizando Docusaurus para navegaci√≥n y B√∫squeda mejoradas
- **Documentaci√≥n de API mejorada** con Descripciones de punto final detalladas
- **Gu√≠as de Usuario actualizadas** que cubren nuevas caracter√≠sticas y mejoras de Seguridad
- **Gu√≠as de instalaci√≥n** con instrucciones de configuraci√≥n mejoradas
- **Documentaci√≥n de desarrollo** para colaboradores

---

## üîß Mejoras t√©cnicas {#technical-improvements}

- **Configuraci√≥n de Next.js mejorada** con rendimiento mejorado y experiencia de Usuario
- **Divisi√≥n de paquete optimizada** para reducir advertencias de precarga
- **Manejo de Errores mejorado** para problemas de conexi√≥n e interacciones de API
- **Gesti√≥n de configuraci√≥n de backup refactorizada** para mejor manejo de configuraci√≥n
- **Gesti√≥n de sesi√≥n mejorada** y protecci√≥n CSRF en interacciones de API
- **Migraciones de base de datos mejoradas** y actualizaciones de esquema
- **Varias correcciones de errores** y simplificaci√≥n de c√≥digo.

---

## üöÄ Notas de migraci√≥n {#migration-notes}

### De la Versi√≥n 0.7.x {#from-version-07x}

Esta versi√≥n incluye mejoras significativas de Seguridad y nuevas caracter√≠sticas. Al actualizar desde la Versi√≥n 0.7.x:

1. **Migraci√≥n autom√°tica de base de datos:** La aplicaci√≥n migrar√° autom√°ticamente el esquema de su base de datos para admitir nuevas caracter√≠sticas
2. **Generaci√≥n de clave maestra:** Se generar√° una nueva clave maestra para el Cifrado de datos sensibles
3. **Gesti√≥n de sesi√≥n:** Las sesiones existentes se invalidar√°n y se establecer√°n nuevas sesiones protegidas por CSRF
4. **Actualizaciones de configuraci√≥n:** Algunas claves de configuraci√≥n se han actualizado para admitir nuevas caracter√≠sticas
5. **Cambios de plantilla:** Las variables `{backup_interval_value}` y `{backup_interval_type}` fueron reemplazadas por `{backup_interval}`. Las Plantillas por defecto se ajustar√°n autom√°ticamente, pero las Plantillas personalizadas no se migrar√°n. Por favor, Verifique sus Plantillas.

### Consideraciones de Seguridad {#security-considerations}

- **Archivo de clave maestra:** Aseg√∫rese de que el archivo `.duplistatus.key` est√© debidamente respaldado y asegurado
- **Permisos de Archivos:** El archivo de clave maestra tendr√° permisos restringidos (0400) por Seguridad
- **Cifrado de Contrase√±a:** Las Contrase√±as existentes se cifrar√°n utilizando el nuevo Sistema criptogr√°fico

---

## üêõ Correcciones de errores {#bug-fixes}

- Se corrigi√≥ el formato de tiempo relativo para devolver "hace poco" para diferencias de tiempo menores a 15 segundos
- Manejo de Errores mejorado para variables de entorno faltantes
- Prueba de conexi√≥n mejorada y validaci√≥n
- Se corrigieron varias inconsistencias de interfaz de Usuario y se mejor√≥ la retroalimentaci√≥n del Usuario

---

Esta versi√≥n representa un paso significativo adelante en Seguridad, usabilidad y funcionalidad. Recomendamos actualizar para aprovechar las nuevas caracter√≠sticas y mejoras de Seguridad.
