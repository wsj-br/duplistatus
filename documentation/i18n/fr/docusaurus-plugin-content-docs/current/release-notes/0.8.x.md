# Version 0.8.x

## Vue d'ensemble

Version 0.8.x est une mise √† jour majeure qui introduit des am√©liorations significatives de la S√©curit√©, des capacit√©s am√©lior√©es de Gestion des serveurs, et un Syst√®me de Notifications complet avec support E-mail SMTP. Cette version se concentre sur le renforcement de la S√©curit√©, l'am√©lioration de l'exp√©rience Utilisateur, et la fourniture d'options de surveillance de sauvegarde plus flexibles.

## Nouvelles fonctionnalit√©s

### Am√©liorations de la Gestion des serveurs

- **Persistance automatique de l'URL et du mot de passe du serveur** lors de la Collecte de sauvegardes
  - Les Utilisateurs peuvent mettre √† jour l'URL et le Mot de passe en utilisant deux m√©thodes :
    - Nouvelle Collecte de sauvegardes avec des valeurs mises √† jour
    - Modification des Param√®tres dans `Param√®tres ‚Üí Param√®tres du serveur`

### Surveillance am√©lior√©e des sauvegardes en retard

- **Nouvel onglet de configuration `Surveillance des sauvegardes en retard`** avec Param√®tres d'intervalle compatibles avec le serveur Duplicati
  - Support des intervalles personnalis√©s (par exemple, "1D12h")
  - Mises √† jour automatiques de l'intervalle en retard √† partir de la Configuration Duplicati lors de la Collecte des journaux de sauvegarde
  - **Recommand√© :** Ex√©cutez la Collecte apr√®s avoir modifi√© les intervalles de travail de sauvegarde sur le serveur Duplicati pour synchroniser la configuration duplistatus
  - Les Mod√®les de notification utilisent maintenant `{backup_interval}` au lieu de `{backup_interval_value}` et `{backup_interval_type}`.

### Configuration de l'appareil NTFY

- **G√©n√©ration de code QR** pour la configuration automatique de l'appareil afin de recevoir des Notifications de **duplistatus**
  - Clic droit sur le bouton `Afficher les messages NTFY` dans la barre d'outils de l'application
  - Bouton "Configurer l'appareil" dans `Param√®tres ‚Üí Param√®tres NTFY`

### Collecte de sauvegarde am√©lior√©e

- **D√©tection automatique HTTP/HTTPS**, les connexions sont essay√©es dans cet ordre : HTTPS ‚Üí HTTPS avec auto-sign√© ‚Üí Secours HTTP
- **Liste d√©roulante de s√©lection du serveur** dans l'interface `Collecter les journaux de sauvegarde` pour la Collecte directe sp√©cifique au serveur
- **Plusieurs adresses** dans le Nom d'h√¥te (s√©par√©es par des virgules) sont maintenant accept√©es (doivent partager le m√™me Mot de passe et Port)
- **Boutons de Collecte de sauvegarde pour un seul serveur** ajout√©s √† `Tableau de bord (tableau)`, `Param√®tres ‚Üí Surveillance des sauvegardes en retard` et `Param√®tres ‚Üí Serveurs`
- **Fonctionnalit√© de Collecte en masse** pour Tous les Serveurs avec une configuration valide (url et Mot de passe)
  - Boutons `Tout collecter` dans `Param√®tres ‚Üí Surveillance des sauvegardes en retard` et `Param√®tres ‚Üí Serveurs`
  - Menu contextuel au clic droit sur le bouton `Collecter les journaux de sauvegarde` dans la barre d'outils de l'application

### Syst√®me de Notifications am√©lior√©

- **Support de Notifications par E-mail SMTP :**
  - Configuration du serveur SMTP dans `Param√®tres ‚Üí Param√®tres e-mail`
  - Configuration par travail de sauvegarde pour les Notifications NTFY et/ou par E-mail
  - Mod√®les au format HTML utilisant les `Param√®tres ‚Üí Mod√®les de notification` existants

- **Configuration de Notifications par travail de sauvegarde :**
  - Pr√©f√©rences de Notifications individuelles dans `Param√®tres ‚Üí Notifications de sauvegarde`
  - Indicateurs visuels (ic√¥nes gris√©es) Quand NTFY ou E-mail n'est pas correctement Configur√©

- **Support de la locale :**
  - Cr√©√© une nouvelle variable d'environnement `LANG` pour d√©finir la locale dans l'application
  - maintenant le format des Dates et des nombres dans les Notifications et Journaux est pr√©visible

---

## üîí Am√©liorations de la S√©curit√©

### Protection CSRF

- **Authentification bas√©e sur la session** avec gestion robuste de la session
- **Validation du jeton CSRF** appliqu√©e pour Tous les demandes d'API changeant d'√©tat
- **Les sessions expirent automatiquement** apr√®s 24 heures ; les jetons CSRF s'actualisent toutes les 30 minutes
- Assure la protection contre la falsification de demande intersite tout en pr√©servant la compatibilit√© avec les API externes

### Minimisation du mot de passe en texte brut

- **Les mots de passe ne peuvent √™tre d√©finis que via l'interface Utilisateur** ; aucun point de terminaison d'API n'expose les mots de passe stock√©s
- **La manipulation du mot de passe en texte brut est minimis√©e** dans tout le Syst√®me

### Cryptographie avanc√©e pour les donn√©es sensibles

- **Chiffrement des donn√©es sensibles** (par exemple, mots de passe, identifiants SMTP) utilisant AES-256-GCM
- **La cl√© ma√Ætre est g√©n√©r√©e automatiquement** et stock√©e de mani√®re s√©curis√©e dans `.duplistatus.key`
- **PBKDF2 avec 100 000 it√©rations** utilis√© pour la d√©rivation de cl√© afin de renforcer la S√©curit√©
- **Les balises d'authentification sont v√©rifi√©es** et la m√©moire est effac√©e de mani√®re s√©curis√©e apr√®s utilisation
- **Les autorisations de fichier de cl√© ma√Ætre** sont strictement d√©finies sur 0400 pour une protection maximale

---

## üé® Am√©liorations de l'interface Utilisateur

- **Am√©lioration du style de l'application** avec nouveau sch√©ma de couleurs et iconographie pour une meilleure convivialit√©
- **Syst√®me de conception moderne** avec indicateurs de Statut am√©lior√©s
- **Ic√¥nes color√©es et indicateurs de progression** pour une meilleure r√©troaction visuelle
- **Onglets Param√®tres** renomm√©s pour faciliter l'utilisation
- **Interactions d'API rationalis√©es** et exp√©rience Utilisateur am√©lior√©e

---

## üìö Mises √† jour de la documentation

- **Documentation compl√®te** utilisant Docusaurus pour une navigation et une Recherche am√©lior√©es
- **Documentation d'API am√©lior√©e** avec Descriptions de points de terminaison d√©taill√©es
- **Guides Utilisateur mis √† jour** couvrant les nouvelles fonctionnalit√©s et am√©liorations de la S√©curit√©
- **Guides d'installation** avec instructions de configuration am√©lior√©es
- **Documentation de d√©veloppement** pour les contributeurs

---

## üîß Am√©liorations techniques

- **Configuration Next.js am√©lior√©e** avec performance et exp√©rience Utilisateur am√©lior√©es
- **Fractionnement de bundle optimis√©** pour r√©duire les avertissements de pr√©chargement
- **Gestion des Erreurs am√©lior√©e** pour les probl√®mes de connexion et les interactions d'API
- **Gestion des Param√®tres de sauvegarde refactoris√©e** pour une meilleure gestion de la configuration
- **Gestion de session am√©lior√©e** et protection CSRF dans les interactions d'API
- **Migrations de base de donn√©es am√©lior√©es** et mises √† jour de sch√©ma
- **Plusieurs corrections de bogues** et simplification du code.

---

## üöÄ Notes de migration

### De la Version 0.7.x

Cette version inclut des am√©liorations significatives de la S√©curit√© et de nouvelles fonctionnalit√©s. Lors de la mise √† niveau √† partir de la Version 0.7.x :

1. **Migration de base de donn√©es automatique :** L'application migrera automatiquement votre sch√©ma de base de donn√©es pour supporter les nouvelles fonctionnalit√©s
2. **G√©n√©ration de cl√© ma√Ætre :** Une nouvelle cl√© ma√Ætre sera g√©n√©r√©e pour le Chiffrement de donn√©es sensibles
3. **Gestion de session :** Les sessions existantes seront invalid√©es et de nouvelles sessions prot√©g√©es par CSRF seront √©tablies
4. **Mises √† jour de configuration :** Certaines cl√©s de configuration ont √©t√© mises √† jour pour supporter les nouvelles fonctionnalit√©s
5. **Modifications de mod√®les :** Les variables `{backup_interval_value}` et `{backup_interval_type}` ont √©t√© remplac√©es par `{backup_interval}`. Les mod√®les par d√©faut seront ajust√©s automatiquement, mais les mod√®les personnalis√©s ne seront pas migr√©s. Veuillez v√©rifier vos Mod√®les.

### Consid√©rations de s√©curit√©

- **Fichier de cl√© ma√Ætre :** Assurez-vous que le fichier `.duplistatus.key` est correctement sauvegard√© et s√©curis√©
- **Autorisations de Fichiers :** Le fichier de cl√© ma√Ætre aura des autorisations restreintes (0400) pour la S√©curit√©
- **Chiffrement du mot de passe :** Les mots de passe existants seront chiffr√©s √† l'aide du nouveau Syst√®me cryptographique

---

## üêõ Corrections de bogues

- Correction du formatage de l'heure relative pour retourner "√† l'instant" pour les diff√©rences de temps inf√©rieures √† 15 secondes
- Gestion des Erreurs am√©lior√©e pour les variables d'environnement manquantes
- Test et validation de connexion am√©lior√©s
- Correction de diverses incoh√©rences de l'interface Utilisateur et am√©lioration de la r√©troaction Utilisateur

---

Cette version repr√©sente une avanc√©e significative en mati√®re de S√©curit√©, de convivialit√© et de fonctionnalit√©. Nous recommandons de mettre √† niveau pour profiter de nouvelles fonctionnalit√©s et am√©liorations de la S√©curit√©.
