"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2758],{3568(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"development/documentation-tools","title":"Documentation Tools","description":"The documentation is built using Docusaurus and is located in the documentation folder. The documentation is hosted on GitHub Pages and is no longer included in the Docker container image.","source":"@site/docs/development/documentation-tools.md","sourceDirName":"development","slug":"/development/documentation-tools","permalink":"/duplistatus/development/documentation-tools","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"mainSidebar","previous":{"title":"Database Schema","permalink":"/duplistatus/development/database"},"next":{"title":"Podman Testing","permalink":"/duplistatus/development/podman-testing"}}');var t=s(7900),o=s(6416);const r={},c="Documentation Tools",d={},l=[{value:"Folder Structure",id:"folder-structure",level:2},{value:"Common Commands",id:"common-commands",level:2},{value:"Development",id:"development",level:3},{value:"Build",id:"build",level:3},{value:"Serve Production Build",id:"serve-production-build",level:3},{value:"Other Useful Commands",id:"other-useful-commands",level:3},{value:"Generating README.md",id:"generating-readmemd",level:2},{value:"Update README for Docker Hub",id:"update-readme-for-docker-hub",level:2},{value:"Generate GitHub Release Notes",id:"generate-github-release-notes",level:2},{value:"Take screenshots for documentation",id:"take-screenshots-for-documentation",level:2},{value:"Deploying the Documentation",id:"deploying-the-documentation",level:2},{value:"Working with Documentation",id:"working-with-documentation",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"documentation-tools",children:"Documentation Tools"})}),"\n",(0,t.jsxs)(n.p,{children:["The documentation is built using ",(0,t.jsx)(n.a,{href:"https://docusaurus.io/",children:"Docusaurus"})," and is located in the ",(0,t.jsx)(n.code,{children:"documentation"})," folder. The documentation is hosted on ",(0,t.jsx)(n.a,{href:"https://wsj-br.github.io/duplistatus/",children:"GitHub Pages"})," and is no longer included in the Docker container image."]}),"\n",(0,t.jsx)(n.h2,{id:"folder-structure",children:"Folder Structure"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"documentation/\n\u251c\u2500\u2500 docs/              # Documentation markdown files\n\u2502   \u251c\u2500\u2500 api-reference/\n\u2502   \u251c\u2500\u2500 development/\n\u2502   \u251c\u2500\u2500 installation/\n\u2502   \u251c\u2500\u2500 migration/\n\u2502   \u251c\u2500\u2500 release-notes/\n\u2502   \u2514\u2500\u2500 user-guide/\n\u251c\u2500\u2500 src/               # React components and pages\n\u2502   \u251c\u2500\u2500 components/    # Custom React components\n\u2502   \u251c\u2500\u2500 css/           # Custom styles\n\u2502   \u2514\u2500\u2500 pages/         # Additional pages (e.g., 404)\n\u251c\u2500\u2500 static/            # Static assets (images, files)\n\u251c\u2500\u2500 docusaurus.config.ts  # Docusaurus configuration\n\u251c\u2500\u2500 sidebars.ts        # Sidebar navigation configuration\n\u2514\u2500\u2500 package.json       # Dependencies and scripts\n"})}),"\n",(0,t.jsx)(n.h2,{id:"common-commands",children:"Common Commands"}),"\n",(0,t.jsxs)(n.p,{children:["All commands should be run from the ",(0,t.jsx)(n.code,{children:"documentation"})," directory:"]}),"\n",(0,t.jsx)(n.h3,{id:"development",children:"Development"}),"\n",(0,t.jsx)(n.p,{children:"Start the development server with hot-reload:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd documentation\npnpm start\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The site will be available at ",(0,t.jsx)(n.code,{children:"http://localhost:3000"})," (or the next available port)."]}),"\n",(0,t.jsx)(n.h3,{id:"build",children:"Build"}),"\n",(0,t.jsx)(n.p,{children:"Build the documentation site for production:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd documentation\npnpm build\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This generates static HTML files in the ",(0,t.jsx)(n.code,{children:"documentation/build"})," directory."]}),"\n",(0,t.jsx)(n.h3,{id:"serve-production-build",children:"Serve Production Build"}),"\n",(0,t.jsx)(n.p,{children:"Preview the production build locally:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd documentation\npnpm serve\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This serves the built site from the ",(0,t.jsx)(n.code,{children:"documentation/build"})," directory."]}),"\n",(0,t.jsx)(n.h3,{id:"other-useful-commands",children:"Other Useful Commands"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"pnpm clear"})," - Clear Docusaurus cache"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"pnpm typecheck"})," - Run TypeScript type checking"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"pnpm write-heading-ids"})," - Add heading IDs to markdown files for anchor links"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"generating-readmemd",children:"Generating README.md"}),"\n",(0,t.jsxs)(n.p,{children:["The project's ",(0,t.jsx)(n.code,{children:"README.md"})," file is automatically generated from ",(0,t.jsx)(n.code,{children:"documentation/docs/intro.md"})," to keep the GitHub repository README synchronised with the Docusaurus documentation."]}),"\n",(0,t.jsx)(n.p,{children:"To generate or update the README.md file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./scripts/generate-readme-from-intro.sh\n"})}),"\n",(0,t.jsx)(n.p,{children:"This script:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Extracts the current version from ",(0,t.jsx)(n.code,{children:"package.json"})," and adds a version badge"]}),"\n",(0,t.jsxs)(n.li,{children:["Copies content from ",(0,t.jsx)(n.code,{children:"documentation/docs/intro.md"})]}),"\n",(0,t.jsx)(n.li,{children:"Converts Docusaurus admonitions (note, tip, warning, etc.) to GitHub-style alerts"}),"\n",(0,t.jsxs)(n.li,{children:["Converts all relative Docusaurus links to absolute GitHub docs URLs (",(0,t.jsx)(n.code,{children:"https://wsj-br.github.io/duplistatus/..."}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Converts image paths from ",(0,t.jsx)(n.code,{children:"/img/"})," to ",(0,t.jsx)(n.code,{children:"documentation/static/img/"})," for GitHub compatibility"]}),"\n",(0,t.jsx)(n.li,{children:"Removes the migration IMPORTANT block and adds a Migration Information section with a link to the Docusaurus docs"}),"\n",(0,t.jsxs)(n.li,{children:["Generates a table of contents using ",(0,t.jsx)(n.code,{children:"doctoc"})]}),"\n",(0,t.jsxs)(n.li,{children:["Generates ",(0,t.jsx)(n.code,{children:"README_dockerhub.md"})," with Docker Hub-compatible formatting (converts images and links to absolute URLs, converts GitHub alerts to emoji-based format)"]}),"\n",(0,t.jsxs)(n.li,{children:["Generates GitHub release notes (",(0,t.jsx)(n.code,{children:"RELEASE_NOTES_github_VERSION.md"}),") from ",(0,t.jsx)(n.code,{children:"documentation/docs/release-notes/VERSION.md"})," (converts links and images to absolute URLs)"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," You need to have ",(0,t.jsx)(n.code,{children:"doctoc"})," installed globally for the TOC generation:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install -g doctoc\n"})}),"\n",(0,t.jsx)(n.h2,{id:"update-readme-for-docker-hub",children:"Update README for Docker Hub"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"generate-readme-from-intro.sh"})," script automatically generates ",(0,t.jsx)(n.code,{children:"README_dockerhub.md"})," with Docker Hub-compatible formatting. It:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Copies ",(0,t.jsx)(n.code,{children:"README.md"})," to ",(0,t.jsx)(n.code,{children:"README_dockerhub.md"})]}),"\n",(0,t.jsx)(n.li,{children:"Converts relative image paths to absolute GitHub raw URLs"}),"\n",(0,t.jsx)(n.li,{children:"Converts relative document links to absolute GitHub blob URLs"}),"\n",(0,t.jsxs)(n.li,{children:["Converts GitHub-style alerts (",(0,t.jsx)(n.code,{children:"[!NOTE]"}),", ",(0,t.jsx)(n.code,{children:"[!WARNING]"}),", etc.) to emoji-based format for better Docker Hub compatibility"]}),"\n",(0,t.jsx)(n.li,{children:"Ensures all images and links work correctly on Docker Hub"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"generate-github-release-notes",children:"Generate GitHub Release Notes"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"generate-readme-from-intro.sh"})," script automatically generates GitHub release notes when run. It:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Reads the release notes from ",(0,t.jsx)(n.code,{children:"documentation/docs/release-notes/VERSION.md"})," (where VERSION is extracted from ",(0,t.jsx)(n.code,{children:"package.json"}),")"]}),"\n",(0,t.jsx)(n.li,{children:'Changes the title from "# Version xxxx" to "# Release Notes - Version xxxxx"'}),"\n",(0,t.jsxs)(n.li,{children:["Converts relative markdown links to absolute GitHub docs URLs (",(0,t.jsx)(n.code,{children:"https://wsj-br.github.io/duplistatus/..."}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Converts image paths to GitHub raw URLs (",(0,t.jsx)(n.code,{children:"https://raw.githubusercontent.com/wsj-br/duplistatus/main/documentation/static/img/..."}),") for proper display in release descriptions"]}),"\n",(0,t.jsxs)(n.li,{children:["Handles relative paths with ",(0,t.jsx)(n.code,{children:"../"})," prefix"]}),"\n",(0,t.jsx)(n.li,{children:"Preserves absolute URLs (http:// and https://) unchanged"}),"\n",(0,t.jsxs)(n.li,{children:["Creates ",(0,t.jsx)(n.code,{children:"RELEASE_NOTES_github_VERSION.md"})," in the project root"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# This will generate both README.md and RELEASE_NOTES_github_VERSION.md\n./scripts/generate-readme-from-intro.sh\n"})}),"\n",(0,t.jsx)(n.p,{children:"The generated release notes file can be copied and pasted directly into the GitHub release description. All links and images will work correctly in the GitHub release context."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," The generated file is temporary and can be deleted after creating the GitHub release. It's recommended to add ",(0,t.jsx)(n.code,{children:"RELEASE_NOTES_github_*.md"})," to ",(0,t.jsx)(n.code,{children:".gitignore"})," if you don't want to commit these files."]}),"\n",(0,t.jsx)(n.h2,{id:"take-screenshots-for-documentation",children:"Take screenshots for documentation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"tsx scripts/take-screenshots.ts\n"})}),"\n",(0,t.jsx)(n.p,{children:"This script automatically takes screenshots of the application for documentation purposes. It:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Launches a headless browser (Puppeteer)"}),"\n",(0,t.jsx)(n.li,{children:"Logs in as admin and regular user"}),"\n",(0,t.jsx)(n.li,{children:"Navigates through various pages (dashboard, server details, settings, etc.)"}),"\n",(0,t.jsx)(n.li,{children:"Takes screenshots at different viewport sizes"}),"\n",(0,t.jsxs)(n.li,{children:["Saves screenshots to ",(0,t.jsx)(n.code,{children:"documentation/static/img/"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Requirements:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The development server must be running on ",(0,t.jsx)(n.code,{children:"http://localhost:8666"})]}),"\n",(0,t.jsxs)(n.li,{children:["Environment variables must be set:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ADMIN_PASSWORD"}),": Password for admin account"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"USER_PASSWORD"}),": Password for regular user account"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'export ADMIN_PASSWORD="your-admin-password"\nexport USER_PASSWORD="your-user-password"\ntsx scripts/take-screenshots.ts\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Generated Screenshots:"})}),"\n",(0,t.jsxs)(n.p,{children:["The script generates the following screenshots (saved to ",(0,t.jsx)(n.code,{children:"documentation/static/img/"}),"):"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Dashboard Screenshots:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-main-dashboard-card-mode.png"})," - Dashboard in card/overview mode"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-main-dashboard-table-mode.png"})," - Dashboard in table mode"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-overdue-backup-hover-card.png"})," - Overdue backup hover card/tooltip"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-backup-tooltip.png"})," - Regular backup tooltip (hover over backup in cards view)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Server Details Screenshots:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-server-backup-list.png"})," - Server backup list page"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-backup-history.png"})," - Backup history table section"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-backup-detail.png"})," - Individual backup detail page"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-metrics.png"})," - Metrics chart showing backup metrics over time"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Collect/Configuration Screenshots:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-collect-button-popup.png"})," - Collect backup logs popup"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-collect-button-right-click-popup.png"})," - Collect all right-click menu"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-collect-backup-logs.png"})," - Collect backup logs interface"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-duplicati-configuration.png"})," - Duplicati configuration dropdown"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Settings Screenshots:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-settings-left-panel-admin.png"})," - Settings sidebar (admin view)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-settings-left-panel-non-admin.png"})," - Settings sidebar (non-admin view)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-settings-{tab}.png"})," - Individual settings pages for each tab:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"screen-settings-notifications.png"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"screen-settings-overdue.png"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"screen-settings-server.png"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"screen-settings-ntfy.png"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"screen-settings-email.png"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"screen-settings-templates.png"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"screen-settings-users.png"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"screen-settings-audit.png"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"screen-settings-audit-retention.png"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"screen-settings-display.png"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"screen-settings-database-maintenance.png"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-settings-ntfy-configure-device-popup.png"})," - NTFY configure device popup"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"screen-settings-backup-notifications-detail.png"})," - Backup notifications detail page"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"deploying-the-documentation",children:"Deploying the Documentation"}),"\n",(0,t.jsxs)(n.p,{children:["To deploy the documentation to GitHub Pages, you will need to generate a GitHub Personal Access Token. Go to ",(0,t.jsx)(n.a,{href:"https://github.com/settings/tokens",children:"GitHub Personal Access Tokens"})," and create a new token with the ",(0,t.jsx)(n.code,{children:"repo"})," scope."]}),"\n",(0,t.jsx)(n.p,{children:"When you have the token, run the following command to store the token in the Git credential store:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"./setup-git-credentials.sh\n"})}),"\n",(0,t.jsx)(n.p,{children:"Then, to deploy the documentation to GitHub Pages, run the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pnpm run deploy\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This will build the documentation and push it to the ",(0,t.jsx)(n.code,{children:"gh-pages"})," branch of the repository, and the documentation will be available at ",(0,t.jsx)(n.a,{href:"https://wsj-br.github.io/duplistatus/",children:"https://wsj-br.github.io/duplistatus/"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"working-with-documentation",children:"Working with Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Documentation files are written in Markdown (",(0,t.jsx)(n.code,{children:".md"}),") and located in ",(0,t.jsx)(n.code,{children:"documentation/docs/"})]}),"\n",(0,t.jsxs)(n.li,{children:["The sidebar navigation is configured in ",(0,t.jsx)(n.code,{children:"documentation/sidebars.ts"})]}),"\n",(0,t.jsxs)(n.li,{children:["Docusaurus configuration is in ",(0,t.jsx)(n.code,{children:"documentation/docusaurus.config.ts"})]}),"\n",(0,t.jsxs)(n.li,{children:["Custom React components can be added to ",(0,t.jsx)(n.code,{children:"documentation/src/components/"})]}),"\n",(0,t.jsxs)(n.li,{children:["Static assets (images, PDFs, etc.) go in ",(0,t.jsx)(n.code,{children:"documentation/static/"})]}),"\n",(0,t.jsxs)(n.li,{children:["The main documentation homepage is ",(0,t.jsx)(n.code,{children:"documentation/docs/intro.md"}),", which is used as the source for generating ",(0,t.jsx)(n.code,{children:"README.md"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},6416(e,n,s){s.d(n,{R:()=>r,x:()=>c});var i=s(2128);const t={},o=i.createContext(t);function r(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);