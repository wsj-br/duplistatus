"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[976],{2415(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"user-guide/settings/database-maintenance","title":"Database Maintenance","description":"Manage your backup data and optimise performance through database maintenance operations.","source":"@site/docs/user-guide/settings/database-maintenance.md","sourceDirName":"user-guide/settings","slug":"/user-guide/settings/database-maintenance","permalink":"/duplistatus/user-guide/settings/database-maintenance","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"mainSidebar","previous":{"title":"Display","permalink":"/duplistatus/user-guide/settings/display-settings"},"next":{"title":"Users","permalink":"/duplistatus/user-guide/settings/user-management-settings"}}');var t=s(7900),r=s(6416);const i={},l="Database Maintenance",c={},d=[{value:"Database Backup",id:"database-backup",level:2},{value:"Database Restore",id:"database-restore",level:2},{value:"Data Cleanup Period",id:"data-cleanup-period",level:2},{value:"Delete Backup Job Data",id:"delete-backup-job-data",level:2},{value:"Delete Server Data",id:"delete-server-data",level:2},{value:"Merge Duplicate Servers",id:"merge-duplicate-servers",level:2}];function o(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{IconButton:a}=n;return a||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("IconButton",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"database-maintenance",children:"Database Maintenance"})}),"\n",(0,t.jsx)(n.p,{children:"Manage your backup data and optimise performance through database maintenance operations."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Database maintenance",src:s(8033).A+"",width:"1526",height:"989"})}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.h2,{id:"database-backup",children:"Database Backup"}),"\n",(0,t.jsx)(n.p,{children:"Create a backup of your entire database for safekeeping or migration purposes."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to ",(0,t.jsx)(n.code,{children:"Settings \u2192 Database Maintenance"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["In the ",(0,t.jsx)(n.strong,{children:"Database Backup"})," section, select a backup format:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Database File (.db)"}),": Binary format - fastest backup, preserves all database structure exactly"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"SQL Dump (.sql)"}),": Text format - human-readable SQL statements, can be edited before restore"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(a,{icon:"lucide:download",label:"Download Backup"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"The backup file will be downloaded to your computer with a timestamped filename."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Backup Formats:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:".db format"}),": Recommended for regular backups. Creates an exact copy of the database file using SQLite's backup API, ensuring consistency even while the database is in use."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:".sql format"}),": Useful for migration, inspection, or when you need to edit the data before restoring. Contains all SQL statements needed to recreate the database."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Best Practices:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Create regular backups before major operations (cleanup, merge, etc.)"}),"\n",(0,t.jsx)(n.li,{children:"Store backups in a safe location separate from the application"}),"\n",(0,t.jsx)(n.li,{children:"Test restore procedures periodically to ensure backups are valid"}),"\n"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.h2,{id:"database-restore",children:"Database Restore"}),"\n",(0,t.jsx)(n.p,{children:"Restore your database from a previously created backup file."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to ",(0,t.jsx)(n.code,{children:"Settings \u2192 Database Maintenance"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["In the ",(0,t.jsx)(n.strong,{children:"Database Restore"})," section, click the file input and select a backup file:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Supported formats: ",(0,t.jsx)(n.code,{children:".db"}),", ",(0,t.jsx)(n.code,{children:".sql"}),", ",(0,t.jsx)(n.code,{children:".sqlite"}),", ",(0,t.jsx)(n.code,{children:".sqlite3"})]}),"\n",(0,t.jsx)(n.li,{children:"Maximum file size: 100MB"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(a,{icon:"lucide:upload",label:"Restore Database"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Confirm the action in the dialogue box."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Restore Process:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A safety backup of the current database is automatically created before restore"}),"\n",(0,t.jsx)(n.li,{children:"The current database is replaced with the backup file"}),"\n",(0,t.jsx)(n.li,{children:"All sessions are cleared for security (users must log in again)"}),"\n",(0,t.jsx)(n.li,{children:"Database integrity is verified after restore"}),"\n",(0,t.jsx)(n.li,{children:"All caches are cleared to ensure fresh data"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Restore Formats:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:".db files"}),": The database file is directly replaced. Fastest restore method."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:".sql files"}),": SQL statements are executed to recreate the database. Allows for selective restoration if needed."]}),"\n"]}),"\n",(0,t.jsxs)(n.admonition,{type:"warning",children:[(0,t.jsxs)(n.p,{children:["Restoring a database will ",(0,t.jsx)(n.strong,{children:"replace all current data"}),". This action cannot be undone.",(0,t.jsx)(n.br,{}),"\n","A safety backup is created automatically, but it's recommended to create your own backup before restoring."]}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Important:"})," After restore, all user sessions are cleared for security. You will need to log in again."]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Troubleshooting:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"If restore fails, the original database is automatically restored from the safety backup"}),"\n",(0,t.jsx)(n.li,{children:"Ensure the backup file is not corrupted and matches the expected format"}),"\n",(0,t.jsx)(n.li,{children:"For large databases, the restore process may take several minutes"}),"\n"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsxs)(n.p,{children:["This applies to all the maintenance functions below: all statistics on the dashboard, detail pages, and charts are calculated using data from the ",(0,t.jsx)(n.strong,{children:"duplistatus"})," database. Deleting old information will impact these calculations."]}),(0,t.jsxs)(n.p,{children:["If you accidentally delete data, you can restore it using the ",(0,t.jsx)(n.a,{href:"/duplistatus/user-guide/collect-backup-logs",children:"Collect Backup Logs"})," feature."]})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.h2,{id:"data-cleanup-period",children:"Data Cleanup Period"}),"\n",(0,t.jsx)(n.p,{children:"Remove outdated backup records to free up storage space and improve system performance."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to ",(0,t.jsx)(n.code,{children:"Settings \u2192 Database Maintenance"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Choose a retention period:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"6 months"}),": Retain records from the last 6 months."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"1 year"}),": Retain records from the last year."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"2 years"}),": Retain records from the last 2 years (default)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Delete all data"}),": Remove all backup records and servers."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(a,{icon:"lucide:trash-2",label:"Clear Old Records"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Confirm the action in the dialogue box."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Cleanup Effects:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Deletes backup records older than the selected period"}),"\n",(0,t.jsx)(n.li,{children:"Updates all related statistics and metrics"}),"\n"]}),"\n",(0,t.jsxs)(n.admonition,{type:"warning",children:[(0,t.jsxs)(n.p,{children:['Selecting the "Delete all data" option will ',(0,t.jsx)(n.strong,{children:"permanently remove all backup records and configuration settings"})," from the system."]}),(0,t.jsx)(n.p,{children:"It is strongly recommended to create a database backup before proceeding with this action."})]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.h2,{id:"delete-backup-job-data",children:"Delete Backup Job Data"}),"\n",(0,t.jsx)(n.p,{children:"Remove a specific Backup Job (type) data."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to ",(0,t.jsx)(n.code,{children:"Settings \u2192 Database Maintenance"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Select a Backup Job from the dropdown list.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The backups will be ordered by server alias or name, then the backup name."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(a,{icon:"lucide:folder-open",label:"Delete Backup Job"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Confirm the action in the dialogue box."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Deletion Effects:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Permanently deletes all data associated with this Backup Job / Server."}),"\n",(0,t.jsx)(n.li,{children:"Cleans up associated configuration settings."}),"\n",(0,t.jsx)(n.li,{children:"Updates dashboard statistics accordingly."}),"\n"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.h2,{id:"delete-server-data",children:"Delete Server Data"}),"\n",(0,t.jsx)(n.p,{children:"Remove a specific server and all its associated backup data."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to ",(0,t.jsx)(n.code,{children:"Settings \u2192 Database Maintenance"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Select a server from the dropdown list."}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(a,{icon:"lucide:server",label:"Delete Server Data"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Confirm the action in the dialogue box."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Deletion Effects:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Permanently deletes the selected server and all its backup records"}),"\n",(0,t.jsx)(n.li,{children:"Cleans up associated configuration settings"}),"\n",(0,t.jsx)(n.li,{children:"Updates dashboard statistics accordingly"}),"\n"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.h2,{id:"merge-duplicate-servers",children:"Merge Duplicate Servers"}),"\n",(0,t.jsx)(n.p,{children:"Detect and merge duplicate servers that have the same name but different IDs. se this feature to consolidate them into a single server entry."}),"\n",(0,t.jsxs)(n.p,{children:["This can occur when Duplicati's ",(0,t.jsx)(n.code,{children:"machine-id"})," changes after an upgrade or reinstall. Duplicate servers are only shown when they exist. If no duplicates are detected, the section will display a message indicating that all servers have unique names."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to ",(0,t.jsx)(n.code,{children:"Settings \u2192 Database Maintenance"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["If duplicate servers are detected, a ",(0,t.jsx)(n.strong,{children:"Merge Duplicate Servers"})," section will appear."]}),"\n",(0,t.jsxs)(n.li,{children:["Review the list of duplicate server groups:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Each group shows servers with the same name but different IDs"}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.strong,{children:"Target Server"})," (newest by creation date) is highlighted"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Old Server IDs"})," that will be merged are listed separately"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Select the server groups you want to merge by checking the checkbox next to each group."}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(a,{icon:"lucide:git-merge",label:"Merge Selected Servers"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Confirm the action in the dialogue box."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Merge Process:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"All old server IDs are merged into the target server (newest by creation date)"}),"\n",(0,t.jsx)(n.li,{children:"All backup records and configurations are transferred to the target server"}),"\n",(0,t.jsx)(n.li,{children:"The old server entries are deleted"}),"\n",(0,t.jsx)(n.li,{children:"Dashboard statistics are updated automatically"}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"IMPORTANT",type:"info",children:(0,t.jsx)(n.p,{children:"This action cannot be undone. A database backup is recommended before confirming."})}),"\n",(0,t.jsx)("br",{})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},6416(e,n,s){s.d(n,{R:()=>i,x:()=>l});var a=s(2128);const t={},r=a.createContext(t);function i(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(r.Provider,{value:n},e.children)}},8033(e,n,s){s.d(n,{A:()=>a});const a=s.p+"assets/images/screen-settings-database-maintenance-24e90e647f1249316c4544627088d271.png"}}]);