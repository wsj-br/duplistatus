"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[976],{1388:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"user-guide/settings/database-maintenance","title":"Database Maintenance","description":"Manage your backup data and optimise performance through database maintenance operations.","source":"@site/docs/user-guide/settings/database-maintenance.md","sourceDirName":"user-guide/settings","slug":"/user-guide/settings/database-maintenance","permalink":"/duplistatus/user-guide/settings/database-maintenance","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"mainSidebar","previous":{"title":"Display Settings","permalink":"/duplistatus/user-guide/settings/display-settings"},"next":{"title":"User Management","permalink":"/duplistatus/user-guide/settings/user-management-settings"}}');var t=a(2238),i=a(9371);const r={},l="Database Maintenance",c={},d=[{value:"Data Cleanup Period",id:"data-cleanup-period",level:2},{value:"Delete Backup Job Data",id:"delete-backup-job-data",level:2},{value:"Delete Server Data",id:"delete-server-data",level:2},{value:"Merge Duplicate Servers",id:"merge-duplicate-servers",level:2}];function o(e){const n={a:"a",code:"code",div:"div",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",span:"span",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"database-maintenance",children:"Database Maintenance"})}),"\n",(0,t.jsx)(n.p,{children:"Manage your backup data and optimise performance through database maintenance operations."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Database maintenance",src:a(6763).A+"",width:"1526",height:"700"})}),"\n",(0,t.jsx)(n.h2,{id:"data-cleanup-period",children:"Data Cleanup Period"}),"\n",(0,t.jsx)(n.p,{children:"Remove outdated backup records to free up storage space and improve system performance."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to ",(0,t.jsx)(n.code,{children:"Settings \u2192 Database Maintenance"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Choose a retention period:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"6 months"}),": Retain records from the last 6 months."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"1 year"}),": Retain records from the last year."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"2 years"}),": Retain records from the last 2 years (default)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Delete all data"}),": Remove all backup records and servers."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.code,{children:"Clear Old Records"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Confirm the action in the dialogue box."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Cleanup Effects:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Deletes backup records older than the selected period."}),"\n",(0,t.jsx)(n.li,{children:"Updates all related statistics and metrics."}),"\n",(0,t.jsx)(n.li,{children:'The "Delete all data" option also clears all associated configuration settings.'}),"\n"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.h2,{id:"delete-backup-job-data",children:"Delete Backup Job Data"}),"\n",(0,t.jsx)(n.p,{children:"Remove a specific Backup Job (type) data."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to ",(0,t.jsx)(n.code,{children:"Settings \u2192 Database Maintenance"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Select a Backup Job from the dropdown list.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"the backups will be ordered by server alias or name then the backup name."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.code,{children:"Delete Backup Job"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Confirm the action in the dialogue box."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Deletion Effects:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Permanently deletes all data associated with this Backup Job / Server."}),"\n",(0,t.jsx)(n.li,{children:"Cleans up associated configuration settings."}),"\n",(0,t.jsx)(n.li,{children:"Updates dashboard statistics accordingly."}),"\n"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.h2,{id:"delete-server-data",children:"Delete Server Data"}),"\n",(0,t.jsx)(n.p,{children:"Remove a specific server and all its associated backup data."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to ",(0,t.jsx)(n.code,{children:"Settings \u2192 Database Maintenance"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Select a server from the dropdown list."}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.code,{children:"Delete Server Data"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Confirm the action in the dialogue box."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Deletion Effects:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Permanently deletes the selected server and all its backup records."}),"\n",(0,t.jsx)(n.li,{children:"Cleans up associated configuration settings."}),"\n",(0,t.jsx)(n.li,{children:"Updates dashboard statistics accordingly."}),"\n"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)(n.h2,{id:"merge-duplicate-servers",children:"Merge Duplicate Servers"}),"\n",(0,t.jsx)(n.p,{children:"Detect and merge duplicate servers that have the same name but different IDs. This can occur when Duplicati's machine-id changes after an upgrade or reinstall."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to ",(0,t.jsx)(n.code,{children:"Settings \u2192 Database Maintenance"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["If duplicate servers are detected, a ",(0,t.jsx)(n.strong,{children:"Merge Duplicate Servers"})," section will appear."]}),"\n",(0,t.jsxs)(n.li,{children:["Review the list of duplicate server groups:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Each group shows servers with the same name but different IDs"}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.strong,{children:"Target Server"})," (newest by creation date) is highlighted"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Old Server IDs"})," that will be merged are listed separately"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Select the server groups you want to merge by checking the checkbox next to each group."}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.code,{children:"Merge Selected Servers"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Confirm the action in the dialogue box."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Merge Process:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"All old server IDs are merged into the target server (newest by creation date)"}),"\n",(0,t.jsx)(n.li,{children:"All backup records and configurations are transferred to the target server"}),"\n",(0,t.jsx)(n.li,{children:"The old server entries are deleted"}),"\n",(0,t.jsx)(n.li,{children:"Dashboard statistics are updated automatically"}),"\n"]}),"\n",(0,t.jsxs)(n.div,{className:"markdown-alert markdown-alert-important",children:["\n",(0,t.jsxs)(n.p,{className:"markdown-alert-title",children:[(0,t.jsx)(n.span,{className:"octicon octicon-important",style:{"--oct-icon":"url(\"data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-report mr-2' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath d='M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z'%3E%3C/path%3E%3C/svg%3E\")"}}),"Important"]}),"\n",(0,t.jsx)(n.p,{children:"This action cannot be undone. Make sure you want to merge the selected server groups before confirming."}),"\n"]}),"\n",(0,t.jsxs)(n.div,{className:"markdown-alert markdown-alert-note",children:["\n",(0,t.jsxs)(n.p,{className:"markdown-alert-title",children:[(0,t.jsx)(n.span,{className:"octicon octicon-note",style:{"--oct-icon":"url(\"data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-info mr-2' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath d='M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z'%3E%3C/path%3E%3C/svg%3E\")"}}),"Note"]}),"\n",(0,t.jsx)(n.p,{children:"Duplicate servers are only shown when they exist. If no duplicates are detected, the section will display a message indicating that all servers have unique names."}),"\n"]}),"\n",(0,t.jsxs)(n.div,{className:"markdown-alert markdown-alert-tip",children:["\n",(0,t.jsxs)(n.p,{className:"markdown-alert-title",children:[(0,t.jsx)(n.span,{className:"octicon octicon-tip",style:{"--oct-icon":"url(\"data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-light-bulb mr-2' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath d='M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z'%3E%3C/path%3E%3C/svg%3E\")"}}),"Tip"]}),"\n",(0,t.jsxs)(n.p,{children:["Duplicati's machine-id can change after an upgrade, reinstall or using the ",(0,t.jsx)(n.code,{children:"--machine-id"})," command line option. If the ",(0,t.jsx)(n.code,{children:"machine-id"})," is changed, it can create duplicate server entries. Use this feature to consolidate them into a single server entry."]}),"\n"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(n.div,{className:"markdown-alert markdown-alert-note",children:["\n",(0,t.jsxs)(n.p,{className:"markdown-alert-title",children:[(0,t.jsx)(n.span,{className:"octicon octicon-note",style:{"--oct-icon":"url(\"data:image/svg+xml;utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' class='octicon octicon-info mr-2' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath d='M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z'%3E%3C/path%3E%3C/svg%3E\")"}}),"Note"]}),"\n",(0,t.jsxs)(n.p,{children:["All statistics on the dashboard, detail pages, and charts are calculated using data from the ",(0,t.jsx)(n.strong,{children:"duplistatus"})," database. Deleting old information will impact these calculations."]}),"\n",(0,t.jsxs)(n.p,{children:["If you accidentally delete data, you can restore it using the ",(0,t.jsx)(n.a,{href:"/duplistatus/user-guide/collect-backup-logs",children:"Collect Backup Logs"})," feature."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},6763:(e,n,a)=>{a.d(n,{A:()=>s});const s=a.p+"assets/images/screen-settings-database-maintenance-765a02a1ac546db89e4feaf78af1d75e.png"},9371:(e,n,a)=>{a.d(n,{R:()=>r,x:()=>l});var s=a(3790);const t={},i=s.createContext(t);function r(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);