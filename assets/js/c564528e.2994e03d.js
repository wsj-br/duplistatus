"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[6961],{2915:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"development/cron-service","title":"Cron Service","description":"The application includes a separate cron service for handling scheduled tasks:","source":"@site/docs/development/cron-service.md","sourceDirName":"development","slug":"/development/cron-service","permalink":"/duplistatus/development/cron-service","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"mainSidebar","previous":{"title":"Workspace Admin Scripts & Commands","permalink":"/duplistatus/development/workspace-admin-scripts-commands"},"next":{"title":"Development Reference","permalink":"/duplistatus/development/development-guidelines"}}');var t=r(2238),i=r(9371);const c={},o="Cron Service",a={},l=[{value:"Start cron service in development mode",id:"start-cron-service-in-development-mode",level:2},{value:"Start cron service in production mode",id:"start-cron-service-in-production-mode",level:2},{value:"Start cron service locally (for testing)",id:"start-cron-service-locally-for-testing",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"cron-service",children:"Cron Service"})}),"\n",(0,t.jsx)(n.p,{children:"The application includes a separate cron service for handling scheduled tasks:"}),"\n",(0,t.jsx)(n.h2,{id:"start-cron-service-in-development-mode",children:"Start cron service in development mode"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pnpm cron:dev\n"})}),"\n",(0,t.jsx)(n.h2,{id:"start-cron-service-in-production-mode",children:"Start cron service in production mode"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pnpm cron:start\n"})}),"\n",(0,t.jsx)(n.h2,{id:"start-cron-service-locally-for-testing",children:"Start cron service locally (for testing)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pnpm cron:start-local\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The cron service runs on a separate port (8667 in development, 9667 in production) and handles scheduled tasks like overdue backup notifications. The port can be configured using the ",(0,t.jsx)(n.code,{children:"CRON_PORT"})," environment variable."]}),"\n",(0,t.jsx)(n.p,{children:"The cron service includes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Health check endpoint"}),": ",(0,t.jsx)(n.code,{children:"/health"})," - Returns service status and active tasks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Manual task triggering"}),": ",(0,t.jsx)(n.code,{children:"POST /trigger/:taskName"})," - Manually execute scheduled tasks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Task management"}),": ",(0,t.jsx)(n.code,{children:"POST /start/:taskName"})," and ",(0,t.jsx)(n.code,{children:"POST /stop/:taskName"})," - Control individual tasks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Configuration reload"}),": ",(0,t.jsx)(n.code,{children:"POST /reload-config"})," - Reload configuration from database"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Automatic restart"}),": The service automatically restarts if it crashes (managed by ",(0,t.jsx)(n.code,{children:"duplistatus-cron.sh"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Watch mode"}),": Development mode includes file watching for automatic restarts on code changes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Overdue backup monitoring"}),": Automated checking and notification of overdue backups (runs every 5 minutes by default)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Audit log cleanup"}),": Automated cleanup of old audit log entries (runs daily at 2 AM UTC)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Flexible scheduling"}),": Configurable cron expressions for different tasks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Database integration"}),": Shares the same SQLite database with the main application"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"RESTful API"}),": Complete API for service management and monitoring"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},9371:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>o});var s=r(3790);const t={},i=s.createContext(t);function c(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);